{"aid": "40168497", "title": "Working with stacked commits in GitHub with Sapling", "url": "https://noamlerner.com/posts/sapling_test/", "domain": "noamlerner.com", "votes": 1, "user": "bugok1", "posted_at": "2024-04-26 12:20:26", "comments": 0, "source_title": "Working with stacked commits in GitHub with Sapling", "source_text": "Working with stacked commits in GitHub with Sapling \u00b7 Noam Lerner's Blog\n\n\u2193Skip to main content\n\n# Working with stacked commits in GitHub with Sapling\n\n26 April 2024\u00b72 mins\n\nSapling Source Control Github\n\nSapling is a:\n\n> A Scalable, User-Friendly Source Control System\n\nIt\u2019s a fork of Mercurial, built internally at Meta. As I\u2019ve been at Meta for\nover 10 years, I got used to using Mercurial. The ability of working with\nstacked commits has changed the way I write code, and expect others to write\ncode. It helps break down a large feature into smaller chunks of code which\nare easier to write, review and test.\n\nI wanted to try how this looks using the public version of Sapling, so I gave\nit a go: I created a new repo: https://github.com/bugok/sapling-test. I cloned\nthe repo by sl clone https://github.com/bugok/sapling-test, created a dummy\nfirst commit and pushed it directly using sl push.\n\nTo make the point about splitting a new feature to multiple commits, I created\nthree stacked commits:\n\n    \n    \n    0|[noamler@noamler-mbp]:~/sources/sapling-test (d33baf7ed)$ sl @ d33baf7ed 17 minutes ago noamler \u2502 Use API in main \u2502 o 87c8702c7 17 minutes ago noamler \u2502 Implement API \u2502 o 16f8a2060 20 minutes ago noamler \u256d\u2500\u256f API with NotImplementedError \u2502 o e13acdffa 22 minutes ago noamler remote/main \u2502 Initial code commit, hello world ~\n\nFollowing this guide, I ran sl push --to remote/my-new-feature, which created\nthis pull request. Now, sl ssl I can see that the local commits are linked to\nthe pull request:\n\n    \n    \n    0|[noamler@noamler-mbp]:~/sources/sapling-test (d33baf7ed)$ sl ssl @ d33baf7ed 22 minutes ago noamler remote/my-new-feature \u2502 Use API in main \u2502 o 87c8702c7 22 minutes ago noamler \u2502 Implement API \u2502 o 16f8a2060 26 minutes ago noamler \u256d\u2500\u256f API with NotImplementedError \u2502 o e13acdffa 28 minutes ago noamler remote/main \u2502 Initial code commit, hello world ~\n\n(See the text next to the top commit)\n\nUnfortunately, GitHub doesn\u2019t show the different commits, but that\u2019s where\nReviewStack comes into play. Loading https://reviewstack.dev/bugok/sapling-\ntest/pull/1 Shows the following:\n\nI can see only the changes of the first commit:\n\nI can see the changes from the second to the third commit:\n\nI can see all the changes together:\n\nAfter poking around ReviewStack, I eventually merged the pull request. Then, I\nran sl pull to get the changed locally, and ran sl to see how my local repo\nlooks:\n\n    \n    \n    0|[noamler@noamler-mbp]:~/sources/sapling-test (d33baf7ed)$ sl o 32ac678d0 77 seconds ago remote/main \u251c\u2500\u256e \u2502 \u2502 \u2502 ~ \u2502 @ d33baf7ed 39 minutes ago noamler remote/my-new-feature \u2502 Use API in main ~\n\nsl log shows all three commits - which is helpful to later see how the\ndifferent parts of the \u201cfeature\u201d were implemented. It also makes it easier to\nrevert parts of the feature, if needed.\n\nAnd now, on to the next feature.\n\n\u2190\u2192 Increasing intent improves results 4 October 2023\n\n\u2191\n\n\u00a9 2024 Noam Lerner\n\nPowered by Hugo & Congo\n\n", "frontpage": false}
