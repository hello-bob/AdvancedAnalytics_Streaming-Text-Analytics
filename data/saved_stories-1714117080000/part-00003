{"aid": "40162539", "title": "Random Sample Overlap", "url": "https://www.johndcook.com/blog/2019/12/13/random-sample-overlap/", "domain": "johndcook.com", "votes": 1, "user": "downboots", "posted_at": "2024-04-25 20:23:20", "comments": 0, "source_title": "Random sample overlap", "source_text": "Random sample overlap\n\n(832) 422-8646\n\nContact\n\n# Random sample overlap\n\nPosted on 13 December 2019 by John\n\nHere\u2019s a simple probability problem with an answer you may find surprising.\n(The statement of the problem and solution are simple. The proof is not as\nsimple.)\n\nSuppose you draw 1,000 serial numbers at random from a set of 1,000,000. Then\nyou make another random sample of 1,000. How likely is it that no numbers will\nbe the same on both lists?\n\nTo make the problem slightly more general, take two samples of size n from a\npopulation of size n2 where n is large.\n\nThe probability of no overlap in the two samples is approximately 1/e. That\nis, in the limit as n approaches infinity, the probability converges to 1/e.\n\nFor n = 1,000 the approximation is good to three figures.\n\n## Proof\n\nThere are Binomial(n2, n) ways to choose a sample of size n from a population\nof size n2. After we\u2019ve drawn the first sample, there are Binomial(n2 \u2013 n, n)\nways to draw a new sample that doesn\u2019t overlap with the first one. The\nprobability of such a sample is\n\nThe fractions on the last line are in decreasing order, and so their product\nis less than the first one raised to the nth power, and greater than the last\none raised to the nth power.\n\nBy taking logs one can show that\n\nSince upper and lower bounds on the probability converge to 1/e, the\nprobability converges to 1/e.\n\n## Comments\n\nThis problem is reminiscent of the birthday problem, but it\u2019s a little\ndifferent because the samples are draw without replacement.\n\nIncidentally, I didn\u2019t make up this problem out of thin air. It came up\nnaturally in the course of a consulting project this week.\n\nCategories : Math\n\nTags : Probability and Statistics\n\nBookmark the permalink\n\n## 5 thoughts on \u201cRandom sample overlap\u201d\n\n  1. Matt Johnson\n\n13 December 2019 at 08:54\n\nI tried it and you\u2019re right. That\u2019s cool! Now I\u2019m a bit interested in the\nproof.. Here\u2019s the R code I used:\n\nn_no_over_laps <\\- 0. N_trials <\\- 100000 S <\\- seq(1, 1000000) N <\\- 1000\n\nfor(i in seq(1, N_trials)) { N1 <\\- sample(S, N, replace=T) N2 <\\- sample(S,\nN, replace=T) n_no_over_laps 0, 0, 1) } paste(1 / exp(1), n_no_over_laps /\nN_trials)\n\n# Theory, Experiment \u201c0.367879441171442 0.36585\u201d\n\n  2. Mike Anderson\n\n13 December 2019 at 11:17\n\nNice result, worthy of a homework problem for my stats majors. The proof isn\u2019t\nso bad once you recognize that it boils down to the limit of (1-1/x)^x as x\ngets large. Thanks!\n\n  3. John\n\n13 December 2019 at 16:15\n\nIt\u2019s a little more complicated since the sampling is done without replacement.\n\nLet n be the sample size and n^2 the population size. The probability of no\noverlap is\n\n((n^2 \u2013 n)!)^2 / (n^2)! (n^2 \u2013 2n)!\n\nYou can write this out and find that it\u2019s bounded above an below by\nexpressions that converge to 1/e.\n\nUpdate: I\u2019ve updated the post to include the proof sketched in this comment.\n\n  4. Nathan Hannon\n\n13 December 2019 at 18:31\n\nPossibly simpler proof: Let k = sqrt(n). Choose one set of numbers first; it\ndoesn\u2019t matter what you choose since you always get k different numbers. Now\nchoose the other set of k numbers. The probability of the (j+1)th number being\ndistinct from the first set, assuming the 1st through jth are, is (n \u2013 k \u2013 j)\n/ (n \u2013 j). This gets smaller as j increases, and so is bounded by (n \u2013 k) / n\nand (n \u2013 2k) / (n \u2013 k); that is, by 1 \u2013 (1 / k) and 1 \u2013 (1 / (k \u2013 1)).\n\nIt is well known that (1 \u2013 (1 / k))^k converges to 1/e, and not too hard to\nshow the same for the lower bound: (1 \u2013 (1 / (k \u2013 1)))^k = (1 \u2013 (1 / (k \u2013\n1)))^(k \u2013 1) * (1 \u2013 (1 / (k \u2013 1))) -> 1/e * 1 = 1/e.\n\n  5. Peter Butler\n\n18 May 2020 at 11:23\n\nI did not look at the other four responses before I posted.\n\nThe problem was made easy because it said (presumably product) SERIAL numbers.\nI.e. all different. (However, in thinking about possible duplicates I believe\nthat the analysis below still holds.)\n\nThus for any given member of set A, the probability of a match in set B is\n0.001, one in a thousand. Thus the probability of a non-match in set B is\n0.999. With 1000 events of the same probability the chance of all non-matches\nis 0.999^1000. (\u2018^\u2019 used for exponentiation because HTML follows, 0.9991000,\nsometimes does not work in comments on many platforms.)\n\nThe chance that there will be no matches is 0.367695425.\n\nps I am looking for someone to critique my clever pseudo-random number\ngenerator.\n\nComments are closed.\n\nJohn D. Cook, PhD\n\nMy colleagues and I have decades of consulting experience helping companies\nsolve complex problems involving data privacy, applied math, and statistics.\n\nLet\u2019s talk. We look forward to exploring the opportunity to help your company\ntoo.\n\n### John D. Cook\n\n\u00a9 All rights reserved.\n\n(832) 422-8646\n\nEMAIL\n\n", "frontpage": false}
