{"aid": "40113491", "title": "Show HN: Source Code for CSVs", "url": "https://scroll.pub/blog/datasets.html", "domain": "scroll.pub", "votes": 1, "user": "breck", "posted_at": "2024-04-22 12:00:03", "comments": 0, "source_title": "Scroll Datasets: source code for CSVs", "source_text": "Scroll Datasets: source code for CSVs\n\n# Scroll Datasets: source code for CSVs\n\nMore examples of Scroll Datasets from datasets.scroll.pub.\n\nApril 21, 2024 \u2014 The source code for this blog post contains a dataset about\nthe planets and generates this HTML file as well as a CSV, a TSV, and a JSON\nfile. It demonstrates Scroll Datasets.\n\nScroll Datasets are normal plain text blog posts written in Scroll that also\ncontain structured data and output that data into formats ready for data\nvisualization and analysis tools.\n\nScroll Datasets are line oriented but represent a table(s). You might call\nthem deconstructed csvs or deconstructed spreadsheets.\n\n  * Use LLMs to instantly generate datasets that are ready for human review and improvement.\n  * Intermingle structured data with markup to annotate any and every part of a dataset while still generating strict tabular files for data analysis tools.\n  * Put documentation, schema and data all in one (or more) plain text file(s) to easily share, collaborate on, and improve, all tracked by git for trust.\n\n# Quick Code Example:\n\nThis dataset has 2 measures (columns) and 2 concepts (rows). Documentation,\ncolumn definitions, rows and *any notes/markup/content* can go in the same\nfile. # Measures (aka Header, aka Columns, aka Schema) id: string moons: int #\nConcepts (aka Rows) :: id: mars moons: 2 I verified moon count with Google. -\nBY :: id: jupiter moons: 63 The moons of Jupiter have their own Wikipedia Page\nhttps://en.wikipedia.org/wiki/Moons_of_Jupiter moons of Jupiter ::\nwriteDataset demo.csv\n\n# The code above generates an HTML page and demo.csv that contains this:\n\nid,moons mars,2 jupiter,63\n\n# Overview:\n\n  * A dataset consists of 4 atomic elements:\n    * measures (think columns or the header row in a CSV)\n    * concepts (think rows)\n    * values (think values)\n    * measurements (concept & measure & value = measurement)\n\n# How to use\n\n  * A concept is like a row in a database. Concepts are delimited by ::.\n  * Measure definitions must come before the first concept (::) and are written like: appeared: int\n  * Measurements are done like this appeared: 2024\n\n# FAQ\n\n#### Isn't the better idea to enhance existing spreadsheet GUIs with LLM\ngeneration capabilities?\n\nAlmost certainly. Using Scroll for datasets will be much slower and worse than\nfuture spreadsheet apps with carefully crafted LLM integrations.\n\nHowever, it's important to also have simple, lower tech, timeless tools and\nScroll Datasets is one of those.\n\n#### Can't you do this same thing with YAML and/or Markdown?\n\nYes! You can easily achieve the same thing as LLMs & Scroll Datasets using\nLLMs & YAML, or LLMs & YAML & Markdown.\n\nFor YAML, just put your documentation and schema in YAML comments up top and\nthen have a tiny script to read that YAML and dump CSV/TSV/JSON or whatever.\nYAML gives you loads of data structures to use and is widely supported in many\nlanguages. But generating HTML from the same file would require more work.\n\nIf you want to intermix markup content with your datasets, you can use\nMarkdown to add the marked up content and then have code sections embedding\nthe YAML and a tiny script to parse out those YAML blocks and write your data\nto disk.\n\n#### So, why use Scroll for storing datasets instead of YAML?\n\nEither can do the job. I expect the Scroll design to end up being more\nergonomic, but that might not be true or may be unimportant.\n\nIf you don't like Scroll's (evolving) version and want to switch it will\nalways be straightforward to automatically refactor to YAML.\n\n#### What other related work is out there?\n\nThis is a simple pattern to implement, so I'm sure it is likely it has been\ndone a few times before. Please let me know so I can include links to--and\nlearn from--any other prior art.\n\n#### What are the advanced features?\n\n  * Supports nested measures^+\n  * Gradual typing in measure definitions^+\n  * Autojoins across files on ids^+\n  * Auto generates normalized tables for array measures^+\n  * Support for text blobs^+\n  * Support for computed measures^+\n\n\\+ Planned. \u2b90\n\n#### What is the origin of Scroll Datasets?\n\nLLM dataset generation is a major breakthrough in datasets. Scroll Datasets\nare, at best, a minor improvement. They are designed to work alongside LLMs to\nhelp solve the Dataset Needed problem.\n\nScroll Datasets evolved out of TrueBase. Scroll Datasets have eliminated the\nneed for the TrueBase software (and existing TrueBase sites should be migrated\nto Scroll Datasets), but were informed by the TrueBase build experience.\n\nAlthough Scroll Datasets are designed for a world with LLMs, the design is\nmeant to be useful without them as well, and would also have been mildly\nuseful 30 years ago.\n\n#### What were the design goals?\n\n  * Have an LLM do the bulk of the work while humans supervise to remove hallucinations.\n  * Can store everything (documentation, schema, all concepts) in 1 clean plain text file or split into many files (using the import keyword).\n  * The Scroll Dataset syntax balances looseness useful in creative thinking with the tightness needed by tabular data visualization and analysis tools.\n\n#### Why are measures and concepts root-level features and not indented?\n\nThe normal way to implement this in Scroll would be something like:\n\nmeasures id string moons int concept id mars moons 2 concept id jupiter moons\n63\n\nThe flat design was chosen for ergonomic reasons. Datasets seem like they\nmight be useful enough to be worth breaking from Scroll convention a bit. Like\nall things in Scroll, Datasets are experiment, and maybe this design will\nevolve.\n\n# Planets Dataset\n\nBelow is the dataset embedded in this Scroll file.\n\nid| title| diameter| surfaceGravity| yearsToOrbitSun| moons| aka  \n---|---|---|---|---|---|---  \nmars| Mars| 6794| 4| 1.881| 2  \njupiter| Jupiter| 142984| 25| 11.86| 63  \nearth| Earth| 12756| 10| 1| 1| Pale Blue Dot  \nmercury| Mercury| 4879| 4| 0.241| 0  \nsaturn| Saturn| 120536| 9| 29.46| 64  \nuranus| Uranus| 51118| 8| 84.01| 27  \nvenus| Venus| 12104| 9| 0.615| 0  \nneptune| Neptune| 49572| 11| 164.79| 14  \n  \nShowing 1 to 8 of 8 entries\n\n## Measures\n\nid: string\n\ntitle: string\n\ndiameter: int\n\nWhat is the diameter of the planet?\n\nsurfaceGravity: int\n\nWhat is the surface gravity of the planet?\n\nyearsToOrbitSun: float\n\nHow many Earth years does it take for the planet to orbit the Sun?\n\nmoons: int\n\nHow many moons does the planet have?\n\naka: string\n\nWhat are the alternative names for the planet?\n\n# Concepts\n\nid: mars\n\ntitle: Mars\n\ndiameter: 6794\n\nsurfaceGravity: 4\n\nyearsToOrbitSun: 1.881\n\nmoons: 2\n\nid: jupiter\n\ntitle: Jupiter\n\ndiameter: 142984\n\nsurfaceGravity: 25\n\nyearsToOrbitSun: 11.86\n\nmoons: 63\n\nThe moons of Jupiter have their own Wikipedia Page\n\nid: earth\n\ntitle: Earth\n\ndiameter: 12756\n\nsurfaceGravity: 10\n\nyearsToOrbitSun: 1\n\nmoons: 1\n\naka: Pale Blue Dot\n\nhasLife: true\n\nwikipedia: https://en.wikipedia.org/wiki/Earth\n\nage: 4500000000\n\nNote: It was only during the 19th century that geologists realized Earth's age\nwas at least many millions of years.\n\nid: mercury\n\ntitle: Mercury\n\ndiameter: 4879\n\nsurfaceGravity: 4\n\nyearsToOrbitSun: 0.241\n\nmoons: 0\n\nid: saturn\n\ntitle: Saturn\n\ndiameter: 120536\n\nsurfaceGravity: 9\n\nyearsToOrbitSun: 29.46\n\nmoons: 64\n\nid: uranus\n\ntitle: Uranus\n\ndiameter: 51118\n\nsurfaceGravity: 8\n\nyearsToOrbitSun: 84.01\n\nmoons: 27\n\nid: venus\n\ntitle: Venus\n\ndiameter: 12104\n\nsurfaceGravity: 9\n\nyearsToOrbitSun: 0.615\n\nmoons: 0\n\nid: neptune\n\ntitle: Neptune\n\ndiameter: 49572\n\nsurfaceGravity: 11\n\nyearsToOrbitSun: 164.79\n\nmoons: 14\n\nby Breck Yunits\n\nView source\n\nBuilt with Scroll v77.2.0\n\n", "frontpage": false}
