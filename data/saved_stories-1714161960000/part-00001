{"aid": "40167414", "title": "This month in Servo: Acid2 redux, Servo book, Qt demo, and more", "url": "https://servo.org/blog/2024/04/26/acid2-servo-book-qt/", "domain": "servo.org", "votes": 2, "user": "GeneralMaximus", "posted_at": "2024-04-26 09:34:57", "comments": 0, "source_title": "This month in Servo: Acid2 redux, Servo book, Qt demo, and more!", "source_text": "This month in Servo: Acid2 redux, Servo book, Qt demo, and more! - Servo, the\nembeddable, independent, memory-safe, modular, parallel web rendering engine\n\nThis month in Servo: Acid2 redux, Servo book, Qt demo, and more!\n\n# This month in Servo: Acid2 redux, Servo book, Qt demo, and more!\n\n2024-04-26 A new layout milestone, revamped docs, faster builds, plus\nembedding, video, fonts, WebGPU, and CSS improvements.\n\nServo now renders Acid2 perfectly, but like all browsers, only at 1x dpi.\n\nBack in November, Servo\u2019s new layout engine passed Acid1, and this month,\nthanks to a bug-squashing sprint by @mrobinson and @Loirooriol, we now pass\nAcid2!\n\nNote that Acid2 is only designed to work at 1x dpi, so if you have a HiDPI\nmonitor, be sure to run servoshell with --device-pixel-ratio 1 to avoid a red\npattern over the eyes.\n\nWe would also like to thank you all for your generous support! Since we moved\nto Open Collective and GitHub Sponsors in March, we have received 1578 USD\n(after fees), including 1348 USD/month (before fees) in recurring donations.\nThis smashed our first two goals, and is a respectable part of the way towards\nour next goal of 10000 USD/month. For more details, see our Sponsorship page\nand announcement post.\n\n1348 USD/month\n\n10000\n\nWe are still receiving donations from 19 people on LFX, and we\u2019re working on\ntransferring the balance to our new fund, but we will stop accepting donations\nthere soon \u2014 please move your recurring donations to GitHub or Open\nCollective. As always, use of these funds will be decided transparently in the\nTechnical Steering Committee, starting with the TSC meeting on 29 April.\n\nServo\u2019s docs are moving to the Servo book, and a very early version of this is\nnow online (@delan, servo/book)! The goal is to unify our many sources of\ndocumentation, including the hacking quickstart guide, building Servo page,\nServo design page, and other in-tree docs and wiki pages, into a book that\u2019s\nricher and easier to search and navigate.\n\nServo now supports several new features in its nightly builds:\n\n  * as of 2024-04-02, files setter on HTMLInputElement (@shanehandley, #31934)\n  * as of 2024-04-05, \u2018ex\u2019 units in CSS (@mrobinson, #31966)\n  * as of 2024-04-05, onSubmittedWorkDone method on GPUQueue (@sagudev, #31772)\n  * as of 2024-04-08, deleteRow(-1) on empty HTMLTableElement (@shanehandley, #32009)\n  * as of 2024-04-12, ElementInternals and attachInternals (@pshaughn, @cathiechen, #25705, #31980)\n  * as of 2024-04-16, \u2018background-attachment: fixed\u2019 (@mrobinson, #32068)\n  * as of 2024-04-16, <object> with image data URLs (@mrobinson, #32069)\n  * as of 2024-04-18, \u2018clear\u2019 property on <br> elements (@mrobinson, #32094)\n  * as of 2024-04-23, basic support for \u2018list-style-position: outside\u2019 (@mrobinson, @Loirooriol, #32114)\n\nAs of 2024-04-05, we now support non-autoplay <video> (@eerii, media#419,\n#32001), as long as the page provides its own controls, as well as the\n\u2018baseline-source\u2019 property (@MunishMummadi, #31904, #31913). Both of these\ncontributors started out as Outreachy participants, and we\u2019re thrilled to see\ntheir continued work on improving Servo.\n\nWe\u2019ve also landed several other rendering improvements:\n\n  * Stylo is now fully caught up with upstream (@Loirooriol, #31932, #31991, #32032, #32066, #32089, #32128)\n  * elements or frames no longer scroll to top when transforms change (@mrobinson, #31892)\n  * fixed intrinsic sizing of inline content containing \u2018pre-wrap\u2019 (@Loirooriol, #31930)\n  * fixed margin collapsing with indefinite percentages or non-zero height (@Loirooriol, #32059, #32060)\n  * fixed some (but not all) HTTP 400 errors when sending requests to nginx (@philip-lamb, #32024, #32093)\n  * fixed \u2018min-height\u2019 and \u2018max-height\u2019 on elements with \u2018float\u2019 (@Loirooriol, #32057)\n\nOur font rendering has improved, with support for selecting the correct weight\nand style in indexed fonts (.ttc) on Linux (@mukilan, @mrobinson, #32127), as\nwell as support for emoji font fallback on macOS (@mrobinson, #32122). Note\nthat color emoji are not yet supported.\n\nOther big changes are coming to Servo\u2019s font loading and rendering, thanks to\n@mrobinson\u2019s font system redesign RFC (#32033). Work has already started on\nthis (@mrobinson, @mukilan, #32034, #32038, #32100, #32101, #32115), with the\neventual goal of making font data zero-copy readable from multiple threads.\nThis in turn will fix several major issues with font caching, including cached\nfont data leaking over time and between pages, unnecessary loading from disk,\nand unnecessary copying to layout.\n\nWe\u2019ve also started simplifying the script\u2013layout interface (@mrobinson,\n#31937, #32081), since layout was merged into the script thread, and script\ncan now call into layout without IPC.\n\n## Embedding and dev changes\n\nThe prototype shows that Servo can be integrated with a Qt app via CXX-Qt.\n\nA prototype for integrating Servo with Qt was built by @ahayzen-kdab and\n@vimpostor and shown at Embedded World 2024. We\u2019re looking forward to\nincorporating their feedback from this to improve Servo\u2019s embedding API. For\nmore details, check out their GitHub repo and Embedding the Servo Web Engine\nin Qt.\n\nServo now supports multiple concurrent webviews (@wusyong, @delan, @atbrakhi,\n#31417, #32067)! This is a big step towards making Servo a viable embedded\nwebview, and we will soon use it to implement tabbed browsing in servoshell\n(@delan, #31545).\n\nThree of the slowest crates in the Servo build process are mozjs_sys,\nmozangle, and script. The first two compile some very large C++ libraries in\ntheir build scripts \u2014 SpiderMonkey and ANGLE respectively \u2014 and the third\nblocks on the first two. They can account for over two minutes of build time,\neven on a very fast machine (AMD 7950X), and a breaking change in newer\nversions of GNU Make (mozjs#375) can make mozjs_sys take over eight minutes to\nbuild!\n\nmozjs_sys now uses a prebuilt version of SpiderMonkey by default (@wusyong,\n@sagudev, mozjs#450, #31824), cutting clean build times by over seven minutes\non a very fast machine (see above). On Linux with Nix (the package manager),\nwhere we run an unaffected version of GNU Make, it can still save over 100\nseconds on a quad-core CPU with SMT. Further savings will be possible once we\ndo the same for mozangle.\n\nIf you use NixOS, or any Linux distro with Nix, you can now get a shell with\nall of the tools and dependencies needed to build and run Servo by typing nix-\nshell (@delan, #32035), without also needing to type etc/shell.nix.\n\nAs for CI, our experimental Android build now supports aarch64 (@mukilan,\n#32137), in addition to Android on armv7, x86_64, and i686, and we\u2019ve improved\nflakiness in the WebGPU tests (@sagudev, #31952) and macOS builds (@mrobinson,\n#32005).\n\n## Conferences and events\n\nEarlier this month, Rakhi Sharma gave her talk A year of Servo reboot: where\nare we now? at Open Source Summit North America (slides; recording available\nsoon) and at the Seattle Rust User Group (slides).\n\nIn the Netherlands, Gregory Terzian will be presenting Modular Servo: Three\nPaths Forward at the GOSIM Conference 2024, on 6 May at 15:10 local time\n(13:10 UTC). That\u2019s the same venue as RustNL 2024, just one day earlier, and\nyou can also find Gregory, Rakhi, and Nico at RustNL afterwards. See you\nthere!\n\nBack\n\nCode of Conduct | Contact: info@servo.org, Zulip Chat, GitHub Discussions, Mastodon, Twitter\n\n\u00a9 2024 The Servo Project Developers\n\nCopyright \u00a9 Servo is a project of Linux Foundation Europe.\n\nFor website terms of use, trademark policy and other project policies please\nsee https://lfprojects.org.\n\n", "frontpage": false}
