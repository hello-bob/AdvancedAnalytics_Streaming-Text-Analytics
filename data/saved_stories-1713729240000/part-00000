{"aid": "40104668", "title": "Parse Ternary Lambda Calculus for Correctness", "url": "https://codegolf.stackexchange.com/questions/233589/parse-ternary-lambda-calculus-for-correctness", "domain": "codegolf.stackexchange.com", "votes": 2, "user": "danny00", "posted_at": "2024-04-21 11:00:24", "comments": 0, "source_title": "Parse Ternary Lambda Calculus for correctness", "source_text": "code golf - Parse Ternary Lambda Calculus for correctness - Code Golf Stack\nExchange\n\n#### Stack Exchange Network\n\nStack Exchange network consists of 183 Q&A communities including Stack\nOverflow, the largest, most trusted online community for developers to learn,\nshare their knowledge, and build their careers.\n\nVisit Stack Exchange\n\nTeams\n\nQ&A for work\n\nConnect and share knowledge within a single location that is structured and\neasy to search.\n\nLearn more about Teams\n\n# Parse Ternary Lambda Calculus for correctness\n\nAsk Question\n\nAsked 2 years, 8 months ago\n\nModified 1 year, 11 months ago\n\nViewed 514 times\n\nThis question shows research effort; it is useful and clear\n\n11\n\nSave this question.\n\nShow activity on this post.\n\nWheat Wizard has once tried to come up with a parsing problem unsuitable for\nregex, but it failed due to Anders Kaseorg's Perl regex answer. This is the\nsecond attempt. Now that we know that Perl regex is far more powerful than\nwe've imagined, this challenge aims to be un-golfy for it instead.\n\n## Introduction\n\nA lambda term is recursively defined as follows:\n\n  * A variable is a lambda term.\n  * A lambda abstraction of a lambda term is a lambda term.\n  * A function application of two lambda terms is a lambda term.\n\nThis is concisely written as follows (where e is a term and x is any valid\nvariable name):\n\n    \n    \n    e = x | \u03bbx. e | e e\n\nA variable is often a string (as in Wheat Wizard's challenge), but it suffers\nfrom name shadowing problem. To avoid it and for an easier encoding, we use de\nBruijn indices instead. In this notation, a variable is replaced with a\npositive integer, which is equal to \"the number of binders that are in scope\nbetween that occurrence and its corresponding binder\". The grammar is\nsimplified to the following:\n\n    \n    \n    e = i | \u03bb e | e e\n\nSome examples in this notation:\n\n  * \u03bbx. x is written as \u03bb 1, as the inner x binds to the first (and only) \u03bb in scope.\n  * \u03bbx. \u03bby. x is written as \u03bb \u03bb 2, as the inner x binds to the second \u03bb, counting from the closest one.\n  * \u03bbx. \u03bby. x (\u03bbz. z y) is written as \u03bb \u03bb 2 (\u03bb 1 2).\n\n## Ternary lambda calculus\n\nThis is an encoding of a lambda term similar to Binary lambda calculus, but in\nternary (a string of digits 0, 1, and 2). A lambda term written using de\nBruijn indexes is converted to Ternary lambda calculus as follows:\n\n  * A variable of index i is converted to binary (using 0 and 1), and then a 2 is added at the end. Since i is positive, this always starts with a 1.\n  * A lambda abstraction \u03bb e is recursively converted to 0<e>, where <e> denotes the Ternary conversion of e.\n  * A function application e1 e2 is recursively converted to 2<e1><e2>.\n\nExamples:\n\n  * \u03bb 1 is encoded to 012. (1 encodes to 12, and a single lambda abstraction adds a 0)\n  * \u03bb \u03bb 2 is encoded to 00102.\n  * \u03bb \u03bb 2 (\u03bb 1 2) is encoded to 0021020212102.\n\nThe original BLC requires that the lambda term is closed, i.e. all variables\nare bound to some lambda abstraction. This means the variable index i is\nlimited by the current \"lambda depth\"; in particular, no variables may appear\nat the top level at all. Using the lambda depth (a non-negative integer) as\nthe context, the grammar to match becomes the following:\n\n    \n    \n    TermAtDepth(d) = bin(i) \"2\" where 1 \u2264 i \u2264 d | \"0\" TermAtDepth(d+1) | \"2\" TermAtDepth(d) TermAtDepth(d) e = TermAtDepth(0)\n\n## Code\n\n    \n    \n    tlc :: Int -> Parser () tlc depth = do choice [ do char '1' idx <- many $ charBy (`elem` \"01\") guard $ foldl (\\x y->x*2+y) 1 [fromEnum x-48|x<-idx] <= depth char '2' return () , do char '0' tlc (depth + 1) , do char '2' tlc depth tlc depth ] return ()\n\nTry it online!\n\n## Challenge\n\nGiven a ternary string (a string that entirely consists of digits 0, 1, and\n2), determine if it is a valid Ternary lambda calculus code.\n\nYou may take the input as a string or a list of digit values. The input may be\nempty, and your code should give a false output on it.\n\nFor output, you can choose to\n\n  * output truthy/falsy using your language's convention (swapping is allowed), or\n  * use two distinct, fixed values to represent true (affirmative) or false (negative) respectively.\n\nStandard code-golf rules apply. The shortest code in bytes wins.\n\n## Test cases\n\n    \n    \n    -- Truthy 012 00102 0021020212102 000000000010102 00002210022112122112102 -- Falsy (empty) 2112 2112112 012012012\n\n  * code-golf\n  * string\n  * decision-problem\n  * parsing\n  * lambda-calculus\n\nShare\n\nCC BY-SA 4.0\n\nImprove this question\n\nFollow this question to receive notifications\n\nasked Aug 20, 2021 at 0:13\n\nBubblerBubbler\n\n76k55 gold badges146146 silver badges456456 bronze badges\n\n4\n\n  * Nice parsing library you got there :)\n\n\u2013 Wheat Wizard \u2666\n\nAug 20, 2021 at 11:06\n\n  * @WheatWizard Yeah, it's extremely easy to use. I love it :D\n\n\u2013 Bubbler\n\nAug 20, 2021 at 11:09\n\n  * Can we use an error to signal false (or true)?\n\n\u2013 Nick Kennedy\n\nAug 21, 2021 at 15:53\n\n  * @NickKennedy Yes, that's fine.\n\n\u2013 Bubbler\n\nAug 23, 2021 at 4:01\n\nAdd a comment |\n\n## 5 Answers 5\n\nReset to default\n\nThis answer is useful\n\n4\n\nSave this answer.\n\nShow activity on this post.\n\n# Jelly, 32 bytes\n\n    \n    \n    4l\u00b71\u1eb8?\u2018} 1;\u0153\u1e612\u1e6a0\u1e22\u1e04<\u0257? \u00f19\u00f1 \u1e22\u2018$l\u00b7 \u00e71\n\nTry it online!\n\nA full program taking a list of integers and returning an empty list (falsy)\nfor valid and a non-empty list (truthy) for invalid.\n\n## Explanation\n\n### Helper link 1 (handles 0...)\n\n    \n    \n    \u1eb8? | If the list is non-empty: 4l\u00b7 \u2018} | - Call helper link 4 with the depth increased by 1 1 | - Else return 1\n\n### Helper link 2 (handles 1...)\n\n    \n    \n    1; | Prepend 1 \u0153\u1e612 | Split at 2s \u1e22\u1e04<\u0257? | If the first part of the list converted from binary is less than the depth: \u1e6a | - Return the second part of the list 0 | - Else return 0\n\n### Helper link 3 (handles 2...)\n\n    \n    \n    \u00f19\u00f1 | Call helper link 4 twice, preserving depth\n\n### Helper link 4 (handles next part)\n\n    \n    \n    \u1e22\u2018$l\u00b7 | Call the helper link indicated by the first list member plus 1, preserving the same depth\n\n### Main link\n\n    \n    \n    \u00e71 | Call helper link 4 with 1 as the right argument (depth)\n\nShare\n\nCC BY-SA 4.0\n\nImprove this answer\n\nFollow this answer to receive notifications\n\nedited Aug 22, 2021 at 8:42\n\nanswered Aug 21, 2021 at 17:38\n\nNick KennedyNick Kennedy\n\n21.1k33 gold badges1616 silver badges4242 bronze badges\n\nAdd a comment |\n\nThis answer is useful\n\n3\n\nSave this answer.\n\nShow activity on this post.\n\n# Haskell + hgl, 86 bytes\n\n    \n    \n    q x=cx[do \u03c7 1;k<-my$kB(<2);gu$x>lF(pl.db)1 k;\u03c7 2,\u03c7 0*>q(x+1),\u03c7 2*>q x*>q x] x1$q 1\n\nTakes input as a list of integers\n\nhgl is a library I am making for golfing in Haskell. It has pretty decent\nparsing capabilities. It however does not yet have a function to convert from\nbinary. Which is a bit of a problem for this answer. The code I came up with\nto do the task is lF(pl.db)0.\n\nThis code follows same structure of the parsing code given in the question.\nThat's because both parsing libraries are written by me and use the same\ntheoretic underpinning.\n\nWe use cx which is analygous to the choice in the question selecting between 3\noptions.\n\n    \n    \n    q x = cx [ do \u03c7 1 k<-my$kB(<2) gu$x>lF(pl.db)1 k \u03c7 2 , \u03c7 0*>q(x+1) , \u03c7 2*>q x*>q x ]\n\nThe last two don't use do notation since it would cost bytes, but they can be\nwritten with it.\n\n    \n    \n    q x = cx [ do \u03c7 1 k<-my$kB(<2) gu$x>lF(pl.db)1 k \u03c7 2 , do \u03c7 0 q(x+1) , do \u03c7 2 q x q x ]\n\nAs one might guess now \u03c7 parses a single integer. We have gu which is guard, m\nwhich is fmap and kB which is the charBy function.\n\nThe remainder is lF(pl.db)1 which converts from binary. In regular haskell\nthis is\n\n    \n    \n    foldl((+).(*2))1\n\nShare\n\nCC BY-SA 4.0\n\nImprove this answer\n\nFollow this answer to receive notifications\n\nedited Aug 22, 2021 at 21:41\n\nanswered Aug 20, 2021 at 12:06\n\nWheat Wizard\u2666Wheat Wizard\n\n98.7k2121 gold badges278278 silver badges650650 bronze badges\n\nAdd a comment |\n\nThis answer is useful\n\n2\n\nSave this answer.\n\nShow activity on this post.\n\n# JavaScript, 121 bytes\n\n    \n    \n    f=d=>(s=s.slice(1),s[0]<1?f(d+1):s[0]>1?f(d)&f(d):(s=s.replace(/[01]+/,x=>parseInt(x,2)>d||''))[0]>1),a=>f(0,s=0+a)&!s[1]\n\nTry it online!\n\nThe first function called, which is the unnamed arrow function at the end of\nthe code, calls f while using an extra argument to initialise s to the\nprovided string with 0 prepended.\n\nf does the main parsing, removing characters from s as it goes, returning\nfalse on failure. It begins by unconditionally removing one character, which\nis the reason for the prepended 0.\n\nThe first two cases are simple: s[0]<1 (begins with 0) leads to f(d+1), a\nrecursive call with depth increased, and s[0]>1 (begins with 2) leads to\nf(d)&f(d), parsing two subterms.\n\nThe final case covers s beginning with 1, and also s being empty (in which\ncase s[0] is undefined, making both comparisons false). It uses the regexp\n/^[01]+/ to pick out the binary number. The replacer function\n(x=>parseInt(x,2)>d||'') checks whether the number is too high, returning true\nif it is and an empty string otherwise. The function then checks whether the\nremaining string begins with a digit greater than 1; if the number was too\nhigh, it begins with t and that is false. In the case of s being empty, no\nreplacement occurs, and \"\"[0]>1 is also false.\n\nFinally, back in the unnamed arrow function, !s[1] checks whether the whole\nstring was parsed, in which case all but one character will have been removed\nfrom it.\n\nShare\n\nCC BY-SA 4.0\n\nImprove this answer\n\nFollow this answer to receive notifications\n\nanswered Aug 20, 2021 at 11:58\n\nm90m90\n\n10.3k11 gold badge1212 silver badges4545 bronze badges\n\nAdd a comment |\n\nThis answer is useful\n\n2\n\nSave this answer.\n\nShow activity on this post.\n\n# Haskell, 106 bytes\n\n    \n    \n    (y%q)x|2:z<-q=[z|y<x]|w:z<-q=(2*y+w)%z$x|1>0=[] x#(z:y)=[(1+x)#y,1%y$x,x#y>>=(x#)]!!z x#_=[] ([[]]==).(1#)\n\nTry it online!\n\nQuite different from my Haskell + hgl answer, and still decently short, all\nthings being considered. This uses a more bootleg parse than that, but if you\nsquint you can see the similarities.\n\nShare\n\nCC BY-SA 4.0\n\nImprove this answer\n\nFollow this answer to receive notifications\n\nanswered Aug 20, 2021 at 14:50\n\nWheat Wizard\u2666Wheat Wizard\n\n98.7k2121 gold badges278278 silver badges650650 bronze badges\n\nAdd a comment |\n\nThis answer is useful\n\n2\n\nSave this answer.\n\nShow activity on this post.\n\n# Curry (PAKCS), 86 bytes\n\n    \n    \n    d#(0:x)=(d+1)#x d#(1:i++[2])|all(<2)i&&foldl((+).(2*))1 i<=d=1 d#(2:x++y)=d#x*d#y (0#)\n\nTry it online!\n\nReturns 1 for truth, and nothing otherwise.\n\nShare\n\nCC BY-SA 4.0\n\nImprove this answer\n\nFollow this answer to receive notifications\n\nanswered Apr 28, 2022 at 10:54\n\nalephalphaalephalpha\n\n48k77 gold badges6262 silver badges175175 bronze badges\n\nAdd a comment |\n\n##\n\nNot the answer you're looking for? Browse other questions tagged\n\n  * code-golf\n  * string\n  * decision-problem\n  * parsing\n  * lambda-calculus\n\nor ask your own question.\n\nWelcome to Code Golf and Coding Challenges Stack Exchange! This is a site for\nrecreational programming competitions, not general programming questions.\nChallenges must have an objective scoring criterion, and it is highly\nrecommended to first post proposed challenges in the Sandbox.\n\n  * The Overflow Blog\n  * Why configuration is so complicated\n\n  * Featured on Meta\n  * New Focus Styles & Updated Styling for Button Groups\n\n  * Upcoming initiatives on Stack Overflow and across the Stack Exchange network\n\n#### Linked\n\n25\n\nParse a lambda for correctness\n\n#### Related\n\n52\n\nWrite an interpreter for the untyped lambda calculus\n\n24\n\nOptimizing SKI compiler\n\n10\n\nSort a list of numbers on the \u03bb-calculus\n\n9\n\nVisualize Church numerals\n\n5\n\nConvert between Lambda Calculus Notations\n\n22\n\nConvert \u03bb-expressions to SK-expressions\n\n17\n\nWe all know how to SKI, but can you BCKW?\n\n6\n\nOrdered, linear, affine, or relevant?\n\n25\n\nParse a lambda for correctness\n\n#### Hot Network Questions\n\n  * How to politely say that I am not doing extra work after back to the office policies?\n\n  * Folium of Descartes - what is this point P?\n\n  * Quantum error correction references\n\n  * Implies and centered backtick for no implies in a particular commutative diagram using xy package\n\n  * How to deal with an advisor that refuses to accept my evidence for a negative result?\n\n  * Is this Python/Pygame that draws a maze well structured?\n\n  * Why machine worlds?\n\n  * Avoiding throw because we are not sure they will always be caught\n\n  * Is anything other than metals soluble in molten metals/alloys?\n\n  * How can Diethyl Methylphosphonate be reduced into Diethyl Methylphosphonite?\n\n  * How does dependency information impact binary classification in multi-label prediction models?\n\n  * How could hovercraft be made an economically viable option for overland transportation?\n\n  * Is there an infinite number of logic systems?\n\n  * 6-Round Word Search\n\n  * What is the difference between \"more like X than Y\" and \"more like X than like Y\"?\n\n  * How do you iterate through raster bands using model designer in QGIS?\n\n  * Different estimates of Least Squares and Maximum Likelihood Estimates under non-normality\n\n  * What was Silk Spectre II's relationship with superheroics?\n\n  * Mathematica yields repeated solutions when only one exists\n\n  * Is there a formalization of the butterfly effect?\n\n  * How to decode this Notam?\n\n  * Level shift a 0-20 V pulse to +,-10 V without deteriorating the rise time\n\n  * Companies carrying out private investigations and prosecutions\n\n  * How can I enable swipe typing and autocorrect in Juice SSH?\n\nQuestion feed\n\n# Subscribe to RSS\n\n  * Blog\n  * Facebook\n  * Twitter\n  * LinkedIn\n  * Instagram\n\nSite design / logo \u00a9 2024 Stack Exchange Inc; user contributions licensed\nunder CC BY-SA. rev 2024.4.18.7903\n\n## We Care About Your Privacy\n\nWe and our 4 partners store and/or access information on a device, such as\nunique IDs in cookies to process personal data. You may accept or manage your\nchoices by clicking below, including your right to object where legitimate\ninterest is used, or at any time in the privacy policy page. These choices\nwill be signaled to our partners and will not affect browsing data.\n\nCookie Policy.\n\n### We and our partners perform the following based on your settings:\n\nUse precise geolocation data. Actively scan device characteristics for\nidentification. Understand audiences through statistics or combinations of\ndata from different sources. Store and/or access information on a device.\nDevelop and improve services. Create profiles to personalise content. Measure\ncontent performance. Use limited data to select content. Measure advertising\nperformance. Use limited data to select advertising. Create profiles for\npersonalised advertising. Use profiles to select personalised advertising. Use\nprofiles to select personalised content.\n\n## About Your Privacy\n\nWe process your data to deliver content or advertisements and measure the\ndelivery of such content or advertisements to extract insights about our\nwebsite. We share this information with our partners on the basis of consent\nand legitimate interest. You may exercise your right to consent or object to a\nlegitimate interest, based on a specific purpose below or at a partner level\nin the link under each purpose. These choices will be signaled to our vendors\nparticipating in the Transparency and Consent Framework. Cookie Policy\n\n### Manage Consent Preferences\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched\noff in our systems. They are usually only set in response to actions made by\nyou which amount to a request for services, such as setting your privacy\npreferences, logging in or filling in forms. You can set your browser to block\nor alert you about these cookies, but some parts of the site will not then\nwork. These cookies do not store any personally identifiable information.\n\n  * ##### Deliver and present advertising and content 3 partners can use this purpose\n\nlabel\n\nCertain information (like an IP address or device capabilities) is used to\nensure the technical compatibility of the content or advertising, and to\nfacilitate the transmission of the content or ad to your device.\n\n  * ##### Ensure security, prevent and detect fraud, and fix errors 3 partners can use this purpose\n\nlabel\n\nYour data can be used to monitor for and prevent unusual and possibly\nfraudulent activity (for example, regarding advertising, ad clicks by bots),\nand ensure systems and processes work properly and securely. It can also be\nused to correct any problems you, the publisher or the advertiser may\nencounter in the delivery of content and ads and in your interaction with\nthem.\n\n  * ##### Identify devices based on information transmitted automatically 3 partners can use this purpose\n\nlabel\n\nYour device might be distinguished from other devices based on information it\nautomatically sends when accessing the Internet (for instance, the IP address\nof your Internet connection or the type of browser you are using) in support\nof the purposes exposed in this notice.\n\n#### Functional Cookies\n\nThese cookies enable the website to provide enhanced functionality and\npersonalisation. They may be set by us or by third party providers whose\nservices we have added to our pages. If you do not allow these cookies then\nsome or all of these services may not function properly.\n\n  * ##### Use precise geolocation data 2 partners can use this purpose\n\nWith your acceptance, your precise location (within a radius of less than 500\nmetres) may be used in support of the purposes explained in this notice.\n\n  * ##### Link different devices 3 partners can use this purpose\n\nAlways Active\n\nIn support of the purposes explained in this notice, your device might be\nconsidered as likely linked to other devices that belong to you or your\nhousehold (for instance because you are logged in to the same service on both\nyour phone and your computer, or because you may use the same Internet\nconnection on both devices).\n\n#### Performance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure\nand improve the performance of our site. They help us to know which pages are\nthe most and least popular and see how visitors move around the site. All\ninformation these cookies collect is aggregated and therefore anonymous. If\nyou do not allow these cookies we will not know when you have visited our\nsite, and will not be able to monitor its performance.\n\n  * ##### Store and/or access information on a device 4 partners can use this purpose\n\nCookies, device or similar online identifiers (e.g. login-based identifiers,\nrandomly assigned identifiers, network based identifiers) together with other\ninformation (e.g. browser type and information, language, screen size,\nsupported technologies etc.) can be stored or read on your device to recognise\nit each time it connects to an app or to a website, for one or several of the\npurposes presented here.\n\n  * ##### Develop and improve services 3 partners can use this purpose\n\nInformation about your activity on this service, such as your interaction with\nads or content, can be very helpful to improve products and services and to\nbuild new products and services based on user interactions, the type of\naudience, etc. This specific purpose does not include the development or\nimprovement of user profiles and identifiers.\n\n  * ##### Measure content performance 0 partners can use this purpose\n\nInformation regarding which content is presented to you and how you interact\nwith it can be used to determine whether the (non-advertising) content e.g.\nreached its intended audience and matched your interests. For instance,\nwhether you read an article, watch a video, listen to a podcast or look at a\nproduct description, how long you spent on this service and the web pages you\nvisit etc. This is very helpful to understand the relevance of (non-\nadvertising) content that is shown to you.\n\n  * ##### Measure advertising performance 4 partners can use this purpose\n\nInformation regarding which advertising is presented to you and how you\ninteract with it can be used to determine how well an advert has worked for\nyou or other users and whether the goals of the advertising were reached. For\ninstance, whether you saw an ad, whether you clicked on it, whether it led you\nto buy a product or visit a website, etc. This is very helpful to understand\nthe relevance of advertising campaigns.\n\n#### Targeting Cookies\n\nThese cookies are used to make advertising messages more relevant to you and\nmay be set through our site by us or by our advertising partners. They may be\nused to build a profile of your interests and show you relevant advertising on\nour site or on other sites. They do not store directly personal information,\nbut are based on uniquely identifying your browser and internet device.\n\n  * ##### Understand audiences through statistics or combinations of data from different sources 2 partners can use this purpose\n\nReports can be generated based on the combination of data sets (like user\nprofiles, statistics, market research, analytics data) regarding your\ninteractions and those of other users with advertising or (non-advertising)\ncontent to identify common characteristics (for instance, to determine which\ntarget audiences are more receptive to an ad campaign or to certain contents).\n\n  * ##### Create profiles to personalise content 1 partners can use this purpose\n\nInformation about your activity on this service (for instance, forms you\nsubmit, non-advertising content you look at) can be stored and combined with\nother information about you (such as your previous activity on this service or\nother websites or apps) or similar users. This is then used to build or\nimprove a profile about you (which might for example include possible\ninterests and personal aspects). Your profile can be used (also later) to\npresent content that appears more relevant based on your possible interests,\nsuch as by adapting the order in which content is shown to you, so that it is\neven easier for you to find content that matches your interests.\n\n  * ##### Use limited data to select advertising 4 partners can use this purpose\n\nAdvertising presented to you on this service can be based on limited data,\nsuch as the website or app you are using, your non-precise location, your\ndevice type or which content you are (or have been) interacting with (for\nexample, to limit the number of times an ad is presented to you).\n\n  * ##### Create profiles for personalised advertising 3 partners can use this purpose\n\nInformation about your activity on this service (such as forms you submit,\ncontent you look at) can be stored and combined with other information about\nyou (for example, information from your previous activity on this service and\nother websites or apps) or similar users. This is then used to build or\nimprove a profile about you (that might include possible interests and\npersonal aspects). Your profile can be used (also later) to present\nadvertising that appears more relevant based on your possible interests by\nthis and other entities.\n\n  * ##### Use profiles to select personalised advertising 4 partners can use this purpose\n\nAdvertising presented to you on this service can be based on your advertising\nprofiles, which can reflect your activity on this service or other websites or\napps (like the forms you submit, content you look at), possible interests and\npersonal aspects.\n\n  * ##### Use profiles to select personalised content 1 partners can use this purpose\n\nContent presented to you on this service can be based on your content\npersonalisation profiles, which can reflect your activity on this or other\nservices (for instance, the forms you submit, content you look at), possible\ninterests and personal aspects, such as by adapting the order in which content\nis shown to you, so that it is even easier for you to find (non-advertising)\ncontent that matches your interests.\n\n### Cookie List\n\nlabel\n\nConsent Leg.Interest\n\nlabel\n\nlabel\n\nlabel\n\n", "frontpage": false}
