{"aid": "40210774", "title": "Traefik 3.0 GA Has Landed", "url": "https://traefik.io/blog/traefik-3-0-ga-has-landed-heres-how-to-migrate/", "domain": "traefik.io", "votes": 8, "user": "emilevauge", "posted_at": "2024-04-30 13:29:19", "comments": 0, "source_title": "Traefik 3.0 GA Has Landed: Here's How to Migrate", "source_text": "Traefik 3.0 GA Has Landed: Here's How to Migrate\n\nContact UsGet a Demo\n\nProducts\n\nTraefik EnterpriseTraefik Hub\n\nOpen Source\n\nTraefik ProxyTraefik Mesh\n\nSolutions\n\nAPI ManagementAPI GatewayKubernetes IngressDocker Swarm Ingress\n\nLearn\n\nBlogResource LibraryTraefik AcademySuccess\nStoriesGlossaryEventsDocsCommunityForumCommunity Voices\n\nPricing\n\nGet in Touch\n\nBlog\n\n# Traefik 3.0 GA Has Landed: Here's How to Migrate\n\nEmile Vauge\n\n\u00b7\n\nProduct News\n\n\u00b7\n\nIngress\n\n\u00b7\n\nApplication Proxy\n\n\u00b7\n\nApril 30, 2024\n\nThis year will mark the 9th anniversary of Traefik. Back in 2015, while I was\nwriting the first lines of code for a cloud native reverse proxy, I couldn\u2019t\nimagine how big this would go. From a side project, Traefik became one of the\nmost deployed modern gateways on earth, with more than 3 billion downloads and\n750+ contributors. It is ranked in the Top 15 on DockerHub and has 47,000\nGitHub stars. Insane.\n\nTraefik 1.0 was released in 2016. Three years later, Traefik 2.0 was born.\nToday, after 5 years of development, the wait is finally over! We are proud to\nannounce that Traefik 3.0 is generally available \ud83c\udf89\n\nThis major release is a huge step forward in the cloud native world, adding\nsupport for the latest technologies like WASM, OpenTelemetry, Kubernetes\nGateway API, and SPIFFE.\n\nAfter many years of effort, the changelog is pretty wild, with more than 200\npull requests merged, each coming with new features. The list of new\npossibilities is so big that we want to provide a series of blog posts, each\ndeep diving into one feature.\n\nToday\u2019s article will focus on the beginning, the elephant in the room \ud83e\udd41\ud83e\udd41\ud83e\udd41: the\nmigration.\n\n## Migration Under Control\n\nA new major version is always something eagerly awaited: new design, new\nfeatures, better user experience ... But the counterpart is usually the\nmigration aspect. A major version often means breaking changes, but that\nshouldn\u2019t imply a painful migration experience, and with Traefik v3 it\ndoesn\u2019t.\n\nWith Traefik v3, we are introducing a streamlined transition process from v2.\nAs a reminder, Traefik has 2 kinds of configurations:\n\n  * the static configuration which is loaded when Traefik starts up and manages global options\n  * the dynamic configuration can be updated while Traefik is running and contains all the routing information\n\nMinimal breaking changes have been made on specific options on the static\nconfiguration, and we are ensuring backward compatibility with v2 syntax on\nthe dynamic configuration. This will offer a gradual path for adopting the v3\nsyntax, allowing users to progressively migrate their Kubernetes ingress\nresources, Docker labels, etc. to the new format.\n\nLet\u2019s deep dive into the migration path with a typical use case: you have to\nmigrate 100 Traefik instances from v2.11 to v3.0 in Kubernetes.\n\n### Step 1: Prepare and Test\n\nThe first thing to do is to identify how your static configuration is impacted\nby the changes made in v3. The breaking changes are minimal and target very\nspecific options, in 90% of use cases, this process should take a couple\nminutes only. As an example, Docker and Swarm are now 2 providers, HTTP/3 is\nno longer an experimental option, Rancher v1 has been dropped as the project\nis no longer being actively maintained, etc. Please refer to the static\nconfiguration section of the migration documentation, as well as the\noperations section, to get the full list and prepare your new v3 static\nconfiguration.\n\nWhen you are ready to test it, start Traefik v3 with this new configuration.\nIf you don\u2019t get any error log, you are good to go! Otherwise, no problem, the\nremaining migration options are highlighted in the logs, you can simply apply\nthem.\n\nOnce your Traefik test instances are starting and routing to your\napplications, you can move to the next step.\n\n### Step 2: Rolling Update\n\nNow that you have tested your updated static configuration, it is time to\nprogressively migrate your production instances to Traefik v3. Use the\nKubernetes rolling update mechanism to incrementally replace the current Pods\nwith new ones.\n\n\u26a0\ufe0f Before triggering any change on your production, ensure you to have a\nworking real time monitoring solution on your ingress traffic that will allow\nyou to instantly detect any issue. Traefik provides support for many\nobservability solutions.\n\nWhile the rolling update is in progress, constantly monitor your ingress\ntraffic looking for unexpected (and unusual) errors, and be prepared to\nrollback to a working state. Then, leverage debug and access logs provided by\nTraefik to understand and fix the issue before upgrading again. In case you're\nnot sure, jump onto the community forum.\n\nOnce every pod is updated, congratulations, you are now on Traefik v3!\n\nYou can move to the last step.\n\n### Step 3: Progressive Ingresses Update\n\nNow that you run Traefik v3, start migrating your ingress resources to the new\nformat.\n\n\ud83d\udccd Keep in mind that this step can be done later, as Traefik v3 is compatible\nwith the v2 format for dynamic configuration. But of course, you can start\nusing new features right away in new ingresses, and migrate older ingresses\nlater.\n\nThe dynamic configuration in v3 has undergone a few changes. For example, the\nRouter Rule Matchers have an updated syntax, the Kubernetes Ingress API Group\nhas been changed, and the TCP LoadBalancer terminationDelay option has been\nremoved. The full list can be found in the dynamic configuration section of\nthe migration documentation.\n\nProgressively test & update each ingress resource and check that the ingress\ntraffic is not impacted. Once a v3 ingress resource migration is validated,\nyou can delete the v2 ingress resource and deploy the v3 version. Repeat those\nsteps for every ingress resource.\n\n## Et voil\u00e0!\n\nYou are now fully migrated to Traefik v3 \ud83c\udf89! And you did this progressively,\nkeeping control during the whole process, with the option to rollback any\nchange at any time.\n\nThis example with Kubernetes can be transposed to any orchestrator or\nenvironment, the process stays the same.\n\nIn the coming weeks, we will continue this series, and release deep dive\narticles on WASM support (and Coraza Web Application Firewall plugin),\nOpenTelemetry, SPIFFE/Tailscale/HTTP/3, and Kubernetes Gateway API.\n\nUltimately, I'd like to express immense gratitude to all contributors. Your\nsupport is incredibly valuable.\n\nTo learn more about v3, register for the Traefik v3 Online Meetup that will\ntake place on May 15th.\n\nSee you on GitHub!\n\n## Useful Links\n\n  * Traefik 3.0 on GitHub & on DockerHub\n  * Traefik Documentation, Website, & GitHub\n  * Our Community Forum\n\nShare\n\nRelated Posts\n\n## Traefik Proxy 2.4 Adds Advanced mTLS, Kubernetes Service APIs, and More\n\nManuel Zapf\n\n\u00b7\n\nProduct News\n\n\u00b7\n\nJanuary, 2021\n\nTraefik 2.4 adds many nice enhancements such as ProxyProtocol Support on TCP\nServices, Advanced support for mTLS, Initial support for Kubernetes Service\nAPI, and more than 12 enhancements from our beloved community.\n\nRead more\n\n## Traefik Labs and HashiCorp Extends Partnership With Integration of Traefik\nProxy and Consul Connect\n\nTraefik Labs\n\n\u00b7\n\nPartners\n\n\u00b7\n\nAugust, 2021\n\nAfter months of close collaboration, we are pleased to announce a formalized\npartnership with HashiCorp.\n\nRead more\n\n## Announcing Traefik Proxy 2.5\n\nRyan McGuire\n\n\u00b7\n\nProduct News\n\n\u00b7\n\nAugust, 2021\n\nWe are very happy to announce the general release of Traefik Proxy 2.5: the\nlatest model of our capable, open-source, dynamic, cloud-native edge router,\nand application proxy.\n\nRead more\n\nTraefik Labs \u2022 Copyright \u00a9 2016-2024\n\nPrivacy PolicyEULA\n\nTraefik Labs uses cookies to improve your experience. By continuing to browse\nthe site you are agreeing to our use of cookies. Find out more in the Cookie\nPolicy.\n\n", "frontpage": false}
