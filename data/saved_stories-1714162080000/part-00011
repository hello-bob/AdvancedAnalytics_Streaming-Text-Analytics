{"aid": "40167988", "title": "Show HN: Immutable disk mirror so simple that unborkable", "url": "https://github.com/nathants/mirror", "domain": "github.com/nathants", "votes": 1, "user": "nathants", "posted_at": "2024-04-26 11:17:58", "comments": 0, "source_title": "GitHub - nathants/mirror: immutable disk mirror so simple that unborkable", "source_text": "GitHub - nathants/mirror: immutable disk mirror so simple that unborkable\n\nSkip to content\n\n## Navigation Menu\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nnathants / mirror Public\n\n  * Notifications\n  * Fork 0\n  * Star 0\n\nimmutable disk mirror so simple that unborkable\n\nnathants.com/projects/mirror\n\n### License\n\nMIT license\n\n0 stars 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# nathants/mirror\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n0 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\nnathantslinks should workApr 26, 202460c8d2d \u00b7 Apr 26, 2024Apr 26, 2024\n\n## History\n\n19 Commits  \n  \n### bin\n\n|\n\n### bin\n\n| remove absolute paths| Apr 26, 2024  \n  \n### cmd\n\n|\n\n### cmd\n\n| print total runtime at end of repair| Apr 26, 2024  \n  \n### lib\n\n|\n\n### lib\n\n| cleanup| Apr 26, 2024  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| all done| Apr 22, 2024  \n  \n### go.mod\n\n|\n\n### go.mod\n\n| scaffold the rest of the scripts| Apr 21, 2024  \n  \n### go.sum\n\n|\n\n### go.sum\n\n| scaffold the rest of the scripts| Apr 21, 2024  \n  \n### license.txt\n\n|\n\n### license.txt\n\n| license and readme| Apr 26, 2024  \n  \n### readme.md\n\n|\n\n### readme.md\n\n| links should work| Apr 26, 2024  \n  \n## Repository files navigation\n\n# mirror\n\n## why\n\ns3 is the safest place to store immutable data, but it's expensive to fetch\nthat data due to egress bandwidth fees of $0.10/GB.\n\nwe need something local to mirror that s3 data, that is equally safe, and free\nto access.\n\nzfs is too complex. raid doesn't protect against bitrot. we need something\nsimpler. something unborkable.\n\n## how\n\non a linux system, several spinning rust disks form a local mirror using ext4\nand cryptsetup.\n\nwrite immutable data to any of them, then mirror it to all of them.\n\nperiodically run repair, which detects bitrot and repairs the data from any\nother disk that has an uncorrupted copy.\n\nuse a minimum of 2 disks. 3 is better. 4+ is fine for extreme durability.\n\n## what\n\nmirror_format.sh - interactively select a disk to reformat with ext4 and\nencrypt with cryptsetup.\n\nmirror-mount - unlock and mount all drives listed in ~/.mirror by disk\nidentifier.\n\nmirror-ensure-copies - scan each drive, then checksum and copy files as\nneeded.\n\nmirror-repair-copies - scan each drive, look for checksum mismatches, repair\nthem from valid data if possible.\n\nmirror-lock - makes all files and directories read only, only needed if you\nunlocked.\n\nmirror-unlock - unlock all files and directories in case you need to make\ndeletions.\n\n## notes\n\nonly files, directories, and symlinks are supported.\n\nonly immutable data should go in the mirror. make copies instead of mutations.\nmutations will trigger repair.\n\nwhen repairing, corrupted files are renamed and not overwritten. they can be\ninspected later.\n\nlinux only. might work on macos or windows with modifications.\n\n## About\n\nimmutable disk mirror so simple that unborkable\n\nnathants.com/projects/mirror\n\n### Resources\n\nReadme\n\n### License\n\nMIT license\n\nActivity\n\n### Stars\n\n0 stars\n\n### Watchers\n\n1 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Languages\n\n  * Go 80.3%\n  * Shell 19.7%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
