{"aid": "40091604", "title": "GPUs Acceleration of the Adaptive Loop Filter for the H.266 Software Decoder", "url": "https://www.qualcomm.com/developer/blog/2024/04/offload-tough-workloads-to-adreno-gpus--acceleration-of-the-adap", "domain": "qualcomm.com", "votes": 3, "user": "ksec", "posted_at": "2024-04-19 20:31:15", "comments": 0, "source_title": "Offload Tough Workloads to Adreno GPUs: Acceleration of the Adaptive Loop Filter for the H.266/VVC Software Decoder on Snapdragon Mobile Platforms", "source_text": "Adaptive Loop Filter Adreno GPU\n\nEnable accessibility\n\nBack to All\n\nDeveloper Blog\n\nOffload Tough Workloads to Adreno GPUs: Acceleration of the Adaptive Loop\nFilter for the H.266/VVC Software Decoder on Snapdragon Mobile Platforms\n\nWritten by\n\nHongqiang Wang\n\nApr 15, 2024\n\nThe latest state-of-the-art video compression standard, H.266, also known as\nVersatile Video Coding (VVC), is poised for widespread adoption across various\napplications and devices. It can enable users to efficiently stream high-\nquality videos, engage in video calls, and enjoy immersive content at a level\nof fidelity and efficiency unmatched by other codecs.\n\nStandard\u2019s initial dependence on software-based VVC decoders helps bridge the\ngap of hardware and dedicated accelerator-based decoder availability. However,\nachieving a high-quality and performant software decoder for mobile devices\n(e.g., rendering 4K content at 60fps on premium Android smartphones) poses\nsignificant challenges due to VVC\u2019s enormous computational requirements.\n\nThe Qualcomm\u00ae AdrenoTM GPU has evolved beyond mere graphics acceleration.\nAdreno GPUs lead the industry in performance and energy efficiency metrics,\nthanks to their advanced architecture, low clock rates, and sophisticated\npower management. They now serve as versatile compute engines, and enable a\nwide range of applications, including:\n\n  * Image/video processing\n  * Physics simulations\n  * Machine learning\n  * GenAI/large language model workloads\n\nThis blog introduces offloading the Adaptive Loop Filter (ALF), one of the\nmost demanding modules in VVC, onto Adreno GPUs via OpenCL. With the help of\nAdreno, a software-based VVC decoder can achieve real-time 4K decoding\nperformance at 60fps on the Snapdragon\u00ae 8 Gen 2 Mobile Platform.\n\nRefer to this white paper for more in-depth technical insights.\n\n### Unleash the Parallel Computing Power of Adreno GPUs on Snapdragon Mobile\nPlatforms with OpenCL\n\nOpenCL, an industry-standard framework for parallel programming across\nheterogeneous computing platforms, can unlock the compute capability of\nheterogeneous mobile devices, including Snapdragon mobile platforms. OpenCL\nfully harnesses the power of Adreno GPUs, enabling efficient and high-\nperformance computation across various mobile applications. Below are some\nnotable aspects and facts around OpenCL and Adreno:\n\n1\\. Adreno GPUs and OpenCL 3.0:\n\n  * Adreno GPUs fully support the latest OpenCL 3.0 API, including many optional features through Khronos\u2019 KHR/EXT extensions.\n  * Qualcomm Technologies has actively participated in the Khronos OpenCL standardization process since its inception and remains committed to OpenCL.\n\n2\\. Innovation and Vendor Extensions:\n\n  * We continue to innovate and contribute to OpenCL development.\n  * Besides supporting various KHR/EXT OpenCL extensions, Qualcomm Technologies has introduced powerful vendor extensions.\n  * Notably, features like the Recordable Command Queue and on-chip global memory, significantly enhance the processing efficiency and boost power savings for many workloads, such as frame-based video processing.\n\nA key advantage of the Adreno GPU is its unified memory architecture, where\nthe CPU and GPU share a single address space. This eliminates data transfer\nbottlenecks, allowing compute tasks like the ALF to operate directly on the\nshared memory without memory transfers. For more details, consult the OpenCL\nProgramming guide and the Adreno OpenCL SDK examples.\n\n### Why Offload the ALF to the GPU?\n\nGPUs excel in scenarios involving massive data input, high parallelism, and\ntolerance for latency. This includes machine learning tasks involving\nextensive convolutions, matrix multiplications, and signal processing (such as\nFFT, filtering, and denoising).\n\nHowever, ALF is not inherently the best fit for GPU parallel processing. ALF\nfaces challenges due to divergences from factors like location classes, block\ncategorizations, and diamond-shaped filters. Despite this, ALF remains one of\nthe more intuitive blocks that can be offloaded to the GPU, compared to many\nother blocks in VVC. However, this doesn\u2019t preclude other blocks, such as\nintra-block decoding, from benefiting from GPU acceleration. In fact, multiple\nblocks have already been offloaded to the GPU within the decoder.\n\nFor deeper insights, refer to this whitepaper, which covers workload\npartitioning, overhead handling between CPU and GPU synchronization, and other\ncritical design decisions.\n\n### How to Squeeze the Best Performance out of Adreno GPUs\n\nOpenCL code is generally portable across different vendors and generations of\nGPU with consistent versions and features. However, its performance is\nimplementation-dependent, as it relies heavily on the underlying architecture\nand hardware.\n\nThis white paper focuses on ALF optimizations to achieve peak performance with\nthe Adreno GPU in the Snapdragon 8 Gen 2 Mobile Platform. The white paper\nprovides a holistic view including an algorithmic perspective, understanding\ndata flow, and examining the precision sensitivity at each stage. The white\npaper serves as a valuable illustration for offloading and optimizing complex\nOpenCL use cases.\n\n### Summary\n\nThe success of offloading ALF onto Adreno demonstrates the application of the\nAdreno GPU for general purpose use cases, in addition to traditional graphics\nrendering. To learn more about OpenCL optimization for Adreno, refer to the\nOpenCL programming guide and best practices on Adreno GPUs.\n\nAcknowledgement\n\n  * This achievement is the result of a collaborative effort between the Qualcomm Technologies GPU team and Tencent\u2019s VVC team.\n  * Qualcomm GPU Research Team: Jeng-Hau Lin\n  * Tencent Media Lab: Xuerui Ma, Yu Guo, Tong Ouyang, Yuchen Li, Yiming Li\n\nAdrenoGPU\n\nOpinions expressed in the content posted here are the personal opinions of the\noriginal authors, and do not necessarily reflect those of Qualcomm\nIncorporated or its subsidiaries (\"Qualcomm\"). The content is provided for\ninformational purposes only and is not meant to be an endorsement or\nrepresentation by Qualcomm or any other party. This site may also provide\nlinks or references to non-Qualcomm sites and resources. Qualcomm makes no\nrepresentations, warranties, or other commitments whatsoever about any non-\nQualcomm sites or third-party resources that may be referenced, accessible\nfrom, or linked to this site.\n\nSnapdragon and Qualcomm Adreno are products of Qualcomm Technologies, Inc.\nand/or its subsidiaries.\n\nRelated blog posts:\n\nhttps://developer.qualcomm.com/blog/opencl-optimization-stop-leaving-compute-\ncycles-table\n\nhttps://developer.qualcomm.com/blog/opencl-optimization-accelerating-epsilon-\nfilter-adreno-gpu\n\nhttps://developer.qualcomm.com/blog/opencl-optimization-accelerating-sobel-\nfilter-adreno-gpu\n\nhttps://developer.qualcomm.com/blog/matrix-multiply-adreno-gpus-part-1-opencl-\noptimization\n\nhttps://developer.qualcomm.com/blog/matrix-multiply-adreno-gpus-part-2-host-\ncode-and-kernel\n\nAbout the Authors\n\nHongqiang WangPrincipal Engineer/Manager\n\nRead More\n\nRelated Articles\n\nDeveloper Blog\n\nBig performance boost for llama.cpp and chatglm.cpp with Windows on Snapdragon\n\nApr 12\n\nAIMachine LearningWindows on Snapdragon\n\nDeveloper Blog\n\nAccelerating Progress: Qualcomm AI Research Makes Code Available for Top\nPapers\n\nMar 25\n\nAIMachine Learning\n\nDeveloper Blog\n\nGPU Motion Estimation: Improved Handling of Repeating Patterns\n\nMar 18\n\nXRAdrenoGPU\n\nDeveloper Blog\n\nHigh-Order Filtering and Block Matching: New Image Processing Extension for\nVulkan Optimizes Performance and Power Usage\n\nFeb 10\n\nVulkanRenderingAdreno\n\nDeveloper Blog\n\nHow to Quadruple LLM Decoding Performance with Speculative Decoding (SpD) and\nMicroscaling (MX) Formats on Qualcomm\u00ae Cloud AI 100\n\nMar 7\n\nAIMachine LearningCloud\n\nDeveloper Blog\n\nBig performance boost for llama.cpp and chatglm.cpp with Windows on Snapdragon\n\nApr 12\n\nAIMachine LearningWindows on Snapdragon\n\nDeveloper Blog\n\nAccelerating Progress: Qualcomm AI Research Makes Code Available for Top\nPapers\n\nMar 25\n\nAIMachine Learning\n\nDeveloper Blog\n\nGPU Motion Estimation: Improved Handling of Repeating Patterns\n\nMar 18\n\nXRAdrenoGPU\n\nDeveloper Blog\n\nHigh-Order Filtering and Block Matching: New Image Processing Extension for\nVulkan Optimizes Performance and Power Usage\n\nFeb 10\n\nVulkanRenderingAdreno\n\nDeveloper Blog\n\nHow to Quadruple LLM Decoding Performance with Speculative Decoding (SpD) and\nMicroscaling (MX) Formats on Qualcomm\u00ae Cloud AI 100\n\nMar 7\n\nAIMachine LearningCloud\n\nQualcomm is enabling a world where everyone and everything can be\nintelligently connected. We are efficiently scaling the technologies that\nlaunched the mobile revolution to the next generation of connected smart\ndevices.\n\n## Stay connected\n\nGet the latest Qualcomm and industry information delivered to your inbox.\n\nSubscribe\n\nManage your subscription\n\nAlso of Interest\n\n  * X Elite Laptops and PCs\n  * IoT Solutions for Smart Appliances\n  * A New Era of Possibility with On-Device AI\n\n### Languages\n\n  * English ( United States )\n  * \u7b80\u4f53\u4e2d\u6587 ( China )\n\n\u00a9 Qualcomm Technologies, Inc. and/or its affiliated companies.\n\nSnapdragon and Qualcomm branded products are products of Qualcomm\nTechnologies, Inc. and/or its subsidiaries. Qualcomm patented technologies are\nlicensed by Qualcomm Incorporated.\n\nNote: Certain services and materials may require you to accept additional\nterms and conditions before accessing or using those items.\n\nReferences to \"Qualcomm\" may mean Qualcomm Incorporated, or subsidiaries or\nbusiness units within the Qualcomm corporate structure, as applicable.\n\nQualcomm Incorporated includes our licensing business, QTL, and the vast\nmajority of our patent portfolio. Qualcomm Technologies, Inc., a subsidiary of\nQualcomm Incorporated, operates, along with its subsidiaries, substantially\nall of our engineering, research and development functions, and substantially\nall of our products and services businesses, including our QCT semiconductor\nbusiness.\n\nMaterials that are as of a specific date, including but not limited to press\nreleases, presentations, blog posts and webcasts, may have been superseded by\nsubsequent events or disclosures.\n\nNothing in these materials is an offer to sell or license any of the services\nor materials referenced herein.\n\n## Qualcomm Cookies\n\nQualcomm website uses cookies and similar technologies to enhance site\nnavigation, for site analytics, and to show you content tailored to your\ninterests. You can find more details on our Privacy Policy. By clicking\n\u201cAccept All Cookies,\u201d you agree to our use of cookies and similar technologies\naccordingly.\n\nBy clicking the \"Reject All Non-Necessary Cookies\" link in the upper-right\ncorner, you agree to continue to view our website without accepting cookies\nthat are not necessary for the website to function.\n\nYour Opt Out Preference Signal is Honored\n\n## Privacy Preference Center\n\nWe respect your privacy right and preference. Please select and accept your\npreference as described below. You can click on the different category\nheadings to learn more about each option. Blocking some types of cookies may\nimpact your experience of our website and the services we may be able to\noffer. For more details, please click our Privacy Policy.\n\n### Manage Consent Preferences\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched\noff in our systems. They are usually only set in response to actions made by\nyou which amount to a request for services, such as setting your privacy\npreferences, logging in or filling in forms. You can set your browser to block\nor alert you about these cookies, but some parts of the site will not then\nwork.\n\n#### Performance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure\nand improve the performance of our site. They help us to know which pages are\nthe most and least popular and see how visitors move around the site. If you\ndo not allow these cookies we will not know when you have visited our site,\nand will not be able to monitor its performance.\n\n#### Functional Cookies\n\nThese cookies enable the website to provide enhanced functionality and\npersonalisation. They may be set by us or by third party providers whose\nservices we have added to our pages. If you do not allow these cookies then\nsome or all of these services may not function properly.\n\n#### Targeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They\nmay be used by those companies to build a profile of your interests and show\nyou relevant adverts on other sites. If you do not allow these cookies, you\nwill experience less targeted advertising.\n\n### Cookie List\n\nlabel\n\nConsent Leg.Interest\n\nlabel\n\nlabel\n\nlabel\n\n", "frontpage": false}
