{"aid": "40216323", "title": "Virtual Power Plants and Software", "url": "https://stephendeyoung.substack.com/p/virtual-power-plants-and-software", "domain": "stephendeyoung.substack.com", "votes": 2, "user": "stephendeyoung", "posted_at": "2024-04-30 21:04:33", "comments": 0, "source_title": "Virtual Power Plants and software", "source_text": "Virtual Power Plants and software - by Stephen Young\n\n# Software and the energy transition\n\nShare this post\n\n#### Virtual Power Plants and software\n\nstephendeyoung.substack.com\n\n# Virtual Power Plants and software\n\nStephen Young\n\nApr 29, 2024\n\nShare this post\n\n#### Virtual Power Plants and software\n\nstephendeyoung.substack.com\n\nShare\n\nThe electricity grid is constantly in flux. Demand rises and falls according\nto the rhythm of daily life. The grid must always be able to meet this demand\notherwise blackouts can occur. Particularly troublesome are instances of very\nhigh demand such as a heatwave causing millions of air conditioning units to\nbe switched on. Currently these peaks are often met through burning fossil\nfuels in a gas or oil-based power plant.\n\nVirtual Power Plants (VPPs) reduce the need for these \u201cpeaker\u201d plants by\naggregating distributed energy resources (DERs). DERs such as rooftop solar,\nhome/office batteries, EVs and chargers, smart home devices and electric water\nheaters, are being installed at greater and greater rates. In the US the DER\nmarket is expected to double by 2027 with 262 gigawatts of additional capacity\ninstalled1 (enough to power 750,000 American homes). These DERs can help the\ngrid by reducing or meeting demand through remote control. This avoids having\nto burn dirty fuels during peak loads.\n\nDERs can also reduce the need for additional electricity grid transmission and\ndistribution. We need to \u201celectrify everything\u201d to meet our climate goals.\nThis will require the grid to bring on more and more sources of generation and\nincrease the transmission and distribution infrastructure (pylons, overhead\nlines and substations). DERs require fewer infrastructure upgrades through\ngreater efficiency - devices can be smart about when to consume electricity\nand when to provide it to the grid.\n\nBy aggregating DERs, VPPs provide a more predictable and easily managed way of\nhelping the grid stay balanced. In the US around 60 gigawatts of VPPs could\nadd $20 billion in societal benefits over a 10-year period. This includes\ncarbon emission reductions, energy resilience, and transmission and\ndistribution infrastructure deferral2.\n\n\u00a9 Peter Varga| Dreamstime.com\n\nSoftware is at the heart of a VPP. A distributed energy resource management\nsystem (DERMS) is needed to control the DERs (often in the cloud). Other\nsystems calculate the capacity of the VPP and bid into electricity markets.\nBefore getting into the software we need to understand the basic principles of\na VPP.\n\n##\n\nHow do VPPs work?\n\nVPPs aggregate DERs by enrolling customers in a program. There are currently\nthree models3:\n\n>   1. Utilities directly enrol customers by using existing DERs or offering\n> DER purchase enticements e.g. Green Mountain Power\u2019s battery VPP and Duke\n> Energy\u2019s managed EV charging VPP.\n>\n>   2. Manufacturer or retailers of DERs enrol customers in a VPP e.g. Tesla,\n> Ford, GM, Sunrun, Sunnova\n>\n>   3. VPP Platform company enrols customers from a variety of different DER\n> products e.g. Voltus, AutoGrid, and Leap, for example, recruit participants,\n> directly or via partnerships, with a variety of DERs in residential and non-\n> residential settings.\n>\n>\n\nBy aggregating these DERs the VPP can offer services like a normal power plant\nsuch as delivering electricity to the grid, demand reduction and ancillary\nservices (which help maintain grid health). These services are sold to the\ngrid and customers enrolled in a VPP make money from having their devices\ncontrolled by it. The VPP will often bid into an electricity market to offer\ndemand reduction at a particular price. It knows its available capacity by\nusing historical data from its DERs and forecasting algorithms.\n\n##\n\nVPP Software Platform\n\nThese are the main components of a VPP software platform:\n\n  1. A system to enrol customers in the VPP\n\n  2. A system that receives telemetry from the DERs and can control them (DERMS)\n\n  3. A system that predicts the capacity of the VPP and bids into the grid operator\u2019s electricity market\n\n  4. A system that can receive requests to reduce load etc\n\nThis diagram gives an overview of a hypothetical microservices architecture\nfor a VPP:\n\n##\n\nCase studies\n\n###\n\nTesla\n\nTesla\u2019s Powerwall batteries are wifi-connected devices that can power homes.\nIn 2022 Tesla\u2019s VPP had enrolled over 4500 of these devices and was able to\ncontribute 33 MW of electricity during peak load events in California4 (enough\nto power hundreds of homes for a year). Tesla uses a software stack including\nScala, Akka, Kafka and gRPC APIs to provide its VPP. In 2020 Tesla engineers\ngave a talk at QCon London that described their VPP architecture (all images\nare taken from the presentation)5:\n\n####\n\nDERMS\n\nTesla\u2019s Powerwall devices connect to a cloud platform via websockets.\nCustomers voluntarily enrol their devices in the VPP program, and the system\nrepresents the state of each device using Akka actors. These actors are\norganised into parent actors that aggregate multiple devices. The data flow\nwithin the system is as follows:\n\n  * Websocket message telemetry is sent to Kafka\n\n  * Akka Streams services read these messages from Kafka.\n\n  * The Akka actors, which reside in Kubernetes pods, receive these messages.\n\n  * If a pod fails or scales, actor rebalancing occurs.\n\n  * The actors receive state refreshes from new messages sent by the devices.\n\n  * gRPC APIs enable querying the cluster to retrieve individual or aggregated telemetry data.\n\nThe control service, implemented using Akka Streams, resolves all devices\nthrough the assets service, reads relevant battery telemetry, and plans the\ndischarge of batteries to meet the required capacity. This planning ensures\nefficient battery usage by avoiding discharging batteries that are already\nlow, and it communicates these discharge requirements and timeframes to each\nbattery.\n\n####\n\nAutobidder\n\nTesla's Autobidder is a workflow orchestration system integrated into the VPP\nthat uses market data to forecast VPP energy capacity and make bids into\nelectricity markets based on price predictions. The forecasting and\noptimization services are primarily written in Python, while the rest of the\nsystem is implemented in Scala. The Autobidder system employs co-optimization\nstrategies to meet both global and local objectives. For example, the grid may\nrequire battery discharge due to a peak event, while customers may want their\nbatteries fully charged due to an incoming storm. Using the same Akka\narchitecture as the DERMS, Autobidder pushes price forecasts to devices\nthrough the control service. The devices then develop a plan for battery\nbalancing that considers both local and global objectives. This plan is pushed\nback up the telemetry architecture, with aggregations at each node. Autobidder\nutilizes this aggregate information to determine its bidding strategy. If a\ndevice loses connectivity, it continues to make plans based on the best\nestimate of the global objective. After a certain period offline, the device\nswitches to local optimization only to maintain efficient operation.\n\n###\n\nLunar Gridshare\n\nLunar Gridshare provides a VPP by connecting third party devices to its\nplatform. It is \u201cconnected to 77,000 residential devices across Europe, Japan,\nand the United States, representing 290 megawatts of power and 725 megawatt-\nhours of energy capacity. This is enough to power 578,000 average US homes for\none hour.\u201d6\n\nThe platform is built using a number of AWS services including:\n\n  * AWS IoT - manages the third party devices enrolled in the VPP and sends data to the cloud via MQTT (a lightweight messaging protocol)\n\n  * AWS Kinesis - device telemetry is pushed onto Kinesis message queues to be consumed downstream\n\n  * AWS Step Functions - coordinates AWS Lambdas to make forecasts and control the device fleet\n\nAWS have a more detailed write-up of the Gridshare platform and architecture.\n\n###\n\nVirtual Peaker\n\nVirtual Peaker has partnered with various utilities in the US to provide a\nVPP. Their platform aggregates third party smart thermostats, smart water\nheaters, EV chargers and batteries. In a partnership with the Pacific Gas &\nElectric Company in California, they aggregated 525 batteries into a VPP from\nvarious providers including Tesla and Sonnen7:\n\n##\n\nThe future for VPPs\n\nThe capacity of VPPs is still very small compared with the rest of the\nelectricity grid. To reduce our reliance on fossil fuel peaker plants and help\nthe grid cope with an increase in electricity demand, we need to unblock the\ndevelopment of VPPs in the following ways:\n\n###\n\nStandardisation\n\nCommunication protocols across DERs and VPP platforms are fragmented. This\nmakes it complex and costly to manage DERs for utilities and platform\nproviders. Regulators could mandate that DER manufacturers use open source\nAPIs or standards that make it easier to integrate them into third-party\nplatforms. The underlying technologies of VPPs also lack consistent standards.\nProviders all implement telemetry collection and DER interconnection in\ndifferent ways.\n\nA number of working groups have been established to solve this fragmentation.\nOpenADR8 standardises the message format used when the grid needs to reduce\ndemand automatically and for managing DERs. This simplifies data exchange\nbetween grid entities (utilities, grid operators and energy control systems).\nThe Open Vehicle Grid Interface Protocol (OVGIP)9 provides a common\ncommunication protocol between EVs and the grid. Matter10 is an open source\nconnectivity standard for smart home devices.\n\nThere is also a lack of standardisation around DER and VPP modelling and\nforecasting tools. Utilities often perceive VPPs as less reliable than\ntraditional assets because of wide variation in these methods. Open source\ntooling would help increase VPP adoption.\n\n###\n\nVirtualisation innovation\n\nAs we electrify everything and grid infrastructure is upgraded, increasing\ngeneration, transmission and substation capacity is only one way of achieving\nthese upgrades. An alternative is to allow the market to bid on these\nenhancements which could involve virtual upgrades. In a conversation between\nDuncan Campbell and David Roberts on the Volts podcast11, an example is given\nof insulating houses rather than upgrading a transformer:\n\n> If I go to houses connected to that particular transformer and install\n> insulation on all of them, thereby reducing their demand for all the houses\n> in that particular area, I have obviated the need for that transformer\n> upgrade. I have basically provided a virtual transformer upgrade. - private\n> providers could bid on this virtual stuff when new need arises.\n\nBill payers could also \u201cpay private companies to do what amounts to\ninfrastructure upgrades\u201d:\n\n> I'm talking about ratepayers paying the private company that gives them the\n> best price. Right? Versus just paying one private company offering one\n> solution. Right. Let's make all of them offer various solutions at various\n> prices with various costs of capital and see what happens. And you don't\n> have to go with the DERs, by the way. Like, if the system operator doesn't\n> think they're going to be reliable, doesn't think they're cost-effective,\n> don't do it. Right. But that is the only way for us to actually develop the\n> knowledge of what do these things cost, who will finance them, what are\n> their capabilities? Is to start holding the auctions.\n\nThis framework would likely increase the adoption of VPPs by enabling these\nplatforms to offer demand reduction and electricity generation as an\nalternative to building fossil fuel power plants or upgrading the grid\ninfrastructure.\n\nBy addressing these areas and fostering collaboration among policymakers,\nindustry, and technology providers, we can pave the way for the broader\nadoption and successful integration of VPPs into the future energy landscape.\n\nThanks for reading Software and the energy transition! Subscribe for free to\nreceive new posts and support my work.\n\n1\n\nhttps://www.woodmac.com/press-releases/us-distributed-energy-resource-market-\nto-almost-double-by-2027/\n\n2\n\nhttps://assets.ctfassets.net/v4qx5q5o44nj/7wBJb3RJfH8OIDZ3kL2Ukr/16a3e42a039831eb7c06a972122abd5c/RA_Grid_Project_Report_2024.pdf\n\n3\n\nhttps://liftoff.energy.gov/wp-content/uploads/2023/09/20230911-Pathways-to-\nCommercial-Liftoff-Virtual-Power-Plants_update.pdf\n\n4\n\nhttps://www.tesla.com/support/energy/virtual-power-\nplant/pge#2022-performance%20just\n\n5\n\nhttps://aws.amazon.com/blogs/industries/how-lunar-energy-is-using-aws-to-\ncreate-a-customer-led-energy-system/\n\n6\n\nhttps://aws.amazon.com/blogs/industries/how-lunar-energy-is-using-aws-to-\ncreate-a-customer-led-energy-system/\n\n7\n\nVirtual Peaker's VPP described in an intro to VPPs YouTube video\n\n8\n\nhttps://www.openadr.org/\n\n9\n\nhttps://www.epri.com/research/products/000000003002016236\n\n10\n\nhttps://en.wikipedia.org/wiki/Matter_(standard)\n\n11\n\nVolts\n\nNow is the time for distributed energy\n\nIn this episode, Duncan Campbell of Scale Microgrid Solutions makes the case\nthat distributed energy resources (DERs) \u2014 solar panels, EVs, home batteries,\netc. \u2014 are, thanks to rising electricity demand and constraints on grid\nexpansion, poised for a tsunami of deployment...\n\nListen now\n\na month ago \u00b7 49 likes \u00b7 18 comments \u00b7 David Roberts\n\n### Subscribe to Software and the energy transition\n\nBy Stephen Young \u00b7 Launched 7 days ago\n\nHow software can help us end our fossil fuel dependency\n\nShare this post\n\n#### Virtual Power Plants and software\n\nstephendeyoung.substack.com\n\nShare\n\nComments\n\nIntroducing Software and the Energy Transition\n\nI am worried about the climate crisis. The billions and billions of tonnes of\ncarbon that have polluted our environment due to burning fossil fuels will...\n\nApr 23 \u2022\n\nStephen Young\n\nShare this post\n\n#### Introducing Software and the Energy Transition\n\nstephendeyoung.substack.com\n\nReady for more?\n\n\u00a9 2024 Stephen Young\n\nPrivacy \u2219 Terms \u2219 Collection notice\n\nStart WritingGet the app\n\nSubstack is the home for great culture\n\nShare\n\n## Create your profile\n\n## Only paid subscribers can comment on this post\n\nAlready a paid subscriber? Sign in\n\n#### Check your email\n\nFor your security, we need to re-authenticate you.\n\nClick the link we sent to , or click here to sign in.\n\n", "frontpage": false}
