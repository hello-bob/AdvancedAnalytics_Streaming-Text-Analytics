{"aid": "40096057", "title": "Test for Breakage", "url": "https://developers.google.com/privacy-sandbox/3pcd/prepare/test-for-breakage", "domain": "developers.google.com", "votes": 1, "user": "keepamovin", "posted_at": "2024-04-20 09:38:50", "comments": 0, "source_title": "Test for breakage | Privacy Sandbox | Google for Developers", "source_text": "Test for breakage | Privacy Sandbox | Google for Developers\n\ndevelopers.google.com uses cookies from Google to deliver and enhance the\nquality of its services and to analyze traffic. Learn more.\n\n  * Privacy Sandbox\n\n  * English\n  * Deutsch\n  * Espa\u00f1ol\n  * Espa\u00f1ol \u2013 Am\u00e9rica Latina\n  * Fran\u00e7ais\n  * Indonesia\n  * Italiano\n  * Polski\n  * Portugu\u00eas \u2013 Brasil\n  * Ti\u1ebfng Vi\u1ec7t\n  * T\u00fcrk\u00e7e\n  * \u0420\u0443\u0441\u0441\u043a\u0438\u0439\n  * \u05e2\u05d1\u05e8\u05d9\u05ea\n  * \u0627\u0644\u0639\u0631\u0628\u064a\u0651\u0629\n  * \u0641\u0627\u0631\u0633\u06cc\n  * \u0939\u093f\u0902\u0926\u0940\n  * \u09ac\u09be\u0982\u09b2\u09be\n  * \u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22\n  * \u4e2d\u6587 \u2013 \u7b80\u4f53\n  * \u4e2d\u6587 \u2013 \u7e41\u9ad4\n  * \u65e5\u672c\u8a9e\n  * \ud55c\uad6d\uc5b4\n\nSign in\n\n  * Third-party cookie deprecation\n\n  * On this page\n  * Chrome flags for testing different scenarios\n\n    * Flags and settings\n    * Use flag combinations to simulate usage scenarios\n  * Support\n  * Find out more\n\n  * Home\n  * Privacy Sandbox\n\n  * Cookies\n\n  * Prepare\n\nWas this helpful?\n\n# Test for breakage\n\nbookmark_borderbookmark Stay organized with collections Save and categorize\ncontent based on your preferences.\n\n  * On this page\n  * Chrome flags for testing different scenarios\n\n    * Flags and settings\n    * Use flag combinations to simulate usage scenarios\n  * Support\n  * Find out more\n\nTo support testing scenarios during the 1% testing and ramp-up phases of\nthird-party cookie deprecation in Chrome, several Chrome flags are available.\n\nIn Chrome 121 and higher, you can simulate the state after third-party cookie\nphase-out:\n\n  * Enable chrome://flags/#test-third-party-cookie-phaseout\n  * Run Chrome from the command line with the flag --test-third-party-cookie-phaseout\n\nThis will set Chrome to block third-party cookies, and ensure that new\nfeatures and mitigations are active.\n\nWhat are Chrome flags? explains how to use command-line flags.\n\nYou can also try browsing with third-party cookies blocked using\nchrome://settings/cookies, but be aware that the flag ensures the new and\nupdated features are also enabled. Blocking third-party cookies is a good\napproach to detecting issues, but doesn't necessarily help you validate you\nhave fixed them.\n\nIf you maintain an active test suite for your sites, then you should do two\nside-by-side runs: one with Chrome on the usual settings, and one with the\nsame version of Chrome launched with the --test-third-party-cookie-phaseout\nflag. Any test failures in the second run and not in the first are good\ncandidates to investigate for third-party cookie dependencies.\n\n## Chrome flags for testing different scenarios\n\nIn addition to --test-third-party-cookie-phaseout, there are a number of flags\navailable to test different scenarios, such as participation in deprecation\ntrials:\n\n  * All the following flags are supported on Windows, Mac, Linux, ChromeOS, and Android.\n  * These flags can be set from the chrome://flags page or from the command line.\n  * To set flags for multiple features from the command line with --enable-features or --disable-features, add a comma between each feature name.\n  * You can work out the value to use for a command-line flag by setting the flag from chrome://flags, and then viewing Command Line values on the chrome://version page.\n\nNote: #tracking-protection-3pcd must be enabled for the following to work:\n\n#third-party-cookie-deprecation-trial #top-level-third-party-cookie-\ndeprecation-trial #tpcd-metadata-grants #tpcd-heuristics-grants\n\nFrom Chrome 121 #test-third-party-cookie-phaseout implies #tracking-\nprotection-3pcd, so you can enable either flag to allow the other flags to\nwork.\n\nName| Purpose| Min version| chrome://flags| Command-line flag  \n---|---|---|---|---  \nTracking Protection for 3PCD| Enabled: turn on Tracking Protection: \u2022 Show the\neye icon UI in the address bar (Omnibox) to allow the user to temporarily\nenable third-party cookies for a site. \u2022 Provide\nchrome://settings/trackingProtection instead of chrome://settings/cookies|\n121| #tracking-protection-3pcd| \\--enable-\nfeatures=TrackingProtection3pcd\\--disable-features=TrackingProtection3pcd  \nTest Third Party Cookie Phaseout| Disabled: this is the default. (No\neffect.)Enabled: Restrict third-party cookies and enable Tracking Protection\nUI to match the behavior of Chrome after third-party cookie phaseout.This\nsetting overrides the BlockThirdPartyCookies=false Chrome Enterprise policy,\nbut is overridden by content settings, such as those granted by the Storage\nAccess API or the CookiesAllowedForUrls policy.Flags and settings describes\nhow user settings interact with this flag.| 121| #test-third-party-cookie-\nphaseout| \\--test-third-party-cookie-phaseout  \nThird-party Cookie Deprecation Trial Grants for Testing| Enabled: this is the\ndefault. Allow participation in the Third-party cookie deprecation trial.\n(This flag no longer needs to be set to Enabled to take part in the\ntrial.)Disabled: make Chrome behave as if a third-party deprecation trial\ntoken has not been provided, even if it has. In other words: disable the\nthird-party deprecation trial. This can be useful for testing that longer-term\nfixes are working, without third-party cookies, on a site participating in the\ndeprecation trial.To have an effect, this flag requires #tracking-\nprotection-3pcd to be enabled.| 121| #third-party-cookie-deprecation-trial|\n\\--enable-features=TpcdSupportSettings\\--disable-features=TpcdSupportSettings  \nTop-Level Third-Party Cookie Deprecation Trial Grants for Testing| Enabled:\nRequired to allow the Top-level third-party cookie deprecation trial.Disabled:\nas with the third-party trial, make Chrome behave as if a valid trial token\nhas not been provided, even if it has. In other words: disable the first-party\ndeprecation trial. This can be useful for testing that longer-term fixes are\nworking, without third-party cookies, on a site participating in the first-\nparty deprecation trial.| 122| #top-level-third-party-cookie-deprecation-\ntrial| \\--enable-features=TopLevelTpcdSupportSettings\\--disable-\nfeatures=TopLevelTpcdSupportSettings  \nThird-Party Cookie Deprecation Metadata Grants for Testing| Enabled: this is\nthe default. Allow the third-party cookie deprecation trial grace period to\ntake effect.Disabled: Make Chrome behave as if the grace period is not in\neffect. This can be used to check that your site has deployed deprecation\ntrial tokens correctly, before the grace period ends (for a site that is\nsubject to the grace period).| 121| #tpcd-metadata-grants| \\--enable-\nfeatures=TpcdMetadataGrants\\--disable-features=TpcdMetadataGrants  \nThird-party Cookie Phase Out Facilitated Testing| Enabled: this is the\ndefault. Allow a Chrome-facilitated testing group experiment arm to be set for\nthis Chrome client.Disabled: don't allow an experiment arm to be set by\nChrome.Other values: manually set a specific experiment arm.Most developers\nwill need to use one of the Enabled Force settings. These bypass eligibility\nchecks and predictably place the Chrome client into the selected group arm.\nThe Enabled settings allow the client to be included in an experiment arm, but\ndon't force inclusion.| 121| #tpc-phase-out-facilitated-testing| \\--enable-\nfeatures=CookieDeprecationFacilitatedTesting\\--disable-\nfeatures=CookieDeprecationFacilitatedTestingFor other values, command-line\nvalues depend on the setting. For example, to set Enabled Force Control\n1:\\--enable-\nfeatures=CookieDeprecationFacilitatedTesting:force_eligible/true/disable_3p_cookies/false/disable_ads_apis/false/label/fake_control_1%2E1/version/9994If\nyou need to set these values from the command line, it's probably easiest to\nset the value from chrome://flags, restart the browser, then copy the flag\nvalue from the Command Line section of the chrome://version page.  \nThird-party Cookie Grants Heuristics Testing| Default: allow heuristics-based\nmitigations.Enabled: no effect. (Same as Default.)Disabled: don't allow\nheuristics-based mitigations. This can be useful for testing that other\nlonger-term fixes (without third-party cookies) are working as expected\nwithout heuristics mitigations.Other flag values are as\nfollows.CurrentInteraction: require a user interaction on the third-party site\nduring the popup or redirect flow.ShortRedirect redirect heuristic grants\ncookie access for 15 minutes: third-party cookies are allowed for redirect\nscenarios as described in heuristics-based mitigations.LongRedirect: redirect\nheuristic grants cookie access for 30 days.MainFrame:only popups initiated by\nthe main frame can enable the redirect heuristic.AllFrameInitiator: popups\ninitiated by any frame can enable the redirect heuristic.| 120| #tpcd-\nheuristics-grants| \\--enable-features=TpcdHeuristicsGrants\\--disable-\nfeatures=TpcdHeuristicsGrantsFor other values, set the value from\nchrome://flags, restart the browser, then copy the flag value from the Command\nLine section of the chrome://version page.  \n  \n### Flags and settings\n\nBlocking third-party cookies from Chrome user settings has a different effect\nfrom the default behavior when using Chrome with the chrome://flags#test-\nthird-party-cookie-phaseout flag enabled.\n\nWith only the flag enabled, third-party cookies are handled as they are for\nChrome's Tracking Protection test group: third-party cookies are still allowed\nin short-term, limited cases to allow critical services to function, and also\nthrough the longer-term solutions of CHIPS and the Storage Access API.\n\nIf Block all third-party cookies from chrome://settings/trackingProtection is\nenabled (or Block third-party cookies from chrome://settings/cookies, for\nthose not in the Tracking Protection group) Chrome does not allow any access\nto third-party cookies or other unpartitioned state, unless third-party\ncookies are allowed by a Chrome Enterprise CookiesAllowedForUrls policy, or\nthe user explicitly grants permission:\n\n  * Using the eye icon in the address bar (Omnibox).\n  * Adding an entry under Sites allowed to use third-party cookies on the chrome://settings/trackingProtection page.\n  * Adding an entry to Allowed to use third-party cookies on `chrome://settings/cookies.\n\nIf the BlockThirdPartyCookies policy is set to false for a Chrome Enterprise\nuser, they won't be able to block third-party cookies from chrome://settings.\n\nIf you regularly run Chrome channels with command flags, you might want to\ncreate a function for each, and add these to your shell RC file. For example,\non macOS: alias cf(){ open -a 'Google Chrome Canary' --args $*; }\n\nNote that flags set from the command line are not reflected by the settings\ndisplayed on the `chrome://flags` page.\n\n### Use flag combinations to simulate usage scenarios\n\nScenario| #tracking-protection-3pcd| #third-party-cookie-deprecation-trial|\n#tpcd-metadata-grants  \n---|---|---|---  \n1% testing, deprecation trial ignored| Enabled| Disabled| Disabled  \nGrace period registration approved for domain, but no token yet supplied|\nEnabled| Enabled| Enabled  \nGrace period active, token supplied| Enabled| Enabled| Disabled  \nGrace period no longer active (i.e. after April 2024), token supplied|\nEnabled| Enabled| [No effect]  \n  \n## Support\n\n  * Report third-party cookie breakage: goo.gle/report-3pc-broken\n  * Raise an issue in the Privacy Sandbox Developer Support repository: goo.gle/3pcd-support\n\n## Find out more\n\n  * Preserving critical user experiences: the third-party cookie phaseout deprecation trials\n  * Third-party cookies restricted by default for 1% of Chrome users\n  * What are Chrome flags?\n  * What are Chrome Variations?\n\nWas this helpful?\n\nExcept as otherwise noted, the content of this page is licensed under the\nCreative Commons Attribution 4.0 License, and code samples are licensed under\nthe Apache 2.0 License. For details, see the Google Developers Site Policies.\nJava is a registered trademark of Oracle and/or its affiliates.\n\nLast updated 2023-12-21 UTC.\n\n", "frontpage": false}
