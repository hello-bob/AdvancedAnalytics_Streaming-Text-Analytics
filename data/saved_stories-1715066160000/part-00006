{"aid": "40280172", "title": "Finder still can't work out the size of files", "url": "https://eclecticlight.co/2024/05/03/finder-still-cant-work-out-the-size-of-files/", "domain": "eclecticlight.co", "votes": 2, "user": "CharlesW", "posted_at": "2024-05-06 22:20:45", "comments": 0, "source_title": "Finder still can\u2019t work out the size of files", "source_text": "Finder still can\u2019t work out the size of files \u2013 The Eclectic Light Company\n\nSkip to content\n\n# The Eclectic Light Company\n\nMacs, painting, and more\n\nhoakley May 3, 2024 Macs, Technology\n\n# Finder still can\u2019t work out the size of files\n\nFor the last six years I have been concerned that file sizes shown by the\nFinder aren\u2019t accurate. Go back to the last century, and that was something\nthat Classic Mac OS got right. To get the definitive answer, all you had to do\nwas use ResEdit\u2019s Get Info command.\n\nIn those days, files came with two forks, regular data and the Resource Fork.\nThis dialog gives the size in bytes for each, in this case 117,836 in the\nResource fork, and 144,788 bytes data.\n\nIn January 2018, High Sierra couldn\u2019t match that.\n\nThe size of this text file is given as 391 bytes in the Finder\u2019s Get Info, but\nas you\u2019ll see below it contains over 90,000 bytes of extended attributes that\nfigure simply ignores.\n\nSince then, macOS has tried harder, but still isn\u2019t up to the job, as shown in\nSonoma 14.4.1.\n\nHere Get Info claims this crafted example file is 263,195 bytes in size.\n\nMy free utility Precize begs to differ: according to figures obtained from the\nfile system, there are 183,136 bytes of data and 161,326 bytes of extended\nattributes, coming to a total of 344,462 bytes.\n\nThat\u2019s not surprising, as xattred reveals that it has two extended attributes\neach of 80,059 bytes accounting for much of their size.\n\nThe clue as to what the Finder is getting wrong comes in the URL Keys line\nfrom Precize, where the total size matches that given by the Finder, 263,195\nbytes. So how come information taken from the URL of a file can get its size\nso wrong?\n\nAs Precize shows, those figures are derived from two different sources. The\ncorrect numbers come from the size key in its file attribute dictionary \u201cwhose\nvalue indicates the file\u2019s size in bytes.\u201d To that, Apple adds a highlighted\nbox marked Important, and explains that \u201cif the file has a resource fork, the\nreturned value does not include the size of the resource fork.\u201d Interpreting\nthat for modern macOS, that\u2019s the size of the data, excluding extended\nattributes. So Precize then adds the total size of all the file\u2019s extended\nattributes to give the final total from the file system.\n\nThe figures given for URL Keys are taken from URL resourceValues for fileSize\nand totalFileSize. Apple defines those as:\n\n  * fileSize is \u201cthe total file size, in bytes\u201d\n  * totalFileSize is \u201cthe total displayable size of the file, in bytes. The allocated size in bytes may include space used by metadata.\u201d\n\nand that\u2019s as close to a total file size including extended attributes that\nmacOS seems able to give. In this case, totalFileSize includes around half the\nextended attributes, but not all of them, making it incorrect for just the\ndata size, and incorrect for the total of data and extended attributes. Apple\ndoesn\u2019t explain how it chooses which to include, but it renders the figure of\nlittle or no use. Although for some reason, the Finder seems to believe it.\n\nOver the last six years we have progressed from Get Info omitting extended\nattributes altogether, to including some of them apparently at random. Maybe\nin another six years, the Finder will prove more accurate.\n\n### Share this:\n\n  * Twitter\n  * Facebook\n  * Reddit\n  * Pinterest\n  * Email\n  * Print\n\nLike Loading...\n\n### Related\n\nHow big is that file? How Finder and Terminal file sizes can misleadJanuary\n30, 2018In \"Macs\"\n\nClipping files: copying through the FinderMarch 5, 2019In \"Macs\"\n\nCan macOS tell how large a file really is?February 12, 2018In \"Macs\"\n\nPosted in Macs, Technology and tagged APFS, bug, FileManager, Finder, macOS\n14, ResEdit, Sonoma, URL. Bookmark the permalink.\n\n## 20Comments\n\nAdd yours\n\n  1. 1\n\nEnzo Vincenzo on May 3, 2024 at 6:50 am\n\nReply\n\nYou wrote: \u201cMaybe in another six years, the Finder will prove more accurate.\u201d\nBut maybe the opposite could happen... You know, the way the world is going\ntoday, it would take many miracles.... Among them, Apple should hire careful\npeople like you and put them in a position to treat designers with the\ntoughness and grumpiness of Apple\u2019s Founder who, in order to create quality\ncomputers and systems, had no qualms about treating incompetent or superficial\nEngineers and Developers harshly and badly. But today political correctness no\nlonger allows us to cross certain lines, as if we were all kindergarten\nchildren.... Yet real wars are being waged and real children are not being\ntaken care of.... Sigh! What a hypocritical society...\n\nLikeLiked by 1 person\n\n     * 2\n\nhoakley on May 3, 2024 at 7:38 am\n\nReply\n\nThank you. I\u2019m not sure if there is any opposite here: currently the size\nreported by Get Info could be anything from just the data and no extended\nattributes, to the total of data and all extended attributes. As you don\u2019t\nknow which extended attributes might be included, it might be better to revert\nto the old style from six years ago and just exclude them altogether. Howard.\n\nLikeLiked by 1 person\n\n       * 3\n\nEnzo Vincenzo on May 3, 2024 at 9:44 am\n\nReply\n\nWhat good times, dear Howard, when Option Key + I + \u201cApple\u201d Key (actually CMD)\nwas used to create CDs or DVDs and the Finder was precise and we could all\nwork in serenity and joy. Until Tiger and perhaps Leopard, 99% of Mac users\nknew and used the Apple + I key, with or without the use of the Option key,\nand bought Macs because of the near-absolute UNIX capabilities and precision,\ncompared to Windows and even Linux. But today 90% (or more) of users buy Macs\nfor the color scheme and because it is increasingly fashionable, they do not\nknow the use of CMD + I, much less ignore the importance of the \u201cOption\u201d\nmodifier key. At Apple they are aware of this and therefore do not devote\nenergy to correcting or perfecting what you pointed out. To think that today,\nafter a quarter century, we could have had the Information window beautified\nand even completed with dynamic graphs in addition to just numerical values...\nAnd instead we rightly have to approve your fair observation and request to\nget back at least the old Finder behavior in calculating the sizes...\n\nLikeLiked by 1 person\n\n         * 4\n\nhoakley on May 3, 2024 at 8:13 pm\n\nThank you. Howard.\n\nLikeLike\n\n     * 5\n\nJohn Gilbert on May 3, 2024 at 10:12 am\n\nReply\n\nYou wrote: \u201cYou wrote: \u201cMaybe in another six years, the Finder will prove more\naccurate.\u201dBut maybe the opposite could happen... \u201d\n\nNot the opposite. This is my scenario: Why do you need to know a size?\n\nSize has little meaning now (except to pedants) and even Howard has not\nmanaged to tie it to down (where are FinderComments, clones and sparse\nfiles?). Maybe in 6 years time Finder will stop reporting any size. All you\nneed to know is that you have a blob of data \u2013 or just a \u201csomething\u201d. And in\nthis interconnected world, that data might or might not be on your computer \u2013\nso why does size matter?\n\nDo I jest? I hope so, but maybe not.\n\nAnd, as always another thought provoking article along with your comment.\n\nLikeLiked by 2 people\n\n       * 6\n\nEnzo Vincenzo on May 3, 2024 at 2:03 pm\n\nReply\n\nDo you know, dear John, that from a philosophical point of view you are\nabsolutely right?.... Perhaps we are still anchored in a legacy of primordial\nhabits, related to the birth of computing. And in fact who burns CDs, DVDs and\nBlu-Rays anymore to make backups or to transport music in the car, etc.? But\nyes... And maybe with Quantum Informatics the size will be so virtual and\nvariable that a 10 GB image file (DMG) could be considered and seen as 1 Byte\nwhen closed and as 100 GB when open, because of the thousands of contents\ninside...\n\nLikeLiked by 1 person\n\n         * 7\n\nhoakley on May 3, 2024 at 8:22 pm\n\nThere\u2019s a whole scientific discipline devoted to that: information theory. And\nI\u2019m sorry to say that even invoking quantum methods, you can\u2019t squeeze more\ninformation into ever-decreasing storage. Howard.\n\nLikeLiked by 1 person\n\n       * 8\n\nartiste212 on May 3, 2024 at 3:38 pm\n\nReply\n\nI\u2019d been thinking the same thing \u2014 good to read someone else also considers\nthis a possibility. I\u2019m sure programmers need to know all the various\ncomponents of file sizes, but many users won\u2019t even know if a file is stored\non their internal drive or not. Next, we should compare sizes of files stored\nlocally with those stored in iCloud \u2013 if we could figure out exactly the\ndefinition of \u201cfile size\u201d to use.\n\nBruce\n\nLikeLiked by 2 people\n\n         * 9\n\nhoakley on May 3, 2024 at 8:29 pm\n\nThere\u2019s no difficulty in defining file sizes: there\u2019s the data, and metadata\nincluding extended attributes. The total file size is the sum of the two. My\nlittle app Precize (and xattred) have no difficulty in calculating those in\nthe twinkling of an eye, without invoking magic spells. It\u2019s just that all\nthese years later, Apple still hasn\u2019t got round to fixing this in the Finder.\nHoward.\n\nLikeLiked by 1 person\n\n       * 10\n\nhoakley on May 3, 2024 at 8:19 pm\n\nReply\n\nThank you for the thought provocation. While service providers, as Apple is\nincreasingly becoming, may not want us to be able to count the cost, there are\na limited number of ways they can charge us for cloud services, all of which\ndepend in some way on the size of data stored or transferred. While we may not\nbe worrying whether we can squeeze those files on that floppy disk, we will be\npaying by the TB, one way or another. Howard.\n\nLikeLiked by 1 person\n\n       * 11\n\nblm on May 4, 2024 at 8:12 pm\n\nReply\n\nAs long as storage and bandwidth are finite and have a non-zero cost, and\ntransfer times are non-zero, it will be necessary to know the sizes of things.\nPreferably an accurate size.\n\nLikeLiked by 1 person\n\n         * 12\n\nhoakley on May 4, 2024 at 9:15 pm\n\nThank you. I agree. Howard.\n\nLikeLiked by 1 person\n\n  2. 13\n\nDuncan on May 3, 2024 at 2:49 pm\n\nReply\n\nIt seems to me that Macs could use a specialized chip, similar to the T2,\nwhose sole function is OS & filesystem housekeeping. In the background, it\ncould, for instance, keep reported file size values up to date, manage all\nbackup operations, and maintain checksums on all files for integrity. It could\nalso manage RAID and parity operations for those who desire and invest in the\nadditional storage.\n\nAs it is now, it feels like Macs run a lot of tasks simultaneously but leave a\nmess behind that starts to accumulate like a neglected workshop. Yes, the\nefficiency cores should be handling all this, but clearly they are not. A\ndedicated chip would run on its own and cordon off the hidden housekeeping\ntasks that are clearly unglamorous but highly necessary. And as computers\ncontinue to get more complex, things could only get worse.\n\nLikeLiked by 2 people\n\n     * 14\n\nhoakley on May 3, 2024 at 8:26 pm\n\nReply\n\nThank you, Duncan. Sadly, a core or chip can only do what it\u2019s programmed to\ndo. macOS already does a great deal of housekeeping for the system, including\nthe file system. APFS is very efficient at doing that, and has a SpaceMan\n(Space Manager) and a Reaper (not so grim?) whose sole purpose is to clean up.\nIf you watch E cores in an Apple silicon Mac, they\u2019re often busy doing all\nthose humdrum tasks like maintaining Spotlight indexes and clearing stuff\naway. Howard.\n\nLikeLiked by 1 person\n\n       * 15\n\nDuncan on May 3, 2024 at 9:56 pm\n\nReply\n\n\u201cIf you watch E cores in an Apple silicon Mac, they\u2019re often busy doing all\nthose humdrum tasks like maintaining Spotlight indexes and clearing stuff\naway.\u201d\n\nBut not, apparently computing how large the individual files are and reporting\nback the total. Which is something you\u2019d think a computer might be able to do\nin its spare time.\n\nLikeLiked by 1 person\n\n         * 16\n\nhoakley on May 3, 2024 at 10:07 pm\n\nThe computational effort of that is trivial, and there\u2019s nothing to report it\nto anyway. Howard\n\nLikeLike\n\n     * 17\n\njdrch on May 6, 2024 at 4:29 am\n\nReply\n\nMy brother in Christ, file size is something other OSes handle just fine using\na CPU only.\n\nLikeLiked by 1 person\n\n       * 18\n\nhoakley on May 6, 2024 at 8:53 am\n\nReply\n\nAnd so too does macOS with APFS. There\u2019s something of a misunderstanding here.\nHoward.\n\nLikeLike\n\n  3. 19\n\njdrch on May 6, 2024 at 4:28 am\n\nReply\n\nI used to wonder how Mac users frequently reported unexpectedly running out of\nspace. I guess now I know.\n\nLikeLiked by 1 person\n\n     * 20\n\nhoakley on May 6, 2024 at 8:52 am\n\nReply\n\nWell, I don\u2019t think this is related. This affects the size reported by the\nFinder. Space accounting in APFS isn\u2019t simple, but that\u2019s because it\u2019s a\nmodern file system, unlike HFS+. The difficulty isn\u2019t in the file system, it\nlies in how the Finder presents the information. Howard.\n\nLikeLiked by 1 person\n\n### Leave a comment Cancel reply\n\nThis site uses Akismet to reduce spam. Learn how your comment data is\nprocessed.\n\n# Quick Links\n\n  * Free Software Menu\n  * System Updates\n  * M-series Macs\n  * Mac Troubleshooting Summary\n  * Mac problem-solving\n  * Painting topics\n  * Painting\n  * Long Reads\n\n# Search\n\n# Monthly archives\n\n  * May 2024 (16)\n  * April 2024 (75)\n  * March 2024 (81)\n  * February 2024 (72)\n  * January 2024 (78)\n  * December 2023 (79)\n  * November 2023 (74)\n  * October 2023 (77)\n  * September 2023 (77)\n  * August 2023 (72)\n  * July 2023 (79)\n  * June 2023 (73)\n  * May 2023 (79)\n  * April 2023 (73)\n  * March 2023 (76)\n  * February 2023 (68)\n  * January 2023 (74)\n  * December 2022 (74)\n  * November 2022 (72)\n  * October 2022 (76)\n  * September 2022 (72)\n  * August 2022 (75)\n  * July 2022 (76)\n  * June 2022 (73)\n  * May 2022 (76)\n  * April 2022 (71)\n  * March 2022 (77)\n  * February 2022 (68)\n  * January 2022 (77)\n  * December 2021 (75)\n  * November 2021 (72)\n  * October 2021 (75)\n  * September 2021 (76)\n  * August 2021 (75)\n  * July 2021 (75)\n  * June 2021 (71)\n  * May 2021 (80)\n  * April 2021 (79)\n  * March 2021 (77)\n  * February 2021 (75)\n  * January 2021 (75)\n  * December 2020 (77)\n  * November 2020 (84)\n  * October 2020 (81)\n  * September 2020 (79)\n  * August 2020 (103)\n  * July 2020 (81)\n  * June 2020 (78)\n  * May 2020 (78)\n  * April 2020 (81)\n  * March 2020 (86)\n  * February 2020 (77)\n  * January 2020 (86)\n  * December 2019 (82)\n  * November 2019 (74)\n  * October 2019 (89)\n  * September 2019 (80)\n  * August 2019 (91)\n  * July 2019 (95)\n  * June 2019 (88)\n  * May 2019 (91)\n  * April 2019 (79)\n  * March 2019 (78)\n  * February 2019 (71)\n  * January 2019 (69)\n  * December 2018 (79)\n  * November 2018 (71)\n  * October 2018 (78)\n  * September 2018 (76)\n  * August 2018 (78)\n  * July 2018 (76)\n  * June 2018 (77)\n  * May 2018 (71)\n  * April 2018 (67)\n  * March 2018 (73)\n  * February 2018 (67)\n  * January 2018 (83)\n  * December 2017 (94)\n  * November 2017 (73)\n  * October 2017 (86)\n  * September 2017 (92)\n  * August 2017 (69)\n  * July 2017 (81)\n  * June 2017 (76)\n  * May 2017 (90)\n  * April 2017 (76)\n  * March 2017 (79)\n  * February 2017 (65)\n  * January 2017 (76)\n  * December 2016 (75)\n  * November 2016 (68)\n  * October 2016 (76)\n  * September 2016 (78)\n  * August 2016 (70)\n  * July 2016 (74)\n  * June 2016 (66)\n  * May 2016 (71)\n  * April 2016 (67)\n  * March 2016 (71)\n  * February 2016 (68)\n  * January 2016 (90)\n  * December 2015 (96)\n  * November 2015 (103)\n  * October 2015 (119)\n  * September 2015 (115)\n  * August 2015 (117)\n  * July 2015 (117)\n  * June 2015 (105)\n  * May 2015 (111)\n  * April 2015 (119)\n  * March 2015 (69)\n  * February 2015 (54)\n  * January 2015 (39)\n\n# Tags\n\nAPFS Apple Apple silicon backup Big Sur Blake bug Catalina Consolation Console\nCorinth diagnosis Disk Utility Dor\u00e9 El Capitan extended attributes Finder\nfirmware Gatekeeper G\u00e9r\u00f4me High Sierra history of painting iCloud\nImpressionism landscape LockRattler log M1 Mac Mac history macOS macOS 10.12\nmacOS 10.13 macOS 10.14 macOS 10.15 macOS 11 macOS 12 macOS 13 macOS 14\nmalware Metamorphoses Mojave Monet Monterey Moreau MRT myth narrative OS X\nOvid painting performance Pissarro Poussin privacy realism Renoir riddle\nRubens Sargent scripting security Sierra SilentKnight SSD Swift Time Machine\nTintoretto Turner update upgrade Ventura xattr Xcode XProtect\n\n# Statistics\n\n  * 17,097,771 hits\n\nBlog at WordPress.com.\n\nBegin typing your search above and press return to search. Press Esc to\ncancel.\n\n  * Comment\n  * Reblog\n  * Subscribe Subscribed\n\n    * The Eclectic Light Company\n    * Already have a WordPress.com account? Log in now.\n\n  * Privacy\n  *     * The Eclectic Light Company\n    * Customize\n    * Subscribe Subscribed\n    * Sign up\n    * Log in\n    * Copy shortlink\n    * Report this content\n    * View post in Reader\n    * Manage subscriptions\n    * Collapse this bar\n\nLoading Comments...\n\n%d\n\n", "frontpage": false}
