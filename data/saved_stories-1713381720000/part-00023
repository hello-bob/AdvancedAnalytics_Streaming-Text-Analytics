{"aid": "40062426", "title": "Show HN: A Nix module to manage your SSH keys", "url": "https://github.com/AdoPi/shoji-nix", "domain": "github.com/adopi", "votes": 1, "user": "anajimi", "posted_at": "2024-04-17 09:56:01", "comments": 0, "source_title": "GitHub - AdoPi/shoji-nix: Manage your SSH keys with Nix", "source_text": "GitHub - AdoPi/shoji-nix: Manage your SSH keys with Nix\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nAdoPi / shoji-nix Public\n\n  * Notifications\n  * Fork 3\n  * Star 55\n\nManage your SSH keys with Nix\n\n### License\n\nGPL-3.0 license\n\n55 stars 3 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# AdoPi/shoji-nix\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n0 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\nAdoPiUpdate README.mdApr 13, 20244c3de3b \u00b7 Apr 13, 2024Apr 13, 2024\n\n## History\n\n22 Commits  \n  \n### examples\n\n|\n\n### examples\n\n| Update flake.nix| Mar 29, 2024  \n  \n### modules/shoji\n\n|\n\n### modules/shoji\n\n| use module| Mar 29, 2024  \n  \n### pkgs\n\n|\n\n### pkgs\n\n| Refactor shoji package to separate nix file| Mar 29, 2024  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| Create LICENSE| Mar 29, 2024  \n  \n### README.md\n\n|\n\n### README.md\n\n| Update README.md| Apr 13, 2024  \n  \n### flake.lock\n\n|\n\n### flake.lock\n\n| fix: Flake.lock not correct| Mar 29, 2024  \n  \n### flake.nix\n\n|\n\n### flake.nix\n\n| Refactor shoji package to separate nix file| Mar 29, 2024  \n  \n## Repository files navigation\n\n# Shoji-nix\n\n### SSH Keys Management Module for Nix\n\nThis module provides a way to encrypt and save SSH keys in your Nix\nconfiguration repository.\n\nShoji-Nix is a Nix module designed to manage and securely store your SSH keys.\nWith Shoji-Nix, you can transform your SSH configuration and .ssh folder into\na YAML file, which you can then encrypt and save in your Nix configuration.\n\nShoji-Nix uses the robust encryption tools SOPS and AGE, allowing you to\nencrypt not just your private SSH key, but also the username, IP address, and\nhostname of your SSH configuration. This feature provides an added layer of\nsecurity and helps maintain your anonymity.\n\nWarning: This is a POC, it is very experimental!!! Use at your own risk!\nPlease backup your files before using it.\n\n# Init\n\nCreate a yaml file with shoji, encrypts it using age and sops.\n\n    \n    \n    nix run github:AdoPi/shoji-nix#shoji-init -- -k ~/.ssh -c ~/.ssh/config -o ssh.yaml -a $(cat ~/.sops/age/keys.txt | grep public | grep -oP \"public key: \\K(.*)\")\n\nYou can also define your own encryption-regex\n\n    \n    \n    nix run github:AdoPi/shoji-nix#shoji-init -- -k ~/.ssh -c ~/.ssh/config -o ssh.yaml -a $(cat ~/.sops/age/keys.txt | grep public | grep -oP \"public key: \\K(.*)\") -r '(name|identity)'\n\nIf you don't want to encrypt your file, you can run shoji-init without an age\npublic key file. Then you can encrypt it with sops (and age) using your own\n.sops.yaml file.\n\n    \n    \n    nix run github:AdoPi/shoji-nix#shoji-init -- -k ~/.ssh -c ~/.ssh/config -o ssh.yaml\n\n## Usage in your configuration.nix\n\nInclude shoji-nix as a module in your nix code.\n\n    \n    \n    input = { shoji-nix.url = \"github:AdoPi/shoji-nix\"; };\n    \n    \n    modules = [ shoji-nix.nixosModules.shoji ]\n\nThen you can define your own shoji configuration.\n\n    \n    \n    {config, ...} : { shoji.enable = true; shoji.ssh-folder = \"/root/.ssh\"; shoji.owner = \"root\"; shoji.group = \"users\"; shoji.age-keyfile = \"/root/.sops/me.key\"; shoji.ssh-config = \"/root/.ssh/config\"; shoji.yaml-config = ./ssh.yaml; }\n\n## Examples\n\nFor more informations, you can find a simple example in the examples folder.\n\n## About\n\nManage your SSH keys with Nix\n\n### Resources\n\nReadme\n\n### License\n\nGPL-3.0 license\n\nActivity\n\n### Stars\n\n55 stars\n\n### Watchers\n\n4 watching\n\n### Forks\n\n3 forks\n\nReport repository\n\n## Releases\n\nNo releases published\n\n## Contributors 2\n\n  * AdoPi Adonis\n  * mrdev023 Florian Richer\n\n## Languages\n\n  * Nix 100.0%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
