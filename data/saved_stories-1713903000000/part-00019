{"aid": "40130859", "title": "Resurrecting the first Dutch web index (2018)", "url": "https://www.bitsgalore.org/2018/04/24/resurrecting-the-first-dutch-web-index-nl-menu-revisited", "domain": "bitsgalore.org", "votes": 1, "user": "niek_pas", "posted_at": "2024-04-23 11:54:03", "comments": 0, "source_title": "Resurrecting the first Dutch web index: NL-menu revisited", "source_text": "Resurrecting the first Dutch web index: NL-menu revisited\n\ndigital preservation - file formats\n\n# Resurrecting the first Dutch web index: NL-menu revisited\n\n24 April 2018\n\nNL-menu was the first Dutch web index. The site was originally founded by a\nconsortium of SURFnet, Dutch universities and the KB. From the mid-nineties\nonwards it was maintained solely by the KB. NL-menu was discontinued in 2004,\nafter which the site was taken offline. In 2006 the domain name was sold to a\nprivate company that used it for hosting a web index that was partially based\non the original NL-menu site.\n\nMeanwile, the original NL-menu has been largely lost to the mists of time.\nEven though the Internet Archive\u2019s Wayback Machine contains rather a lot of\nsnapshots of the site, these are incomplete, and don\u2019t capture the original\nlook and feel. For example, this page is a snapshot from June 2002:\n\nHowever, this doesn\u2019t look even remotely like the site as it was in 2002. Just\nfor one thing, at the top-left we see a Bing search box, but Bing didn\u2019t even\nexist until 2009! An inspection of the crawl time stamps (these can be seen by\nclicking on the top-right About this capture button) reveals that this\n\u201csnapshot\u201d is really an amalgam of elements that were crawled at wildly\nvarying dates, some as recently as 2018:\n\nNL-menu is not part of the KB Web Archive, as the KB only started its web\narchiving activities in 2007. The only remaining \u201ccomplete\u201d copies of NL-menu\nare three (recordable) CD-ROMs that were burned shortly before the site was\ntaken offline in 2004.\n\nAs NL-menu is a unique source of information about the (relatively) early\nhistory of the Dutch Internet, we made an attempt at reconstructing the site\nas it appeared in early 2004. This involved the following steps:\n\n  1. Recover the data from the remaining CD-ROMs\n  2. Set up a local copy of the site by serving the recovered data om a webserver\n  3. Crawl the recovered site for inclusion in our web archive\n\nThe remainder of this blog describes how we went about the first two steps.\n\n## Recovering the data\n\nA first attempt at viewing the contents of the CD-ROMs in a file manager\nresulted in read errors for all discs. This is not surprising, given the\ninstability of CD-Rs, and the fact these discs were burned in early 2004. So,\nwe tried to recover the contents of the discs with the dedicated data-recovery\ntool ddrescue. We used the following command line:\n\n    \n    \n    ddrescue -d -b 2048 -r4 -v /dev/sr0 NL-menu-ddrescue.iso NL-menu-ddrescue.log\n\nHere -d tells ddrescue to read the disc using direct disc access mode, -b sets\nthe block size (which is 2048 bytes for a CD-ROM); -r4 sets the maximum number\nof retries in case of bad sectors to 4, and -v activates verbose output mode.\nFile NL-menu-ddrescue.iso is the image file with the recovered data; NL-menu-\nddrescue.log is a so-called mapfile, which holds information on the recovery\nstatus of blocks of data.\n\nOne of the advantages of ddrescue is that it can be run multiple consecutive\ntimes for each disc, using different optical drives if necessary. This is\nextremely useful, as it is not uncommon to find that some sectors on a disc\nresult in read errors on one drive, whereas those sectors are read without\nproblems by another drive (and vice versa).\n\n## Results of recovery process\n\nOut of the three CD-ROMs, only one copy could be fully recovered without any\nunreadable sectors. The recovery process required multiple passes with\nddrescue, using two computers and four different optical drives (two internal\ndrives, and two external USB drives).\n\nOnly half of the second disc could be recovered after a 16-hour recovery pass\nwith ddrescue. An inspection of the resulting ISO image in a hex editor showed\nthe recovered sectors of this disc to be byte-identical to the first disc\n(which was recovered in full). Having established this, we didn\u2019t do any\nfurther attempts at recovering more data from this disc (since it is simply a\ncopy of the first disc).\n\nFor the third disc, 99.8% of the data could be recovered after four rounds\nwith ddrescue with four optical drives. Below image shows a visualisation of\nthe recovery process (made with ddrescueview):\n\nHere, each block respresents one 2048-byte sector, where a red block is a\nsector with read errors. In this case 468 sectors spread across the disc are\nunreadable. This means that any files or folder definitions that occupy any of\nthose sectors will be damaged. The resulting ISO image turned out to be\nreadable, but one of the top-level directories (which contains half of the\nfiles on the disc) is not shown when the image is mounted or opened in an\narchive manager. So, we discarded this ISO image from any further processing\nas well. Unfortunately this disc did not turn out to be merely a copy of the\nfirst disc.\n\n## Inspecting the contents of the ISO image\n\nAfter mounting the ISO image of the first disc (i.e. the one that was\nrecovered without errors) on a Linux machine, the following directory\nstructure appears:\n\nThe nlmenu.nl directory contains the Dutch-language version of the site, and\nnlmenu.en the English-language version (oddly, there\u2019s no top-level index\npage!). Here are the contents of the nlmenu.nl directory:\n\nIf we open index.html in a browser (Firefox) we see this:\n\nWe can see here that several images are not rendered; also none of the\n(internal) hyperlinks work. This happens because all file paths in the\nunderlying HTML are defined relative to the site\u2019s root directory, and these\ndon\u2019t resolve properly on the local file system. In order to render the site\ncorrectly we have to serve it from a locally installed web server.\n\n## Serving the CD-ROM contents with a web server\n\nSo, we installed the Apache web server on a Linux machine, and then configured\nit to serve the unpacked contents of the ISO image. More details on how we did\nthis can be found in these technical notes. Configuring the hosts file (as\nexplained in the technical notes) allowed us to render the site on localhost\nfrom its original URL:\n\nWe could crawl the resurrected site with Heritrix for inclusion in our web\narchive, but before doing this a number of authenticity-related issues need to\nbe sorted out first. For one thing, we need to record metadata that makes it\nabsolutely clear that our archival snapshot was taken from a locally\nreconstructed copy, rather than the original site. Also, it\u2019s not completely\nstraightfoward how the archiving date should be defined (is this 2004 ore\n2018?). We\u2019d be very interested to hear how other web archives are dealing\nwith these issues.\n\n## Publicly available version of the recovered site\n\nThe KB web archive is only accessible on-site in our reading rooms. Since the\nKB owns the rights to NL-menu, we decided to make the reconstructed site\navailable on the KB Research website. In order to make this work, we applied a\ncouple of small changes to the original files:\n\n  * Relative references to website resources were re-written to reflect the location of the site on the kbresearch domain.\n  * All references to the original nl-menu.nl domain were updated to the kbrearch.nl domain (most importantly this prevents JavaScript-triggered redirects to the original live nl-menu.nl domain).\n  * The Dutch index page was copied to the site root, so that it\u2019s used as a top-level index (this was done because the CD-ROM has no top-level index page).\n\nThe above changes were all made using this script.\n\nThe result of all this is available here:\n\nhttp://www.kbresearch.nl/nl-menu/nl-menu/\n\nThis reflects the state of NL-menu briefly before it closed down in 2004.\n\nAlthough at first glance the reconstructed site appears to be of much better\nquality than any of the available Wayback snaphots, there are a couple of\ncaveats:\n\n  * Links to categories that contain sub categories don\u2019t work in Firefox. A workaround is to right-click on the link and open it in a new tab (or disable JavaScript). In Chrome/Chromium these links work normally.\n  * The site contains a number of forms that don\u2019t work because the associated CGI scripts are missing (these scripts are not on the CD-ROM).\n  * Some pages show the URL http://www.kbresearch.nl, instead of the original http://www.nl-menu.nl. This is an unintended side-effect of the script that was used to update the links.\n\nThere may be more issues; please feel free to contact us if you spot anything\nthat doesn\u2019t look quite right!\n\n## Acknowledgements\n\nThanks are due to the folllowing people for their advice and suggestions:\nAnnemarie Beunen, Willem Jan Faber, Kees Teszelszky, and Lammert Zwaagstra.\n\n## Additional resources\n\n  * NL-menu (2004 snapshot at kbresearch.nl)\n  * Serving a static website with the Apache web server (technical notes)\n  * How can we improve our web collection? An evaluation of web archiving at the KB National Library of the Netherlands (2007-2017)\n\nOriginally published at the Open Preservation Foundation blog\n\n  * \u2190 Previous\n  * Next \u2192\n\n## Comments\n\nPost comment (Github)\n\n### About\n\n## Search\n\n## Tags\n\n## Archive\n\n## Issues\n\n### Report a problem with this site\n\n### Hackers Hall of Fame\n\n## Social\n\n### Mastodon (digipres.club)\n\n## Feeds\n\n### RSS\n\n### ATOM\n\n\u00a9 2024 Johan van der Knijff. All content on this blog is licensed under a\nCreative Commons Attribution 4.0 International License, unless indicated\notherwise. Created using Jekyll Bootstrap and Twitter Bootstrap.\n\n", "frontpage": false}
