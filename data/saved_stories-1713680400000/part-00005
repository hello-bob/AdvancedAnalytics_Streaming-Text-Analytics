{"aid": "40100450", "title": "Anyolite \u2013 Embedded Mruby/Ruby for Crystal", "url": "https://github.com/Anyolite/anyolite", "domain": "github.com/anyolite", "votes": 1, "user": "thunderbong", "posted_at": "2024-04-20 19:52:21", "comments": 0, "source_title": "GitHub - Anyolite/anyolite: Embedded mruby/Ruby for Crystal", "source_text": "GitHub - Anyolite/anyolite: Embedded mruby/Ruby for Crystal\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nAnyolite / anyolite Public\n\n  * Notifications\n  * Fork 9\n  * Star 158\n\nEmbedded mruby/Ruby for Crystal\n\nanyolite.github.io/anyolite\n\n### License\n\nMIT license\n\n158 stars 9 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# Anyolite/anyolite\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n4 Branches\n\n32 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\nHadewekaAddedroadmap for Anyolite 2Oct 24, 20237e58fd5 \u00b7 Oct 24, 2023Oct 24,\n2023\n\n## History\n\n618 Commits  \n  \n### .github\n\n|\n\n### .github\n\n| Update problem-report.md| Oct 22, 2023  \n  \n### config_files\n\n|\n\n### config_files\n\n| Removed need for boilerplate format flag for MRI| Feb 28, 2023  \n  \n### examples\n\n|\n\n### examples\n\n| Added class property wrappers| Jun 5, 2023  \n  \n### glue\n\n|\n\n### glue\n\n| Fixed some problems with enums and errors| Apr 1, 2023  \n  \n### src\n\n|\n\n### src\n\n| Fixed warnings for mruby Regex wrapping| Sep 24, 2023  \n  \n### utility\n\n|\n\n### utility\n\n| Updated to mruby 3.2.0| Feb 27, 2023  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| Fixed Windows for mruby implementation| Sep 13, 2021  \n  \n### .gitmodules\n\n|\n\n### .gitmodules\n\n| Removed submodule| Aug 7, 2020  \n  \n### Changelog.md\n\n|\n\n### Changelog.md\n\n| Updated changelog for 1.1.0| Jun 5, 2023  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| Initial commit| Jul 23, 2020  \n  \n### README.md\n\n|\n\n### README.md\n\n| Addedroadmap for Anyolite 2| Oct 24, 2023  \n  \n### Rakefile.rb\n\n|\n\n### Rakefile.rb\n\n| Fixed default settings with wrong mruby version| Jun 5, 2023  \n  \n### anyolite.cr\n\n|\n\n### anyolite.cr\n\n| Renamed MrbWrap to Anyolite| Apr 5, 2021  \n  \n### install.cr\n\n|\n\n### install.cr\n\n| Don't throw away exit code of rake in installer. (#37)| Oct 22, 2023  \n  \n### shard.yml\n\n|\n\n### shard.yml\n\n| Updated changelog for 1.1.0| Jun 5, 2023  \n  \n### test.cr\n\n|\n\n### test.cr\n\n| Added class property wrappers| Jun 5, 2023  \n  \n## Repository files navigation\n\n# Anyolite\n\nAnyolite is a Crystal shard which adds a fully functional mruby (or even\nregular Ruby) interpreter to Crystal.\n\n# Description\n\nAnyolite allows for wrapping Crystal classes and functions into Ruby with\nlittle effort. This way, Ruby can be used as a scripting language to Crystal\nprojects, with the major advantage of a similar syntax.\n\nUseful links for an overview:\n\n  * Demo project: https://github.com/Anyolite/ScapoLite\n  * Wiki: https://github.com/Anyolite/anyolite/wiki\n  * Documentation: https://anyolite.github.io/anyolite\n\n# Features\n\n  * Bindings to an mruby interpreter\n  * Near complete support to regular Ruby as alternative implementation (also known as MRI or CRuby)\n  * Wrapping of nearly arbitrary Crystal classes and methods to Ruby\n  * Easy syntax without unnecessary boilerplate code\n  * Simple system to prevent garbage collector conflicts\n  * Support for keyword arguments and default values\n  * Objects, arrays, hashes, structs, enums and unions as function arguments and return values are completely valid\n  * Ruby methods can be called at runtime as long as all their possible return value types are known\n  * Ruby closures can be handled as regular variables\n  * Methods and constants can be excluded, modified or renamed with annotations\n  * Options to compile scripts directly into the executable\n\n# Prerequisites\n\nYou need to have the following programs installed (and in your PATH variable,\nif you are on Windows):\n\n  * Ruby (for building mruby)\n  * Rake (for building the whole project)\n  * Git (for downloading mruby)\n  * GCC or Microsoft Visual Studio 19 (for building the object files required for Anyolite, depending on your OS)\n\n## Using regular Ruby instead of mruby\n\nIt is possible to use Anyolite with regular Ruby (MRI) instead of mruby. An\ninstruction to install MRI can be found at Using Ruby instead of mruby in the\nwiki.\n\n# Installing\n\nPut this shard as a requirement into your shard.yml project file and then call\n\n    \n    \n    shards install\n\nfrom a terminal.\n\nAlternatively, you can clone this repository into the lib folder of your\nproject and run\n\n    \n    \n    rake build_shard\n\nmanually from a terminal or the MSVC Developer Console (on Windows) to install\nthe shard without using the crystal shards program.\n\nIf you want to use other options for Anyolite, visit Changing build\nconfigurations in the wiki.\n\n# How to use\n\nImagine a Crystal class for a really bad RPG:\n\n    \n    \n    module RPGTest class Entity property hp : Int32 def initialize(@hp : Int32) end def damage(diff : Int32) @hp -= diff end def yell(sound : String, loud : Bool = false) if loud puts \"Entity yelled: #{sound.upcase}\" else puts \"Entity yelled: #{sound}\" end end def absorb_hp_from(other : Entity) @hp += other.hp other.hp = 0 end end end\n\nNow, you want to wrap this class in Ruby. All you need to do is to execute the\nfollowing code in Crystal (current commit; see documentation page for the\nversion of the latest release):\n\n    \n    \n    require \"anyolite\" Anyolite::RbInterpreter.create do |rb| Anyolite.wrap(rb, RPGTest) rb.load_script_from_file(\"examples/hp_example.rb\") end\n\nWell, that's it already. The last line in the block calls the following\nexample script:\n\n    \n    \n    a = RPGTest::Entity.new(hp: 20) a.damage(diff: 13) puts a.hp b = RPGTest::Entity.new(hp: 10) a.absorb_hp_from(other: b) puts a.hp puts b.hp b.yell(sound: 'Ouch, you stole my HP!', loud: true) a.yell(sound: 'Well, take better care of your public attributes!')\n\nThe example above gives a good overview over the things you can already do\nwith Anyolite. More features will be added in the future.\n\n# Limitations\n\nSee Limitations and solutions in the Wiki section for a detailed list.\n\n# Why this name?\n\nhttps://en.wikipedia.org/wiki/Anyolite\n\nIn short, it is a rare variant of the crystalline mineral called zoisite, with\nruby and other crystal shards (of pargasite) embedded.\n\nThe term 'anyoli' means 'green' in the Maasai language, thus naming\n'anyolite'.\n\n# Roadmap\n\n## Upcoming releases\n\n### Version 1.1.1\n\n#### Usability\n\n  * Added errors when Rake fails at installing\n\n#### Bugfixes\n\n  * Fix Regex wrapper warnings when running Anyolite with newer Crystal versions\n\n### Version 2.0.0\n\nIMPORTANT: Version 2.0.0 will introduce breaking changes to improve the\ngeneral user experience.\n\nThis means that the build process and some parts of the API will change. There\nwill be a dedicated section in the Wiki for migrating from Anyolite 1 to\nAnyolite 2, so compatibility can easily be restored.\n\nThe list of features for Anyolite 2 will expand over time, while development\non Anyolite 1 continues until Anyolite 2 is released.\n\n#### Breaking changes\n\n  * Discard postinstall option in favor of more sophisticated build script\n  * Simplify building with custom options\n  * Set optional arguments being keywords for method as default\n\n#### Usability\n\n  * Add Wiki section about migrating from Anyolite 1\n\n### Later releases\n\n  * Automated generation of Ruby documentations for wrapped functions\n  * MRI support on Windows (does currently not work for some reason)\n  * MRI support for version 3.1.0 and up\n  * Support and continuous integration for Mac\n  * Support for bindings using Data and Struct from Ruby\n  * Multiple interpreters for mruby\n  * Add option to make script calls thread-safe\n\n### Wishlist, entries might not be possible to implement\n\n  * Splat argument and/or arbitrary keyword passing\n  * Support for slices and bytes\n  * Classes as argument type\n  * Resolve context even in generic type union arguments\n  * General improvement of type resolution\n  * Bignum support\n  * Range support\n\n## About\n\nEmbedded mruby/Ruby for Crystal\n\nanyolite.github.io/anyolite\n\n### Topics\n\nruby crystal scripting mruby\n\n### Resources\n\nReadme\n\n### License\n\nMIT license\n\nActivity\n\nCustom properties\n\n### Stars\n\n158 stars\n\n### Watchers\n\n5 watching\n\n### Forks\n\n9 forks\n\nReport repository\n\n## Releases 32\n\nAnyolite version 1.1.0 Latest\n\nJun 5, 2023\n\n\\+ 31 releases\n\n## Packages 0\n\nNo packages published\n\n## Contributors 3\n\n  * Hadeweka Philipp Schulz\n  * ahrushetskyi Andrii H\n  * stellarpower\n\n## Languages\n\n  * Crystal 89.5%\n  * C 7.4%\n  * Ruby 3.1%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
