{"aid": "40252851", "title": "OpenZFS 2.2.4 \u2013 Linux and FreeBSD \u2013 Advanced file system and volume manager", "url": "https://github.com/openzfs/zfs/releases/tag/zfs-2.2.4", "domain": "github.com/openzfs", "votes": 1, "user": "neustradamus", "posted_at": "2024-05-03 21:56:26", "comments": 0, "source_title": "Release zfs-2.2.4 \u00b7 openzfs/zfs", "source_text": "Release zfs-2.2.4 \u00b7 openzfs/zfs \u00b7 GitHub\n\nSkip to content\n\n## Navigation Menu\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nopenzfs / zfs Public\n\n  * Notifications\n  * Fork 1.7k\n  * Star 10.1k\n\n# zfs-2.2.4\n\nLatest\n\nLatest\n\ntonyhutter released this 02 May 22:55\n\n\u00b7 476 commits to master since this release\n\nzfs-2.2.4\n\n2566592\n\n#### Supported Platforms\n\n  * Linux: compatible with 3.10 - 6.8 kernels\n  * FreeBSD: compatible with releases starting from 12.2-RELEASE\n\n#### Changes\n\n  * Fix updating the zvol_htable when renaming a zvol #16127 #16128\n  * Add prefetch property #15237 #15436\n  * vdev probe to slow disk can stall mmp write checker #15839\n  * Extend import_progress kstat with a notes field #15539\n  * Add ashift validation when adding devices to a pool #15509\n  * Fix arcstats for FreeBSD after zfetch support #16141\n  * Add zfetch stats in arcstats #16094\n  * Use ASSERT0P() to check that a pointer is NULL. #15225\n  * GCC: Fixes for gcc 14 on Fedora 40 #16124 #16125\n  * Python 3.12 deprecated python3-distutils #16126 #16129\n  * zfs-kmod: fix empty rpm requires/conflicts #16121\n  * ZTS: user_namespace_004.ksh avoid error in cleanup if unsupported #16114\n  * Add newline to two zpool messages #16113\n  * Do no use .cfi_negate_ra_state within the assembly on Arm64 #14965 #15784\n  * Add the BTI elf note to the AArch64 SHA2 assembly #16086\n  * AUTHORS: refresh with recent new contributors #16079\n  * return NULL at end of send_progress_thread #16074\n  * Fix locale-specific time #15878 #15879\n  * Fix panics when truncating/deleting files #15983\n  * vdev props comment and manpage should include zfsd and FreeBSD mentions #15968\n  * Add slow disk diagnosis to ZED #15469\n  * [2.2.4-only] Stub RAIDZ enums to prevent conflicts\n  * zap_leaf: make l_hash[] variable length to silence UBSAN #15964\n  * Give a better message from 'zpool get' with invalid pool name #15942\n  * xdr: header cleanup #16047 #16051\n  * Fix buffer underflow if sysfs file is empty #16028 #16035\n  * ZTS: fix flakiness in cp_files_002_pos #16029\n  * Fix option string, adding -e and fixing order #16008\n  * freebsd: fix missing headers in distribution tarball #15963\n  * Check for minimum partition size #15898\n  * Add VERIFY0P() and ASSERT0P() macros. #15225\n  * Clean up existing VERIFY*() macros. #15225\n  * etc/init.d: decide which variant to use at build time. #15977\n  * config/Substfiles.am: restrict to the dedicated list. #15980\n  * man: move zfs_prepare_disk.8 to nodist_man_MANS #15979\n  * Add support for zfs mount -R #16015\n  * Linux 6.9 compat: blk_alloc_disk() now takes two args #16027 #16033\n  * Linux 6.9 compat: bdev handles are now struct file #16027 #16033\n  * vdev_disk: clean up spa/bdev mode conversion #15995\n  * Linux 5.18+ compat: Detect filemap_range_has_page #16034\n  * udev: correctly handle partition #16 and later #15904 #15970\n  * zvols: prevent overflow of minor device numbers #16006\n  * Linux 6.8 compat: META (#16099)\n  * bdev_discard_supported: understand discard_granularity=0\n  * L2ARC: Relax locking during write #16040\n  * Small fix to prefetch ranges aggregation #16072\n  * Remove db_state DB_NOFILL checks from syncing context #16057\n  * Speculative prefetch for reordered requests #16022\n  * Fix read errors race after block cloning #16052\n  * Improve dbuf_read() error reporting #16042\n  * BRT: Check pool clone stats in more tests #16007\n  * BRT: Fix tests to work on non-empty pools #16007\n  * BRT: Fix holes cloning. #15994 #16007\n  * BRT: Skip getting length in brt_entry_lookup() #15950\n  * BRT: Make BRT block sizes configurable #15967\n  * BRT: Relax brt_pending_apply() locking #15955\n  * ZAP: Massively switch to _by_dnode() interfaces #15951\n  * BRT: Skip duplicate BRT prefetches #15941\n  * ZAP: Some cleanups/micro-optimizations #15976\n  * BRT: Change brt_pending_tree sorting order #15954\n  * Update resume token at object receive. #15927\n  * Linux: Cleanup taskq threads spawn/exit #15873\n  * Refactor dmu_prefetch(). #15076\n  * ZIL: Update Linux tracing after #15635 #15730\n  * ZIL: Improve next log block size prediction #15635\n  * ZIO: Optimize zio_flush() #15515\n  * ZIL: Detect single-threaded workloads #15381\n  * zvol_os: fix compile with blk-mq on Linux 4.x #16069\n  * zvol_os: fix build on Linux <3.13 #16062\n  * zvol: use multiple taskq #15992\n  * vdev_disk: fix alignment check when buffer has non-zero starting offset\n  * vdev_disk: ensure trim errors are returned immediately\n  * vdev_disk: don't touch vbio after its handed off to the kernel\n  * Fix corruption caused by mmap flushing problems #15933 #16019\n  * vdev_disk: default to classic submission for 2.2.x\n  * abd_iter_page: don't use compound heads on Linux <4.5 #15533 #15588\n  * vdev_disk: use bio_chain() to submit multiple BIOs #15533 #15588\n  * vdev_disk: add module parameter to select BIO submission method #15533 #15588\n  * vdev_disk: rewrite BIO filling machinery to avoid split pages #15533 #15588\n  * vdev_disk: make read/write IO function configurable #15533 #15588\n  * vdev_disk: reorganise vdev_disk_io_start #15533 #15588\n  * vdev_disk: rename existing functions to vdev_classic_* #15533 #15588\n  * abd: add page iterator #15533 #15588\n  * linux 5.4 compat: page_size() #15533 #15588\n  * Linux 6.8 compat: use splice_copy_file_range() for fallback #15930 #15931\n\n44 people reacted\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
