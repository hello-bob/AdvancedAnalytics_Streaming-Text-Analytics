{"aid": "40214939", "title": "Run0", "url": "https://www.freedesktop.org/software/systemd/man/devel/run0.html", "domain": "freedesktop.org", "votes": 2, "user": "todsacerdoti", "posted_at": "2024-04-30 19:07:29", "comments": 0, "source_title": "run0", "source_text": "run0\n\nIndex \u00b7 Directives systemd 256~rc1\n\n## Name\n\nrun0 \u2014 Elevate privileges\n\n## Synopsis\n\nrun0 [OPTIONS...] [COMMAND...]\n\n## Description\u00b6\n\nrun0 may be used to temporarily and interactively acquire elevated or\ndifferent privileges. It serves a similar purpose as sudo(8), but operates\ndifferently in a couple of key areas:\n\n  * No execution or security context credentials are inherited from the caller into the invoked commands, as they are invoked from a fresh, isolated service forked off the service manager.\n\n  * Authentication takes place via polkit, thus isolating the authentication prompt from the terminal (if possible).\n\n  * An independent pseudo-tty is allocated for the invoked command, detaching its lifecycle and isolating it for security.\n\n  * No SetUID/SetGID file access bit functionality is used for the implementation.\n\nAltogether this should provide a safer and more robust alternative to the sudo\nmechanism, in particular in OS environments where SetUID/SetGID support is not\navailable (for example by setting the NoNewPrivileges= variable in systemd-\nsystem.conf(5)).\n\nAny session invoked via run0 will run through the \"systemd-run0\" PAM stack.\n\nNote that run0 is implemented as an alternative multi-call invocation of\nsystemd-run(1).\n\n## Options\u00b6\n\nThe following options are understood:\n\n\\--no-ask-password\u00b6\n\n    \n\nDo not query the user for authentication for privileged operations.\n\nAdded in version 256.\n\n\\--unit=\u00b6\n\n    \n\nUse this unit name instead of an automatically generated one.\n\nAdded in version 256.\n\n\\--property=\u00b6\n\n    \n\nSets a property on the service unit that is created. This option takes an\nassignment in the same format as systemctl(1)'s set-property command.\n\nAdded in version 256.\n\n\\--description=\u00b6\n\n    \n\nProvide a description for the service unit that is invoked. If not specified,\nthe command itself will be used as a description. See Description= in\nsystemd.unit(5).\n\nAdded in version 256.\n\n\\--slice=\u00b6\n\n    \n\nMake the new .service unit part of the specified slice, instead of user.slice.\n\nAdded in version 256.\n\n\\--slice-inherit\u00b6\n\n    \n\nMake the new .service unit part of the slice the run0 itself has been invoked\nin. This option may be combined with --slice=, in which case the slice\nspecified via --slice= is placed within the slice the run0 command is invoked\nin.\n\nExample: consider run0 being invoked in the slice foo.slice, and the --slice=\nargument is bar. The unit will then be placed under foo-bar.slice.\n\nAdded in version 256.\n\n\\--user=, -u, --group=, -g\u00b6\n\n    \n\nSwitches to the specified user/group instead of root.\n\nAdded in version 256.\n\n\\--nice=\u00b6\n\n    \n\nRuns the invoked session with the specified nice level.\n\nAdded in version 256.\n\n\\--chdir=, -D\u00b6\n\n    \n\nRuns the invoked session with the specified working directory. If not\nspecified defaults to the client's current working directory if switching to\nthe root user, or the target user's home directory otherwise.\n\nAdded in version 256.\n\n\\--setenv=NAME[=VALUE]\u00b6\n\n    \n\nRuns the invoked session with the specified environment variable set. This\nparameter may be used more than once to set multiple variables. When \"=\" and\nVALUE are omitted, the value of the variable with the same name in the\ninvoking environment will be used.\n\nAdded in version 256.\n\n\\--background=COLOR\u00b6\n\n    \n\nChange the terminal background color to the specified ANSI color as long as\nthe session lasts. If not specified, the background will be tinted in a\nreddish tone when operating as root, and in a yellowish tone when operating\nunder another UID, as reminder of the changed privileges. The color specified\nshould be an ANSI X3.64 SGR background color, i.e. strings such as \"40\", \"41\",\n..., \"47\", \"48;2;...\", \"48;5;...\". See ANSI Escape Code (Wikipedia) for\ndetails. Set to an empty string to disable.\n\nExample: \"--background=44\" for a blue background.\n\nAdded in version 256.\n\n-M, --machine=\u00b6\n    \n\nExecute operation on a local container. Specify a container name to connect\nto, optionally prefixed by a user name to connect as and a separating \"@\"\ncharacter. If the special string \".host\" is used in place of the container\nname, a connection to the local system is made (which is useful to connect to\na specific user's user bus: \"--user --machine=lennart@.host\"). If the \"@\"\nsyntax is not used, the connection is made as root user. If the \"@\" syntax is\nused either the left hand side or the right hand side may be omitted (but not\nboth) in which case the local user name and \".host\" are implied.\n\n-h, --help\u00b6\n    \n\nPrint a short help text and exit.\n\n\\--version\u00b6\n\n    \n\nPrint a short version string and exit.\n\nAll command line arguments after the first non-option argument become part of\nthe command line of the launched process. If no command line is specified an\ninteractive shell is invoked. The shell to invoke may be controlled via\n--setenv=SHELL=... and currently defaults to the originating user's shell\n(i.e. not the target user's!) if operating locally, or /bin/sh when operating\nwith --machine=.\n\n## Exit status\u00b6\n\nOn success, 0 is returned. If run0 failed to start the session or the\nspecified command fails, a non-zero return value will be returned.\n\n## See Also\u00b6\n\nsystemd(1), systemd-run(1), sudo(8), machinectl(1)\n\n", "frontpage": false}
