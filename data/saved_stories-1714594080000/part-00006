{"aid": "40221765", "title": "JPEG XL and Google's War Against It", "url": "https://vale.rocks/blog/JPEG_XL_And_Googles_War_Against_It", "domain": "vale.rocks", "votes": 2, "user": "OuterVale", "posted_at": "2024-05-01 11:13:56", "comments": 0, "source_title": "JPEG XL And Google's War Against It", "source_text": "Vale\n\nBlog\n\nJPEG XL And Google's War Against It | Vale.Rocks\n\nEssay\n\n# JPEG XL And Google's War Against It\n\n  * 01 May, 2024\n  * 1997 words\n  * 7 minute read\n\nThere is no doubt you're familiar with GIFs, PNGs, and JPEGs. These image\nformats have been the way to display images on computers for decades. Chances\nare you see hundreds, if not thousands, of them every day while you browse the\nweb.\n\nYet these formats aren't quite as ubiquitous as they once were, and we've seen\nmany competing standards materialise in the past few years. Perhaps most\npromising is JPEG XL, yet its innovation seems to go unrecognised and its\nadoption is stifled. But why? To get a full picture, I think it's best we\nstart with the advent of displaying images on computers.\n\n## A Brief History\n\nSince we've had computers, we've been trying to display images on them. We\nstarted by using characters and symbols to bodge things together in terminals.\nThis obviously wasn't ideal and merely means to an end. The first actual image\nformats to see any form of popularity included TGA, PICT, and BMP.\n\nEarly formats were rudimentary. They largely lacked compression and weren't\nwidely supported. It was an era when every piece of software rolled their own\nformat and interoperability wasn't a priority. This was an issue, and as the\nneed for greater compatibility grew, some proper standards formed. Of these,\nthe main that prospered are GIF, JPEG, and PNG.\n\nGIF, short for Graphics Interchange Format, is messy. It released in the '80s,\nuses the simple Lempel\u2013Ziv\u2013Welch compression algorithm, and is limited to a\nmeagre 256 colour palette. Sure, it looks pretty bad, but it's managed to\nstick around thanks to its great software support and animation capabilities.\n\nJPEG, also referred to as JPG and short for Joint Photographic Experts Group,\ncame out in the early '90s. While it does have a lossless variant, it is\nlargely used as a lossy format. However, the degree of compression can be\ncontrolled, unlike many other formats, which allows users to select the trade\noff between quality and size. It's great compression and early debut led to it\nbecoming the most widely used format.\n\nAn attempt was made to supersede JPEG with the very retro futuristic sounding,\nbut ultimately ill fated, \"JPEG 2000\". It had some neat features and\nfunctionality, such as being able to compress specific sections independently,\nbut never saw widespread adoption.\n\nDuring the '90s, following GIF's widespread adoption, the Unisys Corporation,\nwhich owned the patent on the Lempel\u2013Ziv\u2013Welch compression algorithm used by\nGIFs, attempted to enforce its licensing. This ultimately led to much\ndiscourse, and a more open, improved alternative was developed. It was aptly\nunofficially dubbed \"PNG's Not GIF\", which, of course, abbreviates to the\nrecursive acronym PNG, though officially, it stands for \"Portable Network\nGraphics\". The format spread due to its free, open nature, and good support\nfor transparency by means of an alpha layer.\n\nThese three standards all got secure footing in the web and defined themselves\nas the image formats for many years. They weren't perfect, but they've worked\nand seen great support.\n\n## A New Age\n\nIt isn't all sunshine and roses for them, though. As GIF, PNG, and JPEG have\naged, the world has moved around them. Back when these formats were devised,\ncomputing power was a scarce resource. Many devices didn't hold the power to\ncompress things on the fly without performance implications, and the web was\nin its infancy.\n\nOver the past 30 odd years, our devices, software, and knowledge of them have\ncome a long way, yet those ageing formats still remain. That's why, in recent\nyears, we've seen a shift to new formats. Ones that aren't limited to\ncompression algorithms of the '90s, and are instead both more optimised and\nmore usable.\n\n### Enter WebP\n\nIn 2010, two years after the release of their Chrome browser, Google announced\nWebP. They proceeded to develop and refine it until its eventual stable\nrelease in 2018. The goal was simple. Make a format with the same quality as\nJPEG, with the transparency of a PNG, and the animation of a GIF, that's\nsmall.\n\nAs expected for a Google product, it very quickly gained support in Chromium,\neven before its stable release. Safari and Firefox didn't adopt support until\nafter its stable release, but it now sees complete browser support. Once all\nbrowsers got support, Google very quickly began working to snuff out other\nformats. They made changes such as updating PageSpeed Insights to suggest that\nsites serve images as WebP files.\n\n### Announcing AVIF\n\nAbout a year after WebP's introduction, a competing standard, AVIF, had its\nfirst full release. The intention was for the format to succeed WebP, and\nwhile it did implement features such as HDR, which wasn't present in WebP, it\nalso lacked features such as multi page support. Realistically, this places it\nin no man's land. It's not clearly better than the standards it's competing\nagainst.\n\nAVIF also uses AV1 video compression. As you might imagine, videos and still\nimages call for different styles of compression. Video is most concerned with\ncompressing information throughout multiple frames, whereas image compression\nis a lot more concerned with compression within a single picture.\n\nThat said, AVIF managed to see quick adoption. In August of 2020, Chromium\nreceived support, with Firefox enabling support in October 2021 and Safari\nimplementing support throughout 2022.\n\n### Introducing JPEG XL\n\nJPEG XL is a rather new format, having been finalised in 2021. It's created by\nthe same group as the original JPEG, and is intended as a catchall image\nformat. Looking at Wikipedia's Comparison of Graphics File Formats, it's\nevident that it trumps every other raster image format.\n\nSome of it's many features include:\n\n  * Choice of lossy or lossless compression.\n  * Perfectly reversible, lossless conversion from JPEG with ~20% savings.\n  * ~60% smaller file sizes than JPEG at the same quality when using lossy compression.\n  * Negligible compression artefacts when using lossy compression.\n  * Great colour gamut support, including HDR, and support for other channels.\n  * Super fast encoding and decoding.\n  * Support for progressive decoding.\n  * Tiny file header at a mere 12 bytes.\n  * Everything WebP and AVIF boasts, including transparency, animations, and such.\n  * Licensed openly with no royalties.\n  * Up to 32 bit depth\n  * Insanely high maximum resolution up to 1,152,921,502,459 megapixels (that's over a trillion pixels total).\n  * Resilient against generational loss.\n\nFrom reading those points, you may have gathered that it does everything that\ncould be expected of a format and does it well. Given that it excels in every\ncontext, you might expect that it'd be the de facto standard, yet, alas, it\nsees minimal browser support.\n\nSo, why were WebP and AVIF picked up so quickly when JPEG XL wasn't? Well, as\nyou may have surmised from the article's title, it's down to Google.\n\n## Google's Exploitation of Their Dominance\n\nI'll be discussing Chrome's dominance and Google's exploitation of it for\ntheir own gain. I've written about this at length in my article Everything Is\nChrome, which I advise you read prior to this section.\n\nGoogle has cemented itself as the single controlling force of the web. What\nthey say goes. Google Search is the most popular search engine, and Chromium\nis the base for the majority of browsers. This means they control both what\npages get recommended in search, and how they're displayed in browser.\n\nThis leaves them with a lot of power. If they take issue with JPEG XL, then\nthey can single handedly stop its adoption, and that's exactly what they've\ndone. At one point, Google actually did add support for JPEG XL to Chromium\nbehind a flag. It was implemented and functional in Chromium. This prompted\nFirefox to add their own support.\n\nHowever, it never made it past the opt in flag support stage, and Google\neventually removed it, stating in the Chromium Issue Tracker:\n\n> \"Thank you everyone for your comments and feedback regarding JPEG XL. We\n> will be removing the JPEG XL code and flag from Chromium for the following\n> reasons:\n>\n>   * Experimental flags and code should not remain indefinitely\n>   * There is not enough interest from the entire ecosystem to continue\n> experimenting with JPEG XL\n>   * The new image format does not bring sufficient incremental benefits over\n> existing formats to warrant enabling it by default\n>   * By removing the flag and the code in M110, it reduces the maintenance\n> burden and allows us to focus on improving existing formats in Chrome\"\n>\n\nThis rightly caused an uproar. Users pointed out many flaws in their claims.\nFirstly, that there has been a huge interest in the standard from a huge\nnumber of individuals and organisations, and secondly, the innovation brought\nby JPEG XL was most definitely \"sufficient incremental benefits\", especially\nas they had recently accepted AVIF, which was more lacking in features than\nexisting standards.\n\nWhat this really translates to is, \"We've created WebP, a competing standard,\nand want to kill anything that might genuinely compete with it\". This would\nalso explain why they adopted AVIF but not JPEG XL. AVIF wasn't superior in\nevery way and, as such, didn't threaten to dethrone WebP.\n\nJPEG XL, however, is better than WebP in every quantifiable way and would\nobsolete it. AVIF also serves as something to point to should they be called\nout for stifling competition and innovation as they are. They can simply say,\n\"We love other formats. Look, we added another one just the other year\".\n\nInterestingly, Firefox, which receives a pretty decent amount of funding from\nGoogle, quietly dropped focus on implementing JPEG XL support and now state\nthat they are \"neutral\" on the matter, although the flag is still present in\nthe nightly version of the browser. Safari, which is developed by Apple\nseparately from Google, managed to implement JPEG XL support with no issues,\nand it's available in WebKit without limitation.\n\nMany forks of Chromium and Firefox also include support with no ill effect.\nFirefox based browsers simply enable the flag, and Chromium based browsers\njust use the implementation prior to removal. Some of the forks with support\ninclude Thorium, Waterfox, and Pale Moon. The code is written and working, and\nboth use external implementations, so the cited \"maintenance burden\" is really\nnonexistent.\n\n### Why WebP?\n\nSo, Google sabotaged JPEG XL in favour of their own format, WebP. The question\nis, why? Well, I think that's pretty clear. Google wants control, and JPEG XL\ncould take that away from them. They already have unrivalled control over the\nweb, so why not expand that just a bit more?\n\nShould Google decide they need to make some alterations to the format to\nbenefit themselves, there is nothing standing in their way. They've got\ncontrol over the standard and can make tweaks if needed. Especially the sort\nof business minded tweaks that are employed to better align with stakeholder\ninterests.\n\nGoogle could also stop supporting the format outside their products and\nservices, leading to them faltering and falling out of compatibility. This\ncould lead to fragmentation and compatibility issues in non-Google software,\npotentially pushing users to move to Google's offerings where support is\noffered.\n\n## Taking Action\n\nIt may seem futile, but I believe that if we raise awareness of the issue and\nput enough public pressure on Google and, to a lesser extent, Mozilla, they\nwill begin to support JPEG XL. Use browsers that support the format, or toggle\non the flag if possible. Spruik the benefits of the format wherever you can\nattract attention, and start using it in the various software that already\nsupports it. The more demand, the more adoption we'll see.\n\nThis is an effort that is worth fighting for. Google has trampled innovation\nfar too many times in the pursuit of control for us to allow them to do it\nagain. We must condemn this behaviour and fight these monopolistic practices\nat every turn to prevent stifling progress in the name of corporate control.\n\nIf you liked this article, then do consider sharing it, both for my own\nbenefit and to raise awareness. Also, if you'd like to see me produce more\ncontent like this, then consider sending me a tip. It'd mean a lot.\n\n", "frontpage": false}
