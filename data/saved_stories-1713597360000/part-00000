{"aid": "40093692", "title": "Video codec written in C89 using wavelets (not DCT), comparable to MPEG-1/2", "url": "https://github.com/LMP88959/Digital-Subband-Video-1", "domain": "github.com/lmp88959", "votes": 2, "user": "mapak25", "posted_at": "2024-04-20 01:15:51", "comments": 0, "source_title": "GitHub - LMP88959/Digital-Subband-Video-1: DSV1 is a simple video codec using wavelets and block-based motion compensation. It is comparable to MPEG-1/MPEG-2 in terms of efficiency and quality.", "source_text": "GitHub - LMP88959/Digital-Subband-Video-1: DSV1 is a simple video codec using\nwavelets and block-based motion compensation. It is comparable to\nMPEG-1/MPEG-2 in terms of efficiency and quality.\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\nLMP88959 / Digital-Subband-Video-1 Public\n\n  * Notifications\n  * Fork 0\n  * Star 3\n\nDSV1 is a simple video codec using wavelets and block-based motion\ncompensation. It is comparable to MPEG-1/MPEG-2 in terms of efficiency and\nquality.\n\n### License\n\nView license\n\n3 stars 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# LMP88959/Digital-Subband-Video-1\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n1 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\nLMP88959Update README.mdApr 19, 2024853bfe2 \u00b7 Apr 19, 2024Apr 19, 2024\n\n## History\n\n8 Commits  \n  \n### DSV1_encoder.pdf\n\n|\n\n### DSV1_encoder.pdf\n\n| Added PDFs| Apr 19, 2024  \n  \n### DSV1_spec.pdf\n\n|\n\n### DSV1_spec.pdf\n\n| Added PDFs| Apr 19, 2024  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| Add LICENSE| Apr 19, 2024  \n  \n### README.md\n\n|\n\n### README.md\n\n| Update README.md| Apr 19, 2024  \n  \n### bmc.c\n\n|\n\n### bmc.c\n\n| Add source code| Apr 19, 2024  \n  \n### bs.c\n\n|\n\n### bs.c\n\n| Add source code| Apr 19, 2024  \n  \n### dsv.c\n\n|\n\n### dsv.c\n\n| Add source code| Apr 19, 2024  \n  \n### dsv.h\n\n|\n\n### dsv.h\n\n| Add source code| Apr 19, 2024  \n  \n### dsv_decoder.c\n\n|\n\n### dsv_decoder.c\n\n| Add source code| Apr 19, 2024  \n  \n### dsv_decoder.h\n\n|\n\n### dsv_decoder.h\n\n| Add source code| Apr 19, 2024  \n  \n### dsv_encoder.c\n\n|\n\n### dsv_encoder.c\n\n| Add source code| Apr 19, 2024  \n  \n### dsv_encoder.h\n\n|\n\n### dsv_encoder.h\n\n| Add source code| Apr 19, 2024  \n  \n### dsv_internal.h\n\n|\n\n### dsv_internal.h\n\n| Add source code| Apr 19, 2024  \n  \n### dsv_main.c\n\n|\n\n### dsv_main.c\n\n| Added source code| Apr 19, 2024  \n  \n### frame.c\n\n|\n\n### frame.c\n\n| Add source code| Apr 19, 2024  \n  \n### hme.c\n\n|\n\n### hme.c\n\n| Add source code| Apr 19, 2024  \n  \n### hzcc.c\n\n|\n\n### hzcc.c\n\n| Add source code| Apr 19, 2024  \n  \n### sbt.c\n\n|\n\n### sbt.c\n\n| Add source code| Apr 19, 2024  \n  \n### util.c\n\n|\n\n### util.c\n\n| Add source code| Apr 19, 2024  \n  \n### util.h\n\n|\n\n### util.h\n\n| Add source code| Apr 19, 2024  \n  \n## Repository files navigation\n\n# Digital-Subband-Video-1\n\nDSV1 is a simple video codec using wavelets and block-based motion\ncompensation. It is comparable to MPEG-1/MPEG-2 in terms of efficiency and\nquality.\n\n## DSV Features (refer to PDF in repo for more detail)\n\n  * compression using multiresolution subband analysis instead of DCT\n\n    * also known as a wavelet transform\n  * half-pixel motion compensation\n  * 4:1:1, 4:2:0, 4:2:2 and 4:4:4 chroma subsampling formats\n  * adaptive quantization\n  * intra and inter frames with variable length closed GOP\n\n    * no bidirectional prediction (also known as B-frames). Only forward prediction with previous picture as reference\n  * only form of entropy coding is interleaved exponential-golomb coding for simplicity\n  * wider range of compression than MPEG-1/2, support for lower bitrates\n\n\\--- for more detailed information please refer to the informal specification\ndocument (DSV1_spec.pdf) in the repository.\n\n## Encoder Features (specific to this implementation of the DSV spec)\n\n  * single pass average bitrate (ABR) or constant rate factor (CRF) rate control\n  * simple Human Visual System (HVS) based intra block mode determination\n  * simple scene change detection using change in average luma\n  * hierarchical motion estimation\n  * stability tracking to provide better adaptive quantization\n  * written to be compatible with C89\n\n\\--- for more detailed information please refer to the encoder information\ndocument (DSV1_encoder.pdf) in the repository.\n\n## Limitations\n\n  * no built-in interlacing support\n  * only 8 bits of depth per component supported\n  * frame sizes must be divisible by two\n\nThis code follows my self-imposed restrictions:\n\n  1. Everything must be done in software, no explicit usage of hardware acceleration.\n  2. No floating point types or literals, everything must be integer only.\n  3. No 3rd party libraries, only C standard library and OS libraries for window, input, etc.\n  4. No languages used besides C.\n  5. No compiler specific features and no SIMD.\n  6. Single threaded.\n\n## Compiling\n\nAll you need is a C compiler.\n\nIn the root directory of the project (with all the .h and .c files):\n\n    \n    \n    cc -O3 -o dsv1 *.c\n\n## Running Encoder\n\nSample output:\n\n    \n    \n    Envel Graphics DSV v1.0 compliant codec by EMMIR 2023-2024 usage: ./dsv1 e [options] sample usage: ./dsv1 -inp_video.yuv -out_compressed.dsv -w352 -h288 -fps_num24 -fps_den1 -qp85 -gop15 ------------------------------------------------------------ -qp : quality percent. 85 = default [min = 0, max = 100] -w : width of input video. 352 = default [min = 16, max = 16777216] -h : height of input video. 288 = default [min = 16, max = 16777216] -gop : Group Of Pictures length. 0 = intra frames only, 12 = default [min = 0, max = 2147483647] -fmt : chroma subsampling format of input video. 0 = 4:4:4, 1 = 4:2:2, 2 = 4:2:0, 3 = 4:1:1, 2 = default [min = 0, max = 3] -nfr : number of frames to compress. -1 means as many as possible. -1 = default [min = -1, max = 2147483647] -sfr : frame number to start compressing at. 0 = default [min = 0, max = 2147483647] -fps_num : fps numerator of input video. 30 = default [min = 1, max = 16777216] -fps_den : fps denominator of input video. 1 = default [min = 1, max = 16777216] -aspect_num : aspect ratio numerator of input video. 1 = default [min = 1, max = 16777216] -aspect_den : aspect ratio denominator of input video. 1 = default [min = 1, max = 16777216] -ipct : percentage threshold of intra blocks in an inter frame after which it is simply made into an intra frame. 50 = default [min = 0, max = 100] -pyrlevels : number of pyramid levels to use in hierarchical motion estimation. 0 means auto-determine. 0 = default [min = 0, max = 5] -rc_mode : rate control mode. 0 = single pass average bitrate (ABR), 1 = constant rate factor (CRF). 0 = default [min = 0, max = 1] -rc_hmnudge : nudge the rate control loop a bit harder in high motion scenes. 1 = default [min = 0, max = 1] -kbps : ONLY FOR ABR RATE CONTORL: bitrate in kilobits per second. 0 = auto-estimate needed bitrate for desired qp. 0 = default [min = 0, max = 2147483647] -maxqstep : max quality step for ABR, absolute quant amount. 10 = default (equivalent to 0.5%) [min = 1, max = 2047] -minqp : minimum quality percent. 1 = default [min = 0, max = 100] -maxqp : maximum quality percent. 100 = default [min = 0, max = 100] -minqp_I : minimum quality percent for intra frames. 5 = default [min = 0, max = 100] -stabref : period (in # of frames) to refresh the stability block tracking. 0 = auto-determine. 0 = default [min = 0, max = 2147483647] -scd : do scene change detection. 1 = default [min = 0, max = 1] -scdelta : scene change average luma delta threshold. Units are 8-bit luma.4 = default [min = 0, max = 256] -inp_ : REQUIRED! input file -out_ : REQUIRED! output file -y : do not prompt for confirmation when potentially overwriting an existing file -l<n> : set logging level to n (0 = none, 1 = error, 2 = warning, 3 = info, 4 = debug/all) -v : set verbose\n\n## Running Decoder\n\nSample output:\n\n    \n    \n    Envel Graphics DSV v1.0 compliant codec by EMMIR 2023-2024 usage: ./dsv1 d [options] sample usage: ./dsv1 -inp_video.dsv -out_decompressed.yuv -out420p ------------------------------------------------------------ -out420p : convert video to 4:2:0 chroma subsampling before saving output. 0 = default [min = 0, max = 1] -drawinfo : draw debugging information on the decoded frames (bit OR together to get multiple at the same time): 1 = draw stability info 2 = draw motion vectors 4 = draw intra subblocks. 0 = default [min = 0, max = 7] -inp_ : REQUIRED! input file -out_ : REQUIRED! output file -y : do not prompt for confirmation when potentially overwriting an existing file -l<n> : set logging level to n (0 = none, 1 = error, 2 = warning, 3 = info, 4 = debug/all) -v : set verbose\n\nNOTE: -inp_ and -out_ must be specified. Only .yuv files (one file containing\nall the frames) are supported as inputs to the encoder.\n\nAll arguments have no space between the -identifier and value, e.g\n-identifiervalue\n\n## Notes\n\nThis codec is by no means fully optimized, so there is a lot of room for\nperformance gains. It performs quite well for what it is though.\n\n## License\n\nThe accompanying software was designed and written by EMMIR, 2023-2024 of\nEnvel Graphics. No responsibility is assumed by the author.\n\nFeel free to use the code in any way you would like, however, if you release\nanything with it, a comment in your code/README document saying where you got\nthis code would be a nice gesture but it is not mandatory. The software is\nprovided \"as is\", without warranty of any kind, express or implied, including\nbut not limited to the warranties of merchantability, fitness for a particular\npurpose and noninfringement. In no event shall the authors or copyright\nholders be liable for any claim, damages or other liability, whether in an\naction of contract, tort or otherwise, arising from, out of or in connection\nwith the software or the use or other dealings in the software.\n\nIf you have any questions feel free to leave a comment on YouTube OR join the\nKing's Crook Discord server :)\n\nYouTube: https://www.youtube.com/@EMMIR_KC/videos\n\nDiscord: https://discord.gg/hdYctSmyQJ\n\nitch.io: https://kingscrook.itch.io/kings-crook\n\n## Example videos:\n\nAll videos are encoded at 30fps with a GOP length of 12.\n\nMPEG-2 at 1100kbps (created using ffmpeg -s 352x288 -r 30 -i bus_cif.yuv -g 12\n-b:v 1100000 -vcodec mpeg2video bus1100kbps.mpeg) converted to MP4+H264 to be\nembeddable in the README.\n\nDSV1 at 1100kbps (created using ./dsv1 e -y -v -inp_bus_cif.yuv -out_saved.dsv\n-gop12 -w352 -h288 -fps_num30 -qp85 -kbps1100) converted to MP4+H264 to be\nembeddable in the README.\n\nMPEG-2 at 1100kbps (created using ffmpeg -s 352x288 -r 30 -i stefan_cif.yuv -g\n12 -b:v 1100000 -vcodec mpeg2video stef1100kbps.mpeg) converted to MP4+H264 to\nbe embeddable in the README.\n\nDSV1 at 1100kbps (created using ./dsv1 e -y -v -inp_stefan_cif.yuv\n-out_saved.dsv -gop12 -w352 -h288 -fps_num30 -qp85 -kbps1100) converted to\nMP4+H264 to be embeddable in the README.\n\nMPEG-2 at 1100kbps (created using ffmpeg -s 352x288 -r 30 -i husky_cif.yuv -g\n12 -b:v 1100000 -vcodec mpeg2video husky1100kbps.mpeg) converted to MP4+H264\nto be embeddable in the README.\n\nDSV1 at 1100kbps (created using ./dsv1 e -y -v -inp_husky_cif.yuv\n-out_saved.dsv -gop12 -w352 -h288 -fps_num30 -qp85 -kbps1100) converted to\nMP4+H264 to be embeddable in the README.\n\n## About\n\nDSV1 is a simple video codec using wavelets and block-based motion\ncompensation. It is comparable to MPEG-1/MPEG-2 in terms of efficiency and\nquality.\n\n### Resources\n\nReadme\n\n### License\n\nView license\n\nActivity\n\n### Stars\n\n3 stars\n\n### Watchers\n\n1 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Releases 1\n\nDSV1 Version 1.0 Latest\n\nApr 19, 2024\n\n## Packages 0\n\nNo packages published\n\n## Languages\n\n  * C 100.0%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
