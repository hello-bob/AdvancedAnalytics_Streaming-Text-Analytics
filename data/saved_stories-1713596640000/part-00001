{"aid": "40093619", "title": "Show HN: I built a small utility that handles multiple browser instances for you", "url": "https://github.com/amirkarimi/browser-hub", "domain": "github.com/amirkarimi", "votes": 2, "user": "4m1rk", "posted_at": "2024-04-20 01:03:18", "comments": 0, "source_title": "GitHub - amirkarimi/browser-hub: A Browser wrapper that allows you manage multiple browser instances hassle-free", "source_text": "GitHub - amirkarimi/browser-hub: A Browser wrapper that allows you manage\nmultiple browser instances hassle-free\n\nSkip to content\n\nSign in\n\n# Search code, repositories, users, issues, pull requests...\n\nSearch syntax tips\n\nSign in\n\nSign up\n\nYou signed in with another tab or window. Reload to refresh your session. You\nsigned out in another tab or window. Reload to refresh your session. You\nswitched accounts on another tab or window. Reload to refresh your session.\nDismiss alert\n\namirkarimi / browser-hub Public\n\n  * Notifications\n  * Fork 0\n  * Star 0\n\nA Browser wrapper that allows you manage multiple browser instances hassle-\nfree\n\n### License\n\nMIT license\n\n0 stars 0 forks Branches Tags Activity\n\nStar\n\nNotifications\n\n# amirkarimi/browser-hub\n\nThis commit does not belong to any branch on this repository, and may belong\nto a fork outside of the repository.\n\n1 Branch\n\n1 Tags\n\n## Folders and files\n\nName| Name| Last commit message| Last commit date  \n---|---|---|---  \n  \n## Latest commit\n\namirkarimiUpdate READMEApr 20, 2024baff8fe \u00b7 Apr 20, 2024Apr 20, 2024\n\n## History\n\n4 Commits  \n  \n### .github/workflows\n\n|\n\n### .github/workflows\n\n| Fix publish workflow| Apr 19, 2024  \n  \n### .vscode\n\n|\n\n### .vscode\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### src/browser_hub\n\n|\n\n### src/browser_hub\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### .gitignore\n\n|\n\n### .gitignore\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### LICENSE\n\n|\n\n### LICENSE\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### README.md\n\n|\n\n### README.md\n\n| Update README| Apr 20, 2024  \n  \n### browser-hub-diagram.drawio\n\n|\n\n### browser-hub-diagram.drawio\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### browser-hub-diagram.png\n\n|\n\n### browser-hub-diagram.png\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### browsers.png\n\n|\n\n### browsers.png\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### pyproject.toml\n\n|\n\n### pyproject.toml\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n### requirements.txt\n\n|\n\n### requirements.txt\n\n| Init \ud83c\udf89| Apr 19, 2024  \n  \n## Repository files navigation\n\nNote\n\nThis program is tested on Ubuntu 22.04 and Chrome but same concept applies to\nother OSes and browsers.\n\n## Problem\n\nAs consultants, we usually work with multiple clients. Separating the work\nisn't difficult until you start using the browser. For example, they might\nhave different Google/Outlook accounts. Add to that your personal account, and\nit quickly becomes a mess to handle in the same browser. Another thing is the\nbrowser extensions. Imagine you and all your clients are using Toggl extension\nto track the time, and you should use a different account for each.\n\nYou would be able to use multiple profiles in Chrome and Firefox. But there's\nanother problem. Let's say you click on a link from outside the browser (e.g.,\nVSCode). In which profile should it be opened?\n\n## Solution\n\nThe solution is a program that replaces the default browser. It then decides\nwhich profile to open based on the domain or a keyword in the URL.\n\nThis is a good start but not enough. At least in Chrome, the window classes\n(wm_class in xorg) of different profile instances are the same. So, even if\nyou open a separate window for each profile, they are all grouped together. It\nbecomes harder and harder to distinguish them when switching windows.\n\nThe final piece is using separate user directory in Chrome (via --user-data-\ndir). This way Chrome creates a different window class for each profile. We\ncan enhance it further by creating a dedicated launcher and icon. Here is an\nexample .desktop file:\n\n    \n    \n    [Desktop Entry] Version=1.1 Type=Application Name=Chrome - Client1 Comment=Browser profile for Client1 Icon=/home/amir/Documents/Icons/web-browser-yellow.svg Exec=google-chrome --user-data-dir=/home/amir/.config/google-chrome/Client1 %U Categories=Network; StartupWMClass=google-chrome (/home/amir/.config/google-chrome/Client1)\n\nSpecifying StartupWMClass lets the launcher know which profile is currently\nopen. For example, when I open the default and the client-1's browser, the\nlauncher shows this:\n\n## Install\n\n  1. Install Browser Hub: pipx install browser-hub\n  2. Configure it\n  3. Set Browser Hub as your default browser\n\nTo test it, you can run Browser Hub in your terminal:\n\n    \n    \n    browser-hub {url}\n\n## Configuration\n\nCreate the config folder:\n\n    \n    \n    mkdir -p ~/.config/browser-hub\n\nCreate config.json file. Here's an example:\n\n    \n    \n    { \"default_browser_open_cmd\": \"google-chrome {url}\", \"profiles\": [ { \"name\": \"Client1\", \"url_patterns\": [\"client1-domain1\", \"client1-domain2\"], \"browser\": { \"open_cmd\": \"google-chrome --user-data-dir=/home/amir/.config/google-chrome/Client1 \\\"{url}\\\"\", \"process_names\": [\"chrome\"], \"cmd_includes_regex\": \"--user-data-dir=.+google-chrome/Client1\", \"cmd_excludes_regex\": \"--type=renderer\" }, \"url_transformers\": [ { \"keywords\": [\"/client1-org1\", \"/client1-org2\", \"/client1-org3\"], \"from_url_regex\": \"http(s)?://(.*\\\\.)?github.com\", \"to_url\": \"https://ghe.client1-on-prem.com\" } ] }, { \"name\": \"Client2\", \"url_patterns\": [\"client2-domain\"], \"browser\": { \"open_cmd\": \"google-chrome --user-data-dir=/home/amir/.config/google-chrome/Client2 \\\"{url}\\\"\", \"process_names\": [\"chrome\"], \"cmd_includes_regex\": \"--user-data-dir=.+google-chrome/Client1\", \"cmd_excludes_regex\": \"--type=renderer\" }, \"url_transformers\": [] } ], \"profile_specific_urls\": [ \"amazon.com\", \"github.com\", \".google.com\", \"datadoghq.com\", \"sentry.io\", \"lucid.app\" ] }\n\nA few examples based on this config:\n\nSource URL| Target URL| Profile  \n---|---|---  \nhttps://www.client1-domain1.com| Same| Client 1  \nhttps://www.client2-domain.com| Same| Client 2  \nhttps://console.amazon.com| Same| Active Profile based on the running process  \nhttps://github.com/client1-org1/repo1| https://ghe.client1-on-\nprem.com/client1-org1/repo1| Client 1  \nhttps://news.ycombinator.com/| Same| Default Chrome Profile  \n  \n### Options\n\n  * default_browser_open_cmd: The shell command to run the default browser when no profile is matching the opened URL. Normally it should be set to your personal profile.\n  * profiles: [Array] Profiles of your clients.\n\n    * name: Name of the profile.\n    * url_patterns: [Array] This profile will be opened if the URL contains any of these patterns. Usually set to the client-specific domains.\n    * browser: Browser information specific to this profile.\n\n      * open_cmd: The shell command to open this client profile browser.\n      * process_names: [Array] Name of the browser process used to determine whether a profile is active.\n      * cmd_includes_regex: A regular expression to distinguish this profile browser processes.\n      * cmd_excludes_regex: The processes with a command line that matches this regular expression will be ignored. Useful to exclude the browser process when running in the background.\n    * url_transformers: [Array] Transforming a URL to another one. e.g. Mapping GitHub actions to the enterprise on-prem GitHub instance.\n\n      * keywords: [Array] Keywords that trigger the transformer if found in the URL.\n      * from_url_regex: Matching regular expression that specifies what to replace in the URL (regex groups).\n      * to_url: The URL will be replaced by this string. Backreferences, such as \\6, are replaced with the substring matched by group 6 in the from_url_regex.\n\n## About\n\nA Browser wrapper that allows you manage multiple browser instances hassle-\nfree\n\n### Topics\n\npython browser\n\n### Resources\n\nReadme\n\n### License\n\nMIT license\n\nActivity\n\n### Stars\n\n0 stars\n\n### Watchers\n\n1 watching\n\n### Forks\n\n0 forks\n\nReport repository\n\n## Releases 1\n\nv0.0.1 Latest\n\nApr 19, 2024\n\n## Packages 0\n\nNo packages published\n\n## Languages\n\n  * Python 100.0%\n\n## Footer\n\n\u00a9 2024 GitHub, Inc.\n\nYou can\u2019t perform that action at this time.\n\n", "frontpage": false}
