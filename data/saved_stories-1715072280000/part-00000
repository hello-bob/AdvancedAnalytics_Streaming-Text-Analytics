{"aid": "40281877", "title": "How accurate can IP Geolocation get? (2021)", "url": "https://www.bigdatacloud.com/blog/how-accurate-can-ip-geolocation-get", "domain": "bigdatacloud.com", "votes": 1, "user": "Leftium", "posted_at": "2024-05-07 02:56:04", "comments": 0, "source_title": "How accurate can IP Geolocation get?", "source_text": "How accurate can IP Geolocation get? | BigDataCloud\n\nIP Geolocation\n\n# How accurate can IP Geolocation get?\n\nBigDataCloud April 27, 2021\n\nShare\n\nIP geolocation technology has been around for a long while. It is the only\nnon-intrusive tool a service provider can use to estimate the geographical\nlocation of online visitors.\n\nIP geolocation has proved itself as the main driving engine for delivering\nlocation-based services such as content localisation, digital rights\nmanagement, customer targeting and fraud detection.\n\nBut how accurate is an IP Geolocation lookup? Can we trust it to make critical\nbusiness decisions?\n\nIP Geolocation accuracy has been one of the heavily debated topics for many\nyears across many platforms. We can find many complaints on forums such as IP\naddresses not showing the correct location or only country-level data being\nreliable.\n\nOne of the most popular myths is that the IP Geolocation is inaccurate because\nit is based on public data and that it usually points to the organisation\u2019s\nheadquarters location rather than the real user\u2019s location.\n\nThe reality varies widely because not all IP Geolocation services are made the\nsame, and they often utilise different technologies to source their data.\nPlease see our blog post here for more details on how conventional IP\nGeolocation services operate.\n\nThe goal of this article is not to compare different IP Geolocation providers.\n\nCheck out the Daily IP Geolocation Accuracy Report for various service\nproviders.\n\nThis article addresses the fundamentals of IP Geolocation and then explains\nthe best accuracy and outcomes we can theoretically expect out of \u2018perfect\u2019 IP\nGeolocation. It then outlines conceptual limitations we should be aware of,\nand to what extent we can trust the data we receive.\n\n## IPv4 is here to stay\n\nWhen we refer to an IP Geolocation, we are considering the IPv4 address space\nfirst because most of our web traffic is still coming from IPv4 addresses.\n\nIPv6 was created to solve the global shortage of IPv4 address space by\nproviding a whopping 2^128 extension. However, it has not happened even though\ntwo decades have passed since it was introduced.\n\nThere are many reasons why IPv6 is not taking flight. The main reason is\nprobably the most surprising one \u2013\n\n> there isn\u2019t a real shortage of IPv4 addresses, after all.\n\nWell, to some extent there is, as it is almost impossible to get some for free\nanymore even if it is vital for your business. It has just become a cherished\ncommodity, and it is here to stay.\n\nHow is it possible, you may wonder? There are only a limitedd number of 2^32\nor roughly 4.3 billion addresses available on IPv4, so how can they\naccommodate over 7 billion internet-hungry people on our planet and allow for\nenormous expansion into the IoT space?\n\nSurprisingly - yes, it can, and it currently does it for even substantially\nless than that!\n\nFirst, despite the theoretical maximum of 4,294,967,296 IPv4 addresses, not\nall are allocated for public internet use.\n\nAnd then, out of those allocated, how many do you think are being actively\nused?\n\nRemarkably, there are currently merely 2.9 billion publicly routable IPv4\naddresses servicing our entire internet! Visit our online IpV4 address space\nmonitoring for up-to-date figures.\n\nAnd this is whilst there are:\n\n  * more than 4.5 billion home internet users in the world\n  * over 300 million active websites\n  * over 3.5 billion smartphone users in the world\n  * over 7 billion IoT devices and it is growing\n  * millions of public IP addresses utilised by the global network infrastructures\n\n## So how is that even possible?\n\nIt is because we only need a dedicated, publicly routable IP address when we\nrequire two-way communication such as when we need to be able to reach out at\nwill and also to receive incoming connection requests from the outside world.\n\nHowever, most of our internet activities are perfectly suitable for one-way\ncommunication only. For instance, when we browse the internet, we initiate the\nconnection ourselves, and we don\u2019t expect websites or other web service\nproviders to stay actively connected to our devices. We even hope they don\u2019t,\notherwise, it would give rise to significant security challenges.\n\nWebsites, on the other hand, are not expected to reach out or initiate a\nconnection. And since websites work with hostnames, it is perfectly suitable\nto hook them up behind a shared IP address.\n\nTheoretically, it is possible to put all of our over 300 million worldwide\nactive websites behind a single anycast IP address, or just a few of them for\nredundancy. It will be even much more effective to protect them from cyber\nattacks that way. Cloudflare is an excellent example of how this can work.\n\nTechnically, there are plenty of technologies already available to share an IP\naddress when providing one-way communication. We use Network Address\nTranslation (NAT) at home or in small offices, proxies at larger\norganisations, and name-based virtual hosting for websites, to name a few.\n\nWe tend to classify IP addresses as static (yours forever) or dynamically\nallocated (yours for a limited time). However, we often don\u2019t get an IP\naddress assigned to us exclusively. We only temporarily make use of it, and\npossibly even share it with other remote peers simultaneously.\n\nCellular operators, for example, often implement Carrier-grade NAT (CGNAT) and\nmake use of small IP address blocks to cater for a large active customer base.\n\nTechnically, they assign a pool of IP addresses available to them to a section\nof their network, and mobile users are only making use of an IP address to get\naccess to the internet, the same as it was with a proxy, for example. The\nconnection is strictly one-directional, there is no way an outside world IP\naddress can initiate a link back to the mobile device using that address. This\nmaintains robust security and reduces the number of public IP addresses\nrequired.\n\n> The downside, however, is that the old and widespread assumption that every\n> single IP address has a single device behind it and therefore can be tracked\n> down to an exact geographical location is not valid anymore!\n\nTherefore, when we consider IP Geolocation, we must first consider how an IP\naddress is being used.\n\n## Static IP addresses\n\nA static IP address\u2019s geolocation is the easiest to get right.\n\nRegardless of the exact method that helps IP Geolocation providers to source\ntheir data, there is one common overarching principle. IP Geolocation is\nalways evidence-based. It could be public RIR data, self-published geofeeds,\nactively sourced measurements or otherwise processed information or an end-\nuser reported or otherwise obtained IP-location pairs.\n\nAny way you put it, it is always about a piece of field evidence or at least a\nclue from data received. Not all evidence data is correct, it could be a way\noff, just like a faulty report of a GPS device\u2019s location, for example. The\nquality of an IP geolocation service always relies on what data they have\naccess to and how they handle it.\n\nTherefore, when we\u2019ve got a fresh, valid, and highly precise geographic\nlocation as a piece of evidence for a static IP address used by a stationary\ndevice \u2013 the resulting IP Geolocation accuracy can be scarily accurate \u2013 often\nup to a few meters away.\n\nThis is why BigDataCloud deliberately obscures the provided location\ncoordinates slightly by rounding it up to the nearest kilometre \u2014 essentially\ncapping the maximum accuracy down to within one square kilometre.\n\n> Hence, IP Geolocation is not suitable for identifying the exact location of\n> a user.\n\nFurthermore, it should not be as accurate as it can be because we must also\nrespect the privacy of the IP address end-users.\n\n## Dynamically allocated IP addresses.\n\nA dynamic IP address is an IP address that our Internet Service Provider (ISP)\nassigns to us temporarily.\n\nThe only noticeable difference between a static allocation and a dynamic one\nis that with the static one, we are promised that the address would not change\nas long as we maintain the contract. In the case of a dynamic assignment, it\nmay vary, as often as we reboot our router or even more, depending on the\nISP\u2019s policies.\n\nSome ISPs could enforce address changes as often as every few hours and others\nlet us have the same address for months even if we reboot our router\noccasionally.\n\nThe longer the same IP address remains at the same physical location, the\nbetter chance that an IP Geolocation service provider can pick it up and\nlocate it as accurately as a static IP address.\n\nBut what happens if the IP address we\u2019ve just got was spotted previously at\nanother location? Yes, the IP geolocation results will be off. But, by how\nmuch? Let\u2019s now turn to how this will affect the accuracy of the IP\nGeolocation.\n\nA dynamic IP address usually comes from a Dynamic Host Configuration Protocol\n(DHCP) allocation. Just like we\u2019ve got our home computer receiving a local\nprivate IP address from our home router using DHCP. There is also a router on\nour ISP\u2019s network, which is responsible for our section of the system.\n\nThis router, in turn, has a pool of IP addresses it can allocate to customers.\nThese IP addresses could be sequential, resembling a single network block, or\neven a list of several blocks. Sometimes these blocks can be as small as a\nsingle IP address. This is precisely why the IP geolocation data granularity\nis so important. The \u2018perfect\u2019 IP Geolocation service must support up to a\nsingle IP address granulation - just a side note.\n\nNoticeably, the network router which is servicing us directly is essentially\nresponsible for our section of the network, and most often this section\nresembles a very distinct geographical boundary - a service area.\n\n> Therefore, the maximum IP Geolocation error we should expect when using an\n> IP address which was witnessed and noted somewhere else is the maximum\n> distance from our physical location to the outermost end of the boundary of\n> that area.\n\nThe service area or confidence area as we call it at BigDataCloud is a\ncritically important piece of information that can tell us where else the IP\naddress of interest can potentially be allocated if it was assigned\ndynamically. We must consider if the resulting decision we make upon IP\ngeolocation data is substantial.\n\nScreenshot of maps showing the estimated point location and confidence area\n(service area) of the respective IP addresses generated using BigDataCloud\u2019s\nIP Geolocation API. You can check your IP address here.\n\nFor instance, if we grant or ban access to services or decide on the\nlikelihood of e-commerce fraud, we should definitely include the service area\nin our considerations too. A location point estimation might not be enough as\nit is only an estimate which is usually based on the latest or the most likely\n(frequent) location for it.\n\n## Cellular networks\n\nThe IP address allocation by a cellular network operator can loosely resemble\na fixed network, ISP dynamic allocation. However, there are at least three\nnoticeable differences which can make IP Geolocation much more challenging for\nmobile networks.\n\n  1. The device behind an IP address is not necessarily a stationary one. We can sometimes drive several hundred kilometres and still be using the same cellular network assigned public IP address.\n  2. We often do not have access to a full IP address, as we are only \u2018riding on it\u2019, sharing it with other, often very remote customers elsewhere.\n  3. Cellular network operators can often consolidate several internal network sections giving them a shared internet access point with the same shared pool of IP addresses available. This can make the service areas for the cellular address blocks significantly bigger.\n\nTherefore, what is the outcome we should expect from a \u2018perfect\u2019 IP\nGeolocation service for cellular-originated IP addresses?\n\n> Unfortunately, even a theoretically \u2018perfect\u2019 IP Geolocation service can\u2019t\n> always estimate the correct, up to the moment location for every IP address\n> on a cellular network.\n\nEven the cellular network operators themselves often don\u2019t have this data in\nreal-time. They may be able to tell better which customers are using which IP\naddress, but not exactly where they are. Most likely, they cannot without\ndigging deep into their internal logs.\n\nHence, as a first step, it would be beneficial for businesses if the IP\ngeolocation providers could just indicate whether an IP address of interest\nbelongs to a cellular block or not. A straightforward way of doing this is\nchecking if the enterprise that services this IP address also operates a\ncellular network like Vodafone, AT&T etc. But this would not always be helpful\nbecause some of these companies run mixed services. Hence, we should be able\nto detect cellular networks regardless of the ASN announcing them.\n\nThe next critical point for IP geolocation services is the service area of a\ncellular network even though it can be a substantially large one. Some\ncellular operators can extend their allocation for the same pool of IP\naddresses to areas often as big as the whole country. This means that an IP\naddress within the cellular network can be used by a mobile customer\npractically anywhere within the servicing country. Hence, it is critical to\nknow this if we need to make an important business decision based on IP\nGeolocation.\n\n## Hosting\n\nAnother essential categorisation applicable to an IP address is to distinguish\nbetween those that are servicing a human-operated device directly, or just a\nmiddlebox server or a bot. At BigDataCloud, we tend to categorise these as\nConsumers and Hosting networks.\n\nHosting is the overarching term we use to describe all sorts of unattended\ncomputers such as those that usually run from datacenters and also offices or\nprivate properties.\n\nHosting network IP addresses are essentially those which power public\nwebsites, mail servers, VPN services, TOR, proxy and many lawful and also\nmalicious applications.\n\nResidential proxy or VPN networks, for example, often reside on benevolent IP\naddress blocks announced by ASNs which belong to legitime ISPs or even\ncellular network operators. BigDataCloud also detects these and marks them as\nHosting too.\n\nMost of the Hosting IP addresses are static allocations.\n\n## Edge cases\n\nThere are some outliers with all the above cases, and the next sections define\nhow IP Geolocation would be expected to handle these.\n\nRoaming cellular\n\nWhen we arrive in a foreign country and turn our roaming data on, we can find\nthat, surprisingly, the websites we visit still recognise us as never leaving\nour home country. We can often continue using the same IP address even though\nwe are thousands of miles away!\n\nHow is that possible? Most if not all mobile network operators worldwide tend\nto 'tunnel' their remote customers' traffic back to their home networks. This\nway, they can better control the billing of their super costly data services.\n\nTechnically, this is very similar to a VPN that tunnels our traffic back to\nour home networks.\n\nIt makes IP Geolocation extremely challenging for roaming customers. On top of\na regular CGNAT where several scattered mobile customers can share the same IP\naddress for their internet use, roaming will add a chance that some of these\ncould be shared anywhere in the world.\n\nWhat can we expect from a perfect IP Geolocation service in this case?\n\nBigDataCloud is often able to recognise IP addresses used overseas. However,\nkeeping in mind that there is a strong possibility that the same IP address is\nsimultaneously allocated at the home country as well, we decide to ignore that\ndata and report on the home country user's location instead.\n\n## VPN, TOR, PROXY and other anonymisers\n\nWe often see internet users taking extreme measures to mask their real IP\naddresses. There are zillions of services available out there to help them\nhide. Usually, these services are offered as a safer option to surf the\ninternet, a very questionable claim, to say the least.\n\nWe can only wonder why people tend to trust a \u2018no street address\u2019 and \u2018no\nphone number\u2019 company listed on some remote island more than their home ISP\nfor handling their private communication and data. These services are vastly\noverused in the free parts of the world.\n\nAnyway, regardless of their motives, we must respect their choices. Even if it\nwas possible to recover the real IP address and the current location of the\nuser, we see IP Geolocation services often reporting on the estimated position\nof the middlebox IP address instead of the real end-user one.\n\n## Conclusion\n\n> IP Geolocation is categorically not suitable for tracking the exact\n> geographical location of a person or device.\n\nHowever, in the majority of cases, it can assuredly give crucial insights into\nthe geographical area the IP address is being used.\n\nThe various supporting information such as the confidence area, network type\nand risk factors can make the IP Geolocation based upon business decisions\nvery robust and trustworthy.\n\nShare\n\n  * Packages\n  * IP Geolocation\n  * Reverse Geocoding\n  * Phone & Email Verification\n  * Network Engineering\n  * Free API\n\n  * Tools\n  * What is my IP?\n  * Update My Location\n  * IP Lookup\n  * ASN Lookup\n  * Network Lookup\n\n  * Insights\n  * Daily IP Geolocation Accuracy Report\n  * ASN Rank by IPv4 space\n  * Tor Exit Nodes\n  * Bogon Routes\n  * IPv4 Address Space Report\n  * IPv6 Address Space Report\n\n  * Developers\n  * Getting started\n  * Support Articles\n  * Blog\n\n  * Company\n  * About Us\n  * Contact Us\n  * Privacy Policy\n  * Terms and Conditions\n  * Free Mobile App IP Tools for Network Insights\n\nCopyright \u00a9 2024 \u2014 BigDataCloud Pty Ltd\n\n### Cookie settings\n\nWe use cookies to provide you with the best possible experience. They also\nallow us to analyse user behavior in order to constantly improve the website\nfor you.\n\n", "frontpage": false}
