{"aid": "40198906", "title": "Why do reflows negatively affect performance?", "url": "https://frontendmasters.com/blog/why-do-reflows-negatively-affect-performance/", "domain": "frontendmasters.com", "votes": 1, "user": "mooreds", "posted_at": "2024-04-29 14:39:08", "comments": 0, "source_title": "Why do reflows negatively affect performance?", "source_text": "Why do reflows negatively affect performance? \u2013 Frontend Masters Boost\n\nSearch\n\n# Why do reflows negatively affect performance?\n\nJanuary 19, 2024\n\nLayout recalculations, or \u201creflows\u201d, happen when we change a layout-related\nproperty, such as an element\u2019s width, height, or margin. Reflows can happen\naccidentally or on purpose.\n\nFor instance, you might want to have a feature that switches from a grid view\nto a list view. In that case, triggering a reflow is essential for\nfunctionality.\n\nA less ideal situation might be ads that are added to the page from\npotentially slow-loading JavaScript. That JavaScript is likely to resize\nelements with the injected ads, causing a reflow on every page load during a\nuser\u2019s visit. This type of reflow can negatively impact the user experience in\nseveral ways, like interrupting a reading flow and delaying other\ninteractions.\n\nWhen we change a layout-related property, we trigger the pixel pipeline. This\nis a series of steps that the browser\u2019s rendering engine performs to show the\nactual changes on the screen.\n\nThe pixel pipeline involves several steps:\n\n  1. Layout (Reflow): The browser recalculates the geometry of elements affected by layout-related property changes. This calculation determines the positioning of elements in the browser window.\n  2. Paint: Following layout recalculations, the browser renders the visual features of each element, like colors, borders, and shadows.\n  3. Composite: The browser then combines the painted layers to produce the final image displayed on the screen.\n\nReflows can be heavy on the CPU as they involve complex algorithms for\nprocessing CSS rules and determining element alignment and constraints within\nthe page\u2019s layout.\n\nThe CPU can be seen as the \u201cbrain\u201d of the computer, and it\u2019s able to process\ninstructions in a sequence, or a single thread. The issue with reflows arises\nfrom a few factors:\n\n  * The CPU has to interpret and execute CSS rules to determine the geometry of elements on the page. This can be a heavy operation requiring complex computations and logic assessments.\n  * The CPU can handle multiple tasks but can only focus on one task at a time. During a reflow, other important operations like user input handling and script execution may be deferred, which can result in delays.\n  * Since pages are often deeply nested, a single layout change can cause a cascade of recalculations and updates, putting additional burden on the CPU.\n  * Though more low-level, the CPU must often access and alter memory for computations and updating the render tree and paint. Inefficient memory access might result in cache misses and slower memory retrievals, further slowing down the rendering process.\n\n## So, why do reflows negatively affect performance?\n\nReflows demand substantial CPU resources to run computations and update the\nrender tree. This process reduces overall speed and user experience.\n\nAs the CPU can become overwhelmed with these tasks, its ability to handle\nother tasks like user interaction and script execution decreases, which\nresults in slower rendering and reduced responsiveness.\n\nThe inability to handle other tasks can result in noticeable delays, layout\nshifts, and unresponsive pages, which directly affect how users interact with\nthe site. Such issues are detrimental to user experience and impact key\nmetrics like Cumulative Layout Shift (CLS), one of Google\u2019s Core Web Vitals\nwhich are part of your site\u2019s Lighthouse scores as well. CLS can even\ninfluence your site\u2019s SEO performance.\n\nDid you know all that? What else do you know about Advanced Web Development?\nWanna test yourself? Take Lydia\u2019s Advanced Web Development Quiz. The 10th\nquestion is all about the cost of rendering and might be trickier than you\nthink.\n\n### Need to learn about web performance?\n\nWe have an in-depth course all about Web Performance Fundamentals from Todd\nGardner. There is a lot to know, from the psychology of web performance, to\nmeasuring the new Core Web Vitals, to building a culture of performance at\nyour organization.\n\n### One response to \u201cWhy do reflows negatively affect performance?\u201d\n\n  1. Serhii S.S Shramko says:\n\nJanuary 21, 2024 at 12:52 pm\n\nThnx. Great post about reflow & repaint.\n\nReply\n\n### Leave a Reply Cancel reply\n\n### Author\n\nLydia Hallie\n\nSoftware engineer specializing in TypeScript, React, and Web Performance. From\nUtrecht, the Netherlands.\n\nLydia has courses on Frontend Masters.\n\nWebsite GitHub Profile X Profile LinkedIn Profile\n\n### Tags\n\nCLSPerformance\n\n### Table of Contents\n\n  1. So, why do reflows negatively affect performance?\n\n### Learn with Frontend Masters\n\nAnswer three short questions and we'll recommend the best learning path for\nyour experience level and goals.\n\nFrontend Masters\n\nTwitter LinkedIn Facebook Instagram RSS\n\nContact: support@frontendmasters.com\n\nFrontend Masters is proudly made in Minneapolis, MN\n\n\u00a92024 Frontend Masters Terms of Service \u00b7 Privacy Policy\n\n# Search results\n\nFiltersShow filters\n\nSort by:\n\n\u2022\u2022\n\n## No results found\n\n## Filter options\n\n", "frontpage": false}
