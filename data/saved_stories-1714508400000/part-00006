{"aid": "40210775", "title": "What is the best answer to divide by 0", "url": "https://www.hillelwayne.com/post/divide-by-zero/", "domain": "hillelwayne.com", "votes": 2, "user": "systems", "posted_at": "2024-04-30 13:29:20", "comments": 0, "source_title": "1/0 = 0", "source_text": "1/0 = 0\n\nSkip to Content\n\nHillel Wayne\n\n# 1/0 = 0\n\nPosted on Aug 10, 2018\n\nHave a tweet:\n\nI have no idea if Pony is making the right choice here, I don\u2019t know Pony, and\nI don\u2019t have any interest in learning Pony.^1 But this tweet raised my hackles\nfor two reasons:\n\n  1. It\u2019s pretty smug. I have very strong opinions about programming, but one rule I try to follow is do not mock other programmers.^2 Programming is too big and I\u2019m too small to understand everything. Disagreeing is fine, laying out why people are wrong is fine, making fun of them is not fine.\n  2. It\u2019s saying that Pony is mathematically wrong. This is objectively false.\n\nI tweeted a thing about why 1/0 = 0 is mathematically sound. Some people\nagreed, some people agreed with caveats, and some people called it bunk. A few\npeople said it\u2019s clear I don\u2019t know real mathematics, because a real\nmathematician would never make such a mistake.\n\nSo in this post I\u2019d like to clearly, formally lay out why it\u2019s consistent to\nsay that 1/0 = 0, why some of the common objections don\u2019t apply, and what the\nreal mathematicians say. Fair warning, this post is going to be a little more\nmathematically dense than my usual stuff. I\u2019ve tried to make it clear but,\nwell, math.\n\n## Consistency\n\nFirst we need to explain what we mean by \u201cconsistency\u201d. The formalism is sound\nif you can only use it to prove true statements. To say 1/0 = 0 is unsound is\nto either say that we can prove 1/0 \u2260 0 or that, given 1/0 = 0, we can prove\nsomething that\u2019s false. These are actually equivalent statements but it\u2019ll be\nuseful to treat them as distinct for teaching purposes.\n\nNext we need to explain what we mean by \u201cdivision\u201d. But to do that, I need to\nintroduce fields.\n\n## Fields\n\nA field is a set of elements (S) along with an addition operator (+) and a\nmultiplication operator (*) that follow some properties:\n\n  1. The set is closed under both operations. If x is an element of S and y is an element of S, then both x + y and x * y are elements of S.\n  2. Both operations are commutative. a + b = b + a, and a * b = b * a.\n  3. Both operations are associative. a + (b + c) = (a + b) + c, and a * (b * c) = (a * b) * c.\n  4. Multiplication is distributive. a * (b + c) = a * b + a * c.\n  5. There is an element that is the additive identity, or 0, such that a + 0 = a.\n  6. There is an element that is the multiplicative identity, or 1, such that a * 1 = a.\n  7. The two identities are different elements. 1 \u2260 0.\n  8. Every element has an additive inverse, -a, such that a + (-a) = 0.\n  9. Every element EXCEPT 0 has a multiplicative inverse, a\u2212, such that a*a\u2212 = 1.\n\nThese are all of the rules of a field. We can define S, +, and * any way we\nwant, as long as all of the rules are followed. The real numbers, along with\nour conventional notion of addition and multiplication, form a field. This\ngives us the building blocks to discover properties of our system. In order to\nprove a theorem, we need to be able to derive it solely through the\ndefinitions of S/+/*, the definition of a field, and any axioms we have.^3 For\nexample, we can prove that for all a, a * 0 = 0:\n\n  1. By the additive identity, 0 + 0 = 0, so a * 0 = a * (0 + 0)\n  2. By the distributive property, a * (0 + 0) = a * 0 + a * 0\n  3. By the additive inverse property, there is some - (a * 0) such that - (a * 0) + (a * 0) = 0.\n  4. Combining (1) and (2), we get a * 0 = a * 0 + a * 0.\n  5. Combining (3) and (4), we get - (a * 0) + (a * 0) = - (a * 0) + a * 0 + a * 0.\n  6. Evaluating (5) gives us 0 = a * 0. QED.\n\nNow that we have this as a theorem, we can use it to prove other theorems.\nGiven this property, we can immediately show that there is no multiplicative\ninverse of 0:\n\n  1. If 0 had a multiplicative inverse 0\u2212, then 0 * 0\u2212 = 1.\n  2. For all real numbers, a * 0 = 0.\n  3. Since 1 \u2260 0, there is no multiplicative inverse of 0\u2212.\n\nOkay, now we can talk about division in the reals.\n\n## Division\n\nThe field definition does not include division, nor do our definitions of\naddition or multiplication. This means we are free to define division however\nwe want. We want to define it in a way that mostly follows our intuition and\nis sound. I say mostly because our intuition doesn\u2019t generalize. As an\nexample, we intuitively think of a * b as \u201ca summed up b times\u201d. So what\u2019s -1\n* \u03c0? How do you sum up something \u03c0 times? While it would be nice if division\ndidn\u2019t have any \u201coddness\u201d to it, we can\u2019t guarantee that without kneecapping\nmathematics.\n\nThe intuitive definition of division is multiplying by the inverse. a/2 = a *\n2\u2212. Under this definition, we can get all of the properties of division we\u2019re\nused to by proving that they hold. For example,\n\n  * Theorem: a/a = 1. Proof: a/a = a * a\u2212 = 1.\n  * Theorem: a * (b/c) = b * (a/c). Proof: a * (b/c) = a * (b * c\u2212). Since multiplication is commutative and associative, we can rearrange this to get b * (a * c\u2212) = b * (a/c).\n\nThis is all great, except for one problem: 0 does not have a multiplicative\ninverse. Both of those proofs are invalid: if I write 0/0, I get 0 * 0\u2212, which\nis an invalid equation. So we cannot prove that a/a = 1. We can, however,\nprove something weaker:\n\n  * Theorem: IF a \u2260 0, THEN a/a = 1. Proof: same.\n  * Theorem: IF c \u2260 0, THEN a * (b/c) = b * (a/c). Proof: same.\n\nNote this does not go both ways: it does not follow that 0/0 \u2260 1. All we know\nis we cannot use this theorem to prove that 0/0 = 1. So we do not have that\n0/0 \u2260 1. For any given number, we cannot prove that 0/0 is not that number!\nSince we\u2019ve defined division as multiplying by the inverse, and zero does not\nhave an inverse, our definition of division does not cover dividing by zero.\nIt does not say anything about it, leaving it \u201cundefined\u201d if you will.\n\nSince this form of division is not defined for 0, it is a partial function\nover the reals: there is some value in its domain that we have not specified.\nPractically, this is fine: we\u2019re used to thinking of 1/0 as an impossible\noperation. But this has some weird consequences: one of our axioms is\neverything is equal to itself. So does 1/0 = 1/0? If you say that\u2019s silly, we\nno longer have a = a! And even if you\u2019re fine with that, what about the\nstatement TRUE \\/ (1/0 = 1/0)? It shouldn\u2019t matter what the second clause is,\nbecause that statement should be true. But by the axiom of the excluded\nmiddle, we\u2019d then have to say the second clause is either true or false. When\ntrying to formalize math and logic, we have to find some way to address what\nhappens if you write 1/0. So there\u2019s generally three things mathematicians can\ndo:^4\n\n  * We can say nope, sorry, you can\u2019t even write 1/0, much less give it a value. This is what we do in our day-to-day lives, and the way that Agda and Idris handle division.\n  * We can choose some value that isn\u2019t a real number, such as \u201cundefined\u201d or infinity, and say x/0 = <whatever>. This is what some mathematicians do with the Riemann sphere.\n  * We could choose some real number, like 19, and say that x/0 = 19. This is what Isabelle, Lean and Coq do.\n\nAll of these have tradeoffs. We already talked about some of the headaches\nwith banning equations like 1/0. With an \u201cundefined\u201d value, division is no\nlonger closed on the reals. In the last case, you explode everybody\u2019s\nintuitive notion of division. But all of these are sound. Since our original\nnotion of division does not say anything about dividing by zero, it does not\nrule out anything. None of these extensions lead to a contradiction.\n\nThe controversy is over the last case, so let\u2019s focus on that. We\u2019ll define\ndivision as follows: IF b = 0 THEN a/b = 1 ELSE a/b = a * b\u2212.\n\nSomething I need to emphasize here: this does not give us an inverse of 0. 1/0\nis not 0\u2212. This means that while 0/0 = 1, 0 * 1/0 = 0. Division is only\n\u201cmultiply by the inverse\u201d when the denominator isn\u2019t 0. All we\u2019ve done is\nspecial case dividing by zero and nothing else. And doing so is mathematically\nconsistent, because under this definition of division you can\u2019t take 1/0 = 1\nand prove something false.\n\n## Objections\n\nHere\u2019s where a lot of people objected. They would take the fact 1/0 = 1 and\nprove something false, usually 1 = 0. None of these proofs, however, are\nsound. To see why, let\u2019s dig into a couple example proofs and show where they\nbreak down.\n\nHere\u2019s a common argument:\n\n  1. 1/0 = 1\n  2. 1/0 * 0 = 1 * 0\n  3. 1 * 0/0 = 0\n  4. 1 = 0\n\nThe problem is in step (3): our division theorem is only valid for c \u2260 0, so\nyou can\u2019t go from 1/0 * 0 to 1 * 0/0. The \u201cdenominator is nonzero\u201d clause\nprevents us from taking our definition and reaching this contradiction.\n\nHere\u2019s where people got tripped up. They assume we needed the nonzero clause\non our division theorems because x/0 is undefined. \u201cIf x/0 is a value, then\nthe theorem should extend to c=0, too.\u201d This is wrong. The problem is not that\n1/0 was undefined. The problem was that our proof uses the multiplicative\ninverse, and there is no multiplicative inverse of 0. Under our modified\ndefinition of division, we still don\u2019t have 0\u2212, which means our proof still\ndoes not work for dividing by zero. We still need the condition. So it is not\na theorem that a * (b / 0) = b * (a / 0).\n\nTo be clear, this does not mean they must be different! All we know is that we\ncannot use this theorem to argue they are equal. Since the \u201cproof\u201d that 1 = 0\nused that theorem, the proof is unsound.\n\nPretty much every counterargument makes this exact same mistake: it assumes\nthat because 1/0 is now defined, there is now some 0\u2212 that generalizes our\ntheorems. But there\u2019s not.\n\nAnother common objection is that if 1/0 = 1, then multiplicative inverses are\nno longer unique: 2/2 = 1, but also 2/0 = 1, so now 2 has two inverses. This,\nagain, confuses cause and effect. 1/2 is the inverse of 2 not because of how\nwe define inverses, but how we defined division. 2/2 = 1 because 2/2 = 2 * 2\u2212.\nBut, again, zero does not have an inverse, and 2/0 is not 2 * 0\u2212. Since 0\u2212\ndoes not exist, it is not an inverse of 2, and every nonzero number still has\na unique inverse.\n\nIf you want to prove that 1/0 = 1 leads to a contradiction, you must\nexplicitly list every step you take and show that none of them assume that 0\u2212\nexists.\n\n## 1/0 = 0\n\nWe\u2019ve now established Let\u2019s assume for now that if we choose some constant C,\nthen defining division such that x/0 = C does not lead to any\ninconsistencies.^5 It turns out that for certain choices of C, specifically 0,\nwe can make some theorems stronger. We can do this by removing the conditions\non (some of) our division theorems, and then add a special case to the proof\nitself. For example:\n\n  * Theorem: a * (b/c) = b * (a/c). Proof: we already proved this for c \u2260 0. Now let c = 0. Then a * (b/0) = a * 0 = 0, and b * (a/0) = b * 0 = 0, and 0 = 0.\n\nUnder this definition of division step (3) in the counterargument above is now\nvalid: we can say that 1/0 * 0 = 1 * 0/0. However, in step (4) we say that 0/0\n= 1. This theorem does not get stronger:\n\n  * \u201cTheorem\u201d: a/a = 1. Proof: we already proved this for a \u2260 0. Now let a = 0. Then a/a = 0/0 = 0, so 1 = 0 and wait shit nevermind\n\nThis is why Lean and Isabelle define 1/0 this way. Coq does it too, but as far\nas I can tell they don\u2019t use it as an optimization.\n\n## The Real Mathematicians\n\nA final objection is that I\u2019m a CS person, not a mathmatician, so I don\u2019t\nunderstand the math here. But what do the PhDs say?\n\nLawrence Paulson, professor of computational logic and inventor of Isabelle:\n\n> A bit of history: the first logic supported within Isabelle was Martin-L\u00f6f\u2019s\n> constructive type theory, and it is still there (CTT). And while developing\n> arithmetic within that formalisation, I came up with a definition\n> (necessarily primitive recursive and executable) of division. It delivered\n> n/0 = 0. Since then a number of people have noticed that defining x/0 = 0 is\n> convenient. This identity holds in quite a few different proof assistants\n> now.\n>\n> These things are conventions, exactly the same as announcing that x^-n =\n> 1/x^n and that x^0 = 0 [sic].\n\nLeslie Lamport, Math PhD and winner of the 2013 Turing Award:\n\n> [In ZF set theory] Since 0 is not in the domain of recip, we know nothing\n> about the value of 1 / 0; it might equal \u221a2, it might equal R, or it might\n> equal anything else.\n\nMatt Noonan, Math PhD and introducer of Ghost Proofs to Haskell:\n\n> looks all fine to me!\n\nArthur Azevedo de Amorim, an author of the introductory Coq textbook,\nreconstructs the same argument I did here.\n\nI also chatted with a few math graduate student friends and emailed a couple\nof postdocs I know. So far people nobody\u2019s said that letting 1/0 = 0 is\nunsound. If any end up getting back to me with that I will include their\nrefutation of this post.\n\n## Conclusions\n\nThis was originally motivated by how Pony does division. So, is Pony doing the\nright thing here? No clue. Pony is a programming language, not a formal\nmathematical system. Consistency is less important than safety, convenience,\nand context. As a programmer, I don\u2019t like it.^6\n\nBut is Pony doing something unsound? Absolutely not. It is totally fine to\ndefine 1/0 = 0. Nothing breaks and you can\u2019t prove something false. Everybody\nwho was making fun of Pony programmers for being \u2018bad at math\u2019 doesn\u2019t\nactually understand the math behind it.\n\nDon\u2019t make fun of other people. The world is big and we are small.\n\nThanks to Watson Ladd, Matt Noonan, Ron Pressler, Josh Lieber, and Edwin Brady\nfor feedback.\n\n## Update 8/12/2018\n\nSome people pointed out I was using some terms ambiguously, which I\u2019ve done my\nbest to fix. A bunch of people also sent in more counterarguments, most of\nwhich fell along common themes.\n\n> ab = cb => a = c but with division by zero we have 1 * 0 = 2 * 0 => 1 = 2.\n\nThis is a common mistake a lot of people made: assuming that some property of\ndivision is somehow part of the definition, not something we have to show is\ntrue. But division has no \u201cinnate\u201d properties: everything manipulation we make\ninvolving it is something we have to prove is a valid manipulation. For any\ncontradiction, you must list out, for every manipulation of the equation you\nmake, the theorem that makes that manipulation valid, and show that the proof\nof that theorem does not use 0\u2212.\n\n> Letting 1/0 = 0 will lead to hidden errors in your program.\n\nAs mentioned before, this is not a post about what\u2019s practically a good idea.\nAll I\u2019m arguing is that mathematically, we can extend division in this way\nwithout leading to a contradiction. Programming languages are different from\nmathematical formalisms, and should be different. I prefer that 1/0 is an\nerror, because I\u2019m not using my program to prove theories.\n\nAll languages need to make sacrifices of mathematical soundness in favor of\nsafety, practicality, and predictability. It\u2019s the same reason why, in almost\nevery practically-used language, head has type [a] -> a, not [a] -> Maybe a.\n\n> We no longer have that division is the inverse of multiplication over its\n> whole domain.\n\nThis is a common argument, and arguably is more about the \u201caesthetics\u201d of\ndivision than what\u2019s formalizable. This happens a lot when we extend\nfunctions. For example, over the naturals, a * b is just repeated addition.\nBut if we extend multiplication over the rationals, then we lose that nice\ndefinition.\n\nIn general, I aesthetically \u201cdislike\u201d definitions and theorems that explicitly\ninclude a dependence on a function\u2019s domain, because it leads to \u201cside\neffects\u201d when we extend them.\n\n> If 0/0 = 0 then lim_(x -> 0) sin(x) / x = sin(0) / 0 = 0, but by\n> L\u2019Hospitals\u2019 Rule lim_(x -> 0) sin(x) / x = lim_(x -> 0) cos(x) / 1 = 1. So\n> we have 0 = 1.\n\nThis was a really clever one. The issue is that the counterargument assumes\nthat if the limit exists and f(0) is defined, then lim_(x -> 0) f(x) = f(0).\nThis isn\u2019t always true: take a continuous function and add a point\ndiscontinuity. The limit of sin(x) / x is not sin(0) / 0, because sin(x) / x\nis discontinuous at 0. For the unextended division it\u2019s because sin(0) / 0 is\nundefined, while for our extended division it\u2019s a point discontinuity. Funnily\nenough if we instead picked x/0 = 1 then sin(x) / x would be continuous\neverywhere.\n\nA couple of other people brought up limit arguments, but they all are\naddressed in a similar way.\n\n> It\u2019s icky.\n\nDon\u2019t disagree.\n\n## Update 10/23/19\n\nI\u2019ve been informed that Pony now supports partial division.\n\n  1. In the year since I wrote this post, Pony added partial division. I still don\u2019t know anything about the language but they\u2019ve been getting grief over this post so I wanted to clear that up. ^[return]\n  2. To be clear, I don\u2019t live up to this standard. I try to follow it, but stumble regularly. As part of my tweetstorm I ribbed the original poster at one point and I still feel bad about that. ^[return]\n  3. An axiom is something we take to be true without proving it. Some example axioms are \u201c0 is a number\u201d and \u201ceverything is either equal or unequal.\u201d Different choices of axioms lead to very different mathematical frameworks. Most famously, rejecting the axiom that \u201cevery line has exactly one parrallel line that passes through a given point\u201d leads us to non-Euclidian geometries. ^[return]\n  4. Several people pointed out that there\u2019s a fourth thing you can do: you can say that 1/0 is a real number but we don\u2019t know what it is. This is how TLA+ is formalized, though TLC considers 1/0 an error. ^[return]\n  5. A couple of people pointed out we didn\u2019t actually establish this, just showed that some of the common arguments don\u2019t apply. We can prove this to be the case, but the proof gets technical very fast. ^[return]\n  6. One of developers of Pony reached out to me. They\u2019re planning on writing a more in-depth explanation of why Pony chose 1/0 == 0, which I will linked when available. As I understand it, it\u2019s because Pony forces you to handle all partial functions. Defining 1/0 is a \u201clesser evil\u201d consequence of that. ^[return]\n\nCategories: Math\n\nTags: Math, Rants\n\nPowered by Buttondown.\n\n\u00a9 2024 Hillel Wayne\n\n", "frontpage": false}
