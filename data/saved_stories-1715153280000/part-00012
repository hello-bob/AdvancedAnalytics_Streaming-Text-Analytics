{"aid": "40290586", "title": "Mastodon Is DDoSing Me", "url": "https://kevquirk.com/mastodon-is-ddosing-me", "domain": "kevquirk.com", "votes": 2, "user": "gulced", "posted_at": "2024-05-07 19:40:57", "comments": 0, "source_title": "Mastodon Is DDoSing Me | Kev Quirk", "source_text": "Mastodon Is DDoSing Me | Kev Quirk\n\n# Kev Quirk\n\n# Mastodon Is DDoSing Me\n\n07 May 2024 | ~4 minute read\n\nWhenever I, or someone else, posts a link to this blog on Mastodon, it DDoS's\nme and brings the site down for a couple minutes.\n\nOver the last few months, I've noticed that whenever I (or someone else) posts\na link to this blog on Mastodon, the decentralised nature of the platforms\neffectively DDoS's me.\n\nA DDoS is a Distributed Denial of Service, where multiple remote servers all\nsend traffic at the same time, which overwhelms the target. The \"target\", in\nthis case, is my server. \ud83d\ude22\n\n## Why is this happening?\n\nSo when you post a link to an external source to pretty much any social media\nsite, the social site pulls some meta data from the remote site and creates a\nlittle card that makes the link look pretty. For this site, it looks something\nlike this:\n\nThe social site attempts to pull things like the feature image, post title,\ndescription and blog name. If the link is posted to a centralised service,\nlike Facebook or Twitter, it's not a problem as there's only one source\nrequesting that meta data.\n\nBut Mastodon is different.\n\nAs many of us know, Mastodon is decentralised, which means that the network is\nspread among multiple servers, or instances. So when a link is posted, every\ninstance where you have a follower requests this meta data independently.\n\nProblem is, I have around 26,000 followers on Mastodon. According to FediDB,\nthere are around 27,000 instances on the Fediverse.\n\nSo let's say, conservatively, my 26k followers are spread across 1/4 of the\ninstances that are out there. That's still 6,750 servers that request that\nmeta data, every time I post a link to this site, at the same time.\n\nThe result is a DDoS that takes down my site for a couple minutes.\n\nBrilliant.\n\n## What can I do about it?\n\nIn short, not much. I've tried serving the feature image from a CDN to take\nsome of the load off my server, but that hasn't worked.\n\nI'm considering putting this site behind Cloudflare to see if that helps, but\nthat makes me feel really icky. So I'd only do that as a last resort.\n\n## What can Mastodon do about it?\n\nThis problem is on them to fix, really. It's a bad look that as users become\nmore popular, they're effectively DDoS'd. At this point, I'm very reluctant to\npost links direct to people's blogs, as it will likely bring their site down.\nInstead, I create link posts so this site feels that pain, not the site\nowners.\n\nThe Mastodon team have apparently implemented a temporary solution where\ninstances will wait a random time between 0 and 60 seconds before they fetch\nthe meta data, but I'm yet to see that work for me.\n\nThey're also working on a long-term solution, apparently. Renaud Chaput, the\nMastodon CTO was quoted in this post on The Register saying:\n\n> We have a mitigation in place as servers are waiting a random time between\n> zero and 60 seconds before generating the preview to avoid sending all the\n> requests at the same time, but a proper fix would be to have the link\n> preview information shared between servers (federated) so each server does\n> not need to fetch it. We have several ideas on how this could work, but we\n> also need to ensure that this will not cause other issues, like allowing\n> those to be spoofed.\n>\n> We do not consider this as a critical issue because you need accounts on\n> thousand of servers to follow an account for this to generate a non-trivial\n> amount of requests, especially now that they are spread over 60 seconds, and\n> there are much easier ways available to achieve the same result than using\n> the Fediverse.\n\nWell that's bullshit. I'm far from the largest account on Mastodon. Yes, I\nhave a lot of followers, but I'm not really an anomaly. Mastodon is\neffectively DDoSing lots of sites across the internet, if that's not a\ncritical issue, I don't know what is.\n\nDrew DeVault said this in a GitHub issue on the topic:\n\n> It is the responsibility of software like Mastodon to be a good neighbor on\n> the internet. DDoSing others is not being a good neighbor! It's important to\n> figure out how to prevent this issue from occurring.\n\nCouldn't have said it better myself, thanks Drew.\n\nI've thought about the scalability of Mastodon a number of times. As the co-\nadmin of a fairly large instance, and knowing what it costs to run that\ninstance, scalability on Mastodon is an issue, I think.\n\nThese kind of issues are a fundamental challenge of any decentralised network.\nAnd I totally get that they're not a simple problem to fix. But the fact is,\nfor something to be decentralised, scalability is a challenge. I don't know\nhow the Mastodon team plan to fix these issues, but if the network is going to\ncontinue to grow, they need to come up with some solutions.\n\nPlease, Mastodon, stop DDoSing your users.\n\n  * Meta\n  * Web\n\n\u2190 The one before The Bum Gun\n\n## Get in touch!\n\nReceiving emails from my readers is my favourite thing, so if you have\nsomething to say, feel free to drop me an email or sign my guestbook.\n\nReply by email Sign my guestbook\n\n## Want more content?\n\nSay no more, dear reader. Here's three random posts from this blog for you to\nperuse:\n\nHow Much Does It Cost To Run This Blog? 13 Jun 2020\n\nMy Home Server \u2013 2 Months On 07 Apr 2019\n\nRed Poppy Fascism - Give Me a Break 07 Nov 2015\n\n## Subscribe via email\n\nWant to be informed when I post new articles? Simply enter your email address\nbelow and you will get an email whenever new posts are published.\n\nAlternatively, you can subscribe via RSS instead.\n\n## Enjoyed this post?\n\nI put a lot of work into maintaining this site and I really enjoy interacting\nwith my readers.\n\nMy fuel of choice is coffee, so if you did enjoy this post, or found it in any\nway useful, I'd appreciate more fuel to keep me going. \u2764\ufe0f\n\nBuy me a coffee\n\nEnjoyed my content? You can say thanks by buying me a coffee if you like.\n\nThank you.\n\nBuy me a coffee\n\nEnter your email below to subscribe to new posts by email. No spam, ever.\nPinky-promise.\n\nBack to top\n\nAll work licensed under CC BY-SA 4.0 unless otherwise stated.\n\nPrivacy | Disclaimer\n\nMastodon Mastodon proven.lol/544327 github.com/kevquirk 72ja@qrk.one\n\n", "frontpage": false}
