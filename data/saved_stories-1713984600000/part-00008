{"aid": "40141934", "title": "I tricked iOS into giving me EU DMA features", "url": "https://adamdemasi.com/2024/04/20/ios-eligibility.html", "domain": "adamdemasi.com", "votes": 2, "user": "vasdfdf", "posted_at": "2024-04-24 08:26:08", "comments": 0, "source_title": "How I tricked iOS into giving me EU DMA features", "source_text": "How I tricked iOS into giving me EU DMA features \u00b7 kirbblog\n\n# How I tricked iOS into giving me EU DMA features\n\nApril 20, 2024 3 minute read\n\nI\u2019m in Australia, but as far as my iPhone knows, I\u2019m in Italy. How?\n\nIn iOS 17.4, Apple introduced a new system called eligibilityd. This works\nwith countryd (which you might have heard about when it first appeared in iOS\n16.2) and the Apple ID system to decide where you physically are. The idea is\nthat multiple sources need to agree on where you are, before giving you access\nto features such as those mandated by the Digital Markets Act.\n\nA plist file downloaded from Apple declares \u201cdomains\u201d, which are individual\nfeatures locked behind a location wall. At the time of writing, there are 24\n(although one is missing), and the file was last updated on the 5th of April.\nWe weren\u2019t tracking updates to it before this week, so I don\u2019t know what\nchanged exactly. As a reminder, iOS 17.4 launched on the 5th of March, and was\nin beta from the 30th of January.\n\nProbably to obscure what they are, these domains are named after the chemical\nelements corresponding to their numeric value. The only way to determine what\nfeature these correspond to is by disassembling the relevant parts of iOS that\ncheck the eligibility system. On The Apple Wiki\u2019s Eligibility article, I\u2019ve\ndocumented what I\u2019ve already found.\n\nMost domains are currently configured to only be allowed on iPhone, because\nthe DMA has only declared Apple a gatekeeper with phones, not tablets. So much\nfor all the laptop-class hardware the iPad Pro gets if it doesn\u2019t get laptop-\nclass software features the iPhone does get...\n\nApple has the ability to push an update to this config file at any time,\nwhether to roll out a feature to more countries, to enable features on iPad,\nor to withdraw the feature from some or all countries. The update would likely\nbe installed on all active iPhones within a few days.\n\nI\u2019m working through figuring out what each of the domains are. See the Apple\nWiki article for the most current table.\n\nSo knowing all this, how did I trick iOS into giving me the DMA features?\nWell, I took my old 12 Pro Max and started tinkering around. I reset the\nphone, disabled Location Services, inserted an Italian SIM from my holiday\nmany years ago, and made a new Italian Apple ID. No good.\n\nI then set up a pfSense Wi-Fi router, broadcasting itself as having a\nregulatory country of Italy. (I compared the regulations, there are a bunch of\ndifferences for 5 GHz, so I disabled it. Otherwise, the EU\u2019s Wi-Fi regulations\nare stricter than Australia\u2019s, so it\u2019s safe.) Well, looking at the device\u2019s\nlogs, countryd still knew I was in Australia, even after erasing and setting\nup the phone again.\n\nThe last thing I tried was going downstairs to our basement, where there\u2019s no\nmobile signal. Reset the phone again, and what do you know, as soon as I open\nSafari it asks me to choose a browser. I put the phone in airplane mode so I\ncan go back upstairs. As far as I can tell, it still believes I\u2019m in Italy.\nIt\u2019s not just the 30 day grace period Apple provides - in fact, that grace\nperiod only applies to four of the 24 domains.\n\nI don\u2019t know how much of what I did was necessary (at minimum, the VPN is\nlikely not needed), but this phone is obviously not practical to use in this\nstate. It needs to stay in airplane mode, and needs a Wi-Fi network configured\nto present itself as having an EU regulatory country. It\u2019s really only a setup\nI can use for testing EU features.\n\nAgain, I\u2019m still actively researching this. Check the eligibility article to\nsee the most current information I have.\n\n> This post is based on a tweet I originally posted on Twitter.\n>\n> See also my previous post about iOS 17.4\u2019s flawed app marketplace\n> installation flow, and the next post, Features controlled by iOS 17.4\u2019s\n> eligibility system.\n\n\u00a9 2024 Adam Demasi Content licensed under CC-BY 4.0 Theme based on Chalk\n\n  * Mastodon\n  * Twitter\n  * GitHub\n  * Ko-fi\n  * GitHub Sponsors\n  * Patreon\n\n", "frontpage": false}
