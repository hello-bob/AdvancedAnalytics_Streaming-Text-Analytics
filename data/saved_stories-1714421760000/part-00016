{"aid": "40198509", "title": "File Compression Is Awesome: A Practical Guide to File Compression", "url": "https://popcar.bearblog.dev/file-compression-is-awesome/", "domain": "popcar.bearblog.dev", "votes": 2, "user": "popcar2", "posted_at": "2024-04-29 14:06:19", "comments": 0, "source_title": "File Compression Is Awesome: A Practical Guide", "source_text": "File Compression Is Awesome: A Practical Guide | Popcar's Hub\n\n# Popcar's Hub\n\n# File Compression Is Awesome: A Practical Guide\n\n29 Apr, 2024\n\n## Table of Contents\n\n  * Introduction\n\n  * Compressing Images\n\n  * Compressing GIFs\n\n  * Compressing Videos\n\n  * Compressing Everything Else\n\n  * Summary\n\n## Introduction\n\n_Behold: A picture of a European Bluebird I lifted off the internet\n\nI've recently been in a bit of a rabbit hole regarding file compression, and I\ncame out of that hole with a revelation: compressing things is really neat,\nand a lot easier than people might expect. Up there are two of the same\npicture: One is a 2.8MB jpg image, and the other is a 295KB webp image\n(roughly 10% of the original size)!\n\nThey're both the same resolution and have almost indistinguishable quality\n(zoom in if you don't believe me). The original picture has a huge resolution,\nso I can probably get away with making it a tad smaller by resizing it as well\n(with a few minor changes along the way).\n\n_This image is just 55KB, a whopping 2% of the original image.\n\nI know this isn't news for some, but in this post I'll share a practical guide\nto how I'm compressing my files to save on local and cloud storage. It's also\na good habit to get into considering how often I share things online, and\noccasionally bumping into Discord's file limits.\n\nI'm also not going to explain how compression works since that would take\nforever. Let's just say it's magic.\n\n## Compressing Images\n\nLuckily, images are the easiest of the bunch. There's a great web-app called\nSquoosh which makes image compression a breeze. On the right side of the\nscreen, you can choose a file type and mess with a bunch of intuitive sliders\nto get the image exactly where you need it to be.\n\n_Squoosh shows you a side-by-side comparison, which is very useful.\n\nYou can also compress the left side of the image to compare different file\ntypes and compression algorithms.\n\nIn my experience, the best is WEBP by far. WebP is supported by every browser\nat this point and is quickly becoming supported everywhere else. If for\nwhatever reason you can't use webp, then MozJPEG is probably your second best\nchoice. Just know that it can be pretty crusty when you try to compress\nheavily.\n\n_Yup. Looks good to me.\n\nThere are other good image formats like AVIF and JPEG-XL that can get even\nbetter image quality for smaller file sizes, but they're not supported that\nmuch so I wouldn't recommend it.\n\nThe biggest problem with Squoosh though is that you can only do one image at a\ntime. Squoosh was made by Google, and they actually had a command line tool\nthat made compressing batches of images really simple. Unfortunately, Google\ndid what they do best: cancel squoosh-cli and move the team to different,\nslightly less cancelled projects.\n\nThankfully Squoosh is open source, and a brave soul called frostoven has a\nfork with the command line tool still intact. I'll spare you the technical\ndetails since that GitHub has all the info you might need. When you do have it\nset up, it's super simple to use. It even has an auto function to estimate the\nbest settings, which is usually good enough!\n\n## Compressing GIFs\n\nSTOP USING GIFS. I MEAN IT. STOP IT.\n\nOkay, I'm fine now. Gifs are a disaster that should have gone extinct fifteen\nyears ago, but I still find them in the wild and am forced to download tons of\nmegabytes to see a crusty poorly compressed 5 second animation running at 10\nframes per second.\n\nThey're definitely dying, websites like Giphy don't even use gifs anymore,\nthey're actually just autoplaying WEBMs. Unfortunately, sometimes you still\njust have to use gifs since some websites demand it, like itch.io which I use\nto publish my games.\n\nFor gifs, use ezgif.com. It's a website that has all sorts of tools to help\nyou reduce the file size of your gif. There aren't many tricks to compress a\ngif without crushing the quality, but here are a few pointers:\n\n  * Resize the gif to as small as you can make it\n\n  * Use a low framerate. Consider 20FPS or lower so it isn't overly big.\n\n  * Speed up your gif so it's over quicker.\n\n  * Use the ezgif optimizer and consider using less colors. A gif doesn't have to look that good, anyways.\n\nIf you don't have to use gifs and aren't tied by any rules, you should either\nuse an autoplaying video with the controls hidden or use a much better format\nthat's gaining a lot of traction and actually has a chance to run over gif in\nthe next few years.\n\nWhat format? I'm glad you asked. It's AVIF! You might've seen it in Squoosh,\nbut AVIF can actually be used for moving images too, and it's very optimized\nfor it. I did say that it's barely supported anywhere, and that's true (my\nimage format even supports JPEG-XL but not AVIF)... However... Starting from\nJanuary 2024, every major browser now supports AVIF, so it's only a matter of\ntime before you start seeing them around.\n\nI have a 3 second gif that's 3.2MB large. Converting it to AVIF using the gif\nto avif ezgif converter, it comes out at only 42KB!\n\n_If you see this, your browser is AVIF ready. If not, you should update your\nbrowser.\n\nI really hope support for this format kicks off, it's really convenient to\nfinally have a drop-in replacement for gif that isn't awkwardly using a video.\nThe image format itself isn't half bad, too.\n\n## Compressing videos\n\nCompressing videos needs a bit more knowledge than images, but for this\nthere's a great program called Handbrake. If you've dabbled in the video\nworld, you probably already use this. Note that websites like YouTube compress\nyour videos automatically so you don't always need to do this.\n\nHandbrake uses FFMPEG under the hood, which is the holy grail of video\nconversion and compression. Handbrake is just a GUI that allows you to use\nthat without being in eternal suffering.\n\nThere are a lot of buttons and sliders and advanced settings you can mess\naround with, but generally you just want to pay attention to two things: The\npreset (1) and quality slider (2).\n\n_Handbrake may look busy, just pay attention to these two.\n\nClick on \"Open Source\" at the top left to choose your video file, then choose\na preset (#1 in the picture). The preset sets up all the settings to fit\nwhatever you're trying to do, and gives you an estimated file size. If you're\nsharing a video on the internet, I highly recommend using one of the Web\npresets. If you're optimizing for file size without sacrificing quality too\nmuch, use one of the Matroska H.265 presets. The framerate and resolution is\nup to you.\n\nThe quality slider over at the video tab (#2 in the picture) dictates how good\nyour video will look. Moving it to the left results in more artifacting\n(resulting in a blurry video), and moving it to the right results in better\nquality (but larger files). Somewhere in the middle is usually preferable, but\nyou should just try it and tune until you're satisfied. The handbrake\ndocumentation recommends somewhere between 18 and 28. If the quality isn't to\nyour liking (the web presets can be rough sometimes), try a different preset\nlike the general ones.\n\nOne last thing to mention is a big slider in the middle also called \"Preset\".\nMaking this slow or very slow will result in better quality but make\ncompression take longer. You should always set this to as slow as you can, so\nI usually just leave it at slower.\n\nHit start at the top and you're done! Everyone will thank you for not sharing\nyour 12 gigabyte 4K 60FPS camera footage. Why were you recording at such a\nhigh resolution anyways?\n\nAnyways, here's an example clip of me playing Dr. Robotnik's Ring Racers. It\nwas recorded at 720p and resulted in a 60MB file, and now it's down to 7MB at\n480p.\n\n_Gotta go fast...\n\n## Compressing Everything Else\n\nYou might think compressing every other file would just mean putting them into\na zip archive... And you're not wrong, but there's a bit more nuance to it.\n\nEven though there are different archive formats like zip, rar, 7z, etc, they\ncan also be compressed using different algorithms. Different algorithms might\nbe better depending on the files you're looking to compress.\n\n_KDE's archive manager lets you choose.\n\nFor creating file archives, I highly recommend 7-Zip (the program, not the\nfile type with the same name). Other programs like Winrar (people still use\nthat?) may support the same file types, but 7zip often compresses the best and\nhas more features.\n\n.zip formats are the most universally supported, but the best compression\nactually comes in the .7z format since it supports the LZMA2 compression\nmethod, which is probably the best one for general use. The difference between\na regular zip file and an optimized 7zip file can be huge.\n\nFor example, compressing a 44MB folder using the default zip settings comes\nout at 16.4MB. Compressing that same folder using 7zip with LZMA2 at max\ncompression comes out at 9.1MB. Your mileage may vary depending on what\nexactly you're compressing, but in general compression type really does\nmatter.\n\nAnyways, let's get into it. Using 7-zip, right click your folder and click\n\"Add to archive...\"\n\n_Just focus on the first 3 options.\n\n  * Archive Format: Use .zip if you want it to be compatible with everyone, .7z otherwise.\n\n  * Compression level: Higher values means better but slower compression. For anything under 500MB I'd recommend staying on Ultra, but for huge amounts of files it could take too long.\n\n  * Compression Format: The compression algorithm used. LZMA is often the best option, but you could do some trial and error to see which one comes out the best.\n\nI often use this to compress old personal files to back them up in the cloud,\nor compress other things to move onto my external hard drive like Steam games.\nYou can save a lot of space just by archiving your files.\n\n## Summary\n\nCompressing files might seem like a daunting task, but once you get accustomed\nto the tools it becomes quick and easy.\n\n  * Use Squoosh for images.\n\n  * Use ez-gif for gifs, or consider moving into the 21st century and use videos/AVIF instead.\n\n  * Use Handbrake for videos.\n\n  * Use 7-Zip for archiving files, with the .7z format and LZMA2 compression.\n\nAnd there you have it. Hopefully you, too, can reduce the file sizes being\nshared around in chat rooms and emails. My limited mobile internet will thank\nyou.\n\n_Liked the article? Consider dropping me a few dollars at ko-fi!\n\nPowered by Bear \u0295\u2022\u1d25\u2022\u0294\n\n", "frontpage": false}
