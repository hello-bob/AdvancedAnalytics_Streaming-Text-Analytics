{"aid": "40099820", "title": "SSH Port Became 22", "url": "https://www.ssh.com/academy/ssh/port", "domain": "ssh.com", "votes": 1, "user": "nickburns", "posted_at": "2024-04-20 18:45:33", "comments": 0, "source_title": "The story of the SSH port is 22.", "source_text": "The story of the SSH port is 22.\n\n  * About us\n  * Investors\n  * Partners\n  * Careers\n\nRequest demo\n\n  * Solutions\n\n    * SOLUTIONS\n\n      * Zero Trust Suite\n      * Quantum-Safe Cryptography (QSC)\n      * Secure Business Communications\n      * Security Risk Assessment, Quantification & Mitigation\n    * By Topic\n\n      * Just-in-Time Access\n      * Secure vendor access\n      * Credentials & Secrets Management\n      * Hybrid & multi-cloud access management\n      * Interactive tour: Privileged Access in the Cloud\n      * M2M connections\n      * IT Audits & Compliance\n      * Secure file transfer\n    * By Industry\n\n      * Managed Service Providers (MSP)\n      * Operational Technology (OT)\n      * Federal Government Security\n  * Products\n\n    * SECURE ACCESS & SECRETS MANAGEMENT\n\n      * PrivXTM Hybrid PAM\n      * Universal SSH Key Manager\u00ae\n    * SECURE FILE TRANSFER & ENCRYPTION\n\n      * NQXTM quantum-ready encryption\n      * TectiaTM SSH Client/Server\n      * TectiaTM z/OS\n    * SECURE BUSINESS COMMUNICATIONS\n\n      * Deltagon Secure Email\n      * Deltagon Secure Sign\n      * All-in-one Deltagon Secure Communications Suite\n\nRequest demo\n\n  * Solutions\n\n    * SOLUTIONS\n\n      * PrivX Zero Trust Suite\n      * Secure Collaboration 2024\n      * Strong ID-based access with Entra ID & Zero Trust Suite\n      * Quantum-Safe Cryptography (QSC)\n      * Security Risk Assessment, Quantification & Mitigation\n      * OpenSSH by SSH\n      * Device trust & access and identity verification\n      * Identity-based authentication & converged IAM and PAM\n    * TOPICS\n\n      * Just-in-Time Access\n      * Secure vendor access\n      * Credentials & Secrets Management\n      * Hybrid & Multi-Cloud Access Management\n      * Interactive tour: Privileged Access in the Cloud\n      * M2M Connections Management\n      * IT Audits & Compliance\n      * Secure File Transfer\n    * INDUSTRIES\n\n      * Managed Service Providers (MSP)\n      * Operational Technology (OT)\n      * Federal Government Security\n      * Healthcare Data Security\n  * Products\n\n    * SECURE BUSINESS COMMUNICATIONS\n\n      * Secure Mail 2024\n      * Secure Messaging 2024\n      * Secure Sign\n      * All-in-one Secure Collaboration\n    * SECURE ACCESS & SECRETS MANAGEMENT\n\n      * PrivXTM hybrid PAM\n      * PrivXTM OT Edition\n      * Universal SSH Key Manager\u00ae\n    * SECURE FILE TRANSFER & ENCRYPTION\n\n      * TectiaTM SSH Client/Server\n      * TectiaTM SSH Server for IBM z/OS\n      * NQXTM quantum-safe encryption\n  * Services\n\n    * SSH Risk AssessmentTM\n    * Professional Services\n    * Support\n    * Contact us\n  * Customer cases\n\n    * PrivX Zero Trust PAM\n    * Enterprise Key Management UKM\n    * Tectia SFTP for servers & mainframes\n    * SSH Secure Collaboration\n  * Resources\n\n    * SSH Academy\n    * Content library\n    * Blog\n    * References\n    * Press releases\n    * Downloads\n    * Manuals\n    * Events & Webinars\n    * Media\n    * Legal\n    * Report a vulnerability\n\n  * Solutions\n\n    * SOLUTIONS\n\n      * PrivX Zero Trust Suite\n      * Secure Collaboration 2024\n      * Strong ID-based access with Entra ID & Zero Trust Suite\n      * Quantum-Safe Cryptography (QSC)\n      * Security Risk Assessment, Quantification & Mitigation\n      * OpenSSH by SSH\n      * Device trust & access and identity verification\n      * Identity-based authentication & converged IAM and PAM\n    * TOPICS\n\n      * Just-in-Time Access\n      * Secure vendor access\n      * Credentials & Secrets Management\n      * Hybrid & Multi-Cloud Access Management\n      * Interactive tour: Privileged Access in the Cloud\n      * M2M Connections Management\n      * IT Audits & Compliance\n      * Secure File Transfer\n    * INDUSTRIES\n\n      * Managed Service Providers (MSP)\n      * Operational Technology (OT)\n      * Federal Government Security\n      * Healthcare Data Security\n  * Products\n\n    * SECURE BUSINESS COMMUNICATIONS\n\n      * Secure Mail 2024\n      * Secure Messaging 2024\n      * Secure Sign\n      * All-in-one Secure Collaboration\n    * SECURE ACCESS & SECRETS MANAGEMENT\n\n      * PrivXTM hybrid PAM\n      * PrivXTM OT Edition\n      * Universal SSH Key Manager\u00ae\n    * SECURE FILE TRANSFER & ENCRYPTION\n\n      * TectiaTM SSH Client/Server\n      * TectiaTM SSH Server for IBM z/OS\n      * NQXTM quantum-safe encryption\n  * Services\n\n    * SSH Risk AssessmentTM\n    * Professional Services\n    * Support\n    * Contact us\n  * Customer cases\n\n    * PrivX Zero Trust PAM\n    * Enterprise Key Management UKM\n    * Tectia SFTP for servers & mainframes\n    * SSH Secure Collaboration\n  * Resources\n\n    * SSH Academy\n    * Content library\n    * Blog\n    * References\n    * Press releases\n    * Downloads\n    * Manuals\n    * Events & Webinars\n    * Media\n    * Legal\n    * Report a vulnerability\n\n  * About us\n  * Investors\n  * Partners\n  * Careers\n\nRequest demo\n\n# SSH Port\n\n### Contents\n\nHow SSH port became 22 The story of getting SSH port 22 Changing the SSH port\nin the server Specifying SSH port number on the command line Configuring SSH\naccess through firewalls Outbound SSH Back-tunneling is a risk Inbound SSH\naccess Enabling SSH access via iptables\n\n## How SSH port became 22\n\nThe default SSH port is 22. It is not a coincidence. This is a story of how it\ngot that port.\n\nWhen I (Tatu Ylonen first published this story in April 2017, it went viral\nand got about 120,000 readers in three days.\n\n## The story of getting SSH port 22\n\nI wrote the initial version of SSH (Secure Shell) in Spring 1995. It was a\ntime when telnet and FTP were widely used.\n\nAnyway, I designed SSH to replace both telnet (port 23) and ftp (port 21).\nPort 22 was free. It was conveniently between the ports for telnet and ftp. I\nfigured having that port number might be one of those small things that would\ngive some aura of credibility. But how could I get that port number? I had\nnever allocated one, but I knew somebody who had allocated a port.\n\nThe basic process for port allocation was fairly simple at that time. Internet\nwas smaller and we were in the very early stages of the Internet boom. Port\nnumbers were allocated by IANA (Internet Assigned Numbers Authority). At the\ntime, that meant an esteemed Internet pioneer called Jon Postel and Joyce K.\nReynolds. Among other things, Jon had been the editor of such minor protocol\nstandards as IP (RFC 791), ICMP (RFC 792), and TCP (RFC 793). Some of you may\nhave heard of them.\n\nTo me Jon felt outright scary, having authored all the main Internet RFCs!\n\nAnyway, just before announcing ssh-1.0 in July 1995, I sent this e-mail to\nIANA:\n\n    \n    \n    From ylo Mon Jul 10 11:45:48 +0300 1995 From: Tatu Ylonen <ylo@cs.hut.fi> To: Internet Assigned Numbers Authority <iana@isi.edu> Subject: request for port number Organization: Helsinki University of Technology, Finland Dear Sir, I have written a program to securely log from one machine into another over an insecure network. It provides major improvements in security and functionality over existing telnet and rlogin protocols and implementations. In particular, it prevents IP, DNS and outing spoofing. My plan is to distribute the software freely on the Internet and to get it into as wide use as possible. I would like to get a registered privileged port number for the software.\n    \n    The number should preferably be in the range 1-255 so that it can be used in the WKS field in name servers. I'll enclose the draft RFC for the protocol below. The software has been in local use for several months, and is ready for publication except for the port number. If the port number assignment can be arranged in time, I'd like to publish the software already this week. I am currently using port number 22 in the beta test.\n    \n    It would be great if this number could be used (it is currently shown as Unassigned in the lists). The service name for the software is \"ssh\" (for Secure Shell).\n    \n    Yours sincerely, Tatu Ylonen <ylo@cs.hut.fi> ... followed by protocol specification for ssh-1.0\n\nThe next day, I had an e-mail from Joyce waiting in my mailbox:\n\n    \n    \n    Date: Mon, 10 Jul 1995 15:35:33 -0700 From: jkrey@ISI.EDU To: ylo@cs.hut.fi Subject: Re: request for port number Cc: iana@ISI.EDU Tatu, We have assigned port number 22 to ssh, with you as the point of contact. Joyce\n\nThere we were! SSH port was 22!!!\n\nOn July 12, 1995, at 2:32am, I announced a final beta version to my beta\ntesters at Helsinki University of Technology. At 5:23pm I announced ssh-1.0.0\npackages to my beta testers. At 5:51pm on July 12, 1995, I sent an\nannouncement about SSH (Secure Shell) to the cypherpunks@toad.com mailing\nlist. I also posted it to a few newsgroups, mailing lists, and directly to\nselected people who had discussed related topics on the Internet.\n\n## Changing the SSH port in the server\n\nBy default, the SSH server still runs in port 22. However, there are occasions\nwhen it is run in a different port. Testing use is one reason. Running\nmultiple configurations on the same host is another. Rarely, it may also be\nrun without root privileges, in which case it must be run in a non-privileged\nport (i.e., port number >= 1024).\n\nThe port number can be configured by changing the Port 22 directive in\n/etc/ssh/sshd_config. It can also be specified using the -p <port> option to\nsshd. The SSH client and sftp programs also support the -p <port> option.\n\n## Specifying SSH port number on the command line\n\nThe -p <port> option can be used to specify the port number to connect to when\nusing the ssh command on Linux. The -P <port> (note: capital P) option can be\nused with SFTP and scp. The SSH port number command line setting overrides any\nvalue configured in configuration files.\n\n## Configuring SSH access through firewalls\n\nSSH is one of the few protocols that are frequently permitted through\nfirewalls. Unrestricted outbound SSH is very common, especially in smaller and\nmore technical organizations. Inbound SSH is usually restricted to one or very\nfew servers.\n\n### Outbound SSH\n\nConfiguring outbound SSH in a firewall is very easy. If there are restrictions\non outgoing traffic at all, just create a rule that allows TCP port 22 to go\nout. That is all. If you want to restrict the destination addresses, you can\nalso limit the rule to only permit access to your organization's external\nservers in the cloud, or to a jump server that guards cloud access.\n\n### Back-tunneling is a risk\n\nUnrestricted outbound SSH can, however, be risky. The SSH protocol supports\ntunneling. The basic idea is that it is possible to have the SSH server on an\nexternal server listen to connections from anywhere, forward those back into\nthe organization, and then make a connection to some Internal server.\n\nThis can be very convenient in some environments. Developers and system\nadministrators frequently use it to open a tunnel that they can use to gain\nremote access from their home or from their laptop when they are travelling.\n\nHowever, it generally violates policy and takes control away from firewall\nadministrators and the security team. It can, for example, violate PCI, HIPAA,\nor NIST SP 800-53. It can be used by hackers and foreign intelligence agencies\nto leave backdoors into organizations\n\n### Inbound SSH access\n\nFor inbound access, there are a few practical alternatives:\n\n  * Configure firewall to forward all connections to port 22 to a particular IP address on the internal network or DMZ.\n\n  * Use different ports on the firewall to access different servers.\n\n  * Only allow SSH access after you have logged in using a VPN (Virtual Private Network), typically using the IPsec protocol.\n\n## Enabling SSH access via iptables\n\nIptables is a host firewall built into the Linux kernel. It is typically\nconfigured to protect the server by preventing access to any ports that have\nnot been expressly opened.\n\nIf iptables is enabled on the server, the following commands can be used to\npermit incoming SSH access. They must be run as root.\n\n    \n    \n    iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -p tcp --sport 22 -m conntrack --ctstate ESTABLISHED -j ACCEPT\n\nIf you want to save the rules permanently, on some systems that can be done\nwith the command:\n\n    \n    \n    service iptables save\n\nWe at SSH secure communications between systems, automated applications, and\npeople. We strive to build future-proof and safe communications for businesses\nand organizations to grow safely in the digital world.\n\n  * Solutions\n\n    * Zero Trust Suite\n    * Zero Trust Suite & Entra ID Integration\n    * Quantum-Safe Cryptography (QSC)\n    * Secure Collaboration 2024\n    * Security Risk Mitigation\n    * OT security\n    * MSP Security\n    * Just-in-Time Access\n    * Secure vendor access\n    * Hybrid cloud security\n    * Credentials & Secrets Management\n    * IT Audits & Compliance\n  * Products\n\n    * PrivXTM Hybrid PAM\n    * UKM Zero TrustTM\n    * Tectia SSH Client/ServerTM\n    * TectiaTM z/OS\n    * SSH Secure Collaboration 2024\n    * Secure Mail 2024\n    * Secure Sign\n    * NQXTM Quantum-Safe\n  * Services\n\n    * SSH Risk AssessmentTM\n    * Professional Services\n    * Support\n  * Resources\n\n    * Careers\n    * References\n    * Downloads\n    * Manuals\n    * Events & Webinars\n    * Blog\n  * Company\n\n    * About us\n    * Contact\n    * Investors\n    * Partners\n    * Press\n\n#### Stay on top of the latest in cybersecurity\n\nBe the first to know about SSH\u2019s new solutions, product updates, new features,\nand other SSH news!\n\nThanks for submitting the form.\n\n\u00a9 Copyright SSH \u2022 2023 \u2022 Legal\n\n### Privacy Preference Center\n\nWhen you visit any website, it may store or retrieve information on your\nbrowser, mostly in the form of cookies. This information might be about you,\nyour preferences or your device and is mostly used to make the site work as\nyou expect it to. The information does not usually directly identify you, but\nit can give you a more personalized web experience. Because we respect your\nright to privacy, you can choose not to allow some types of cookies. Click on\nthe different category headings to find out more and change our default\nsettings. However, blocking some types of cookies may impact your experience\nof the site and the services we are able to offer. More information\n\n### Manage Consent Preferences\n\n#### Strictly Necessary Cookies\n\nAlways Active\n\nThese cookies are necessary for the website to function and cannot be switched\noff in our systems. They are usually only set in response to actions made by\nyou which amount to a request for services, such as setting your privacy\npreferences, logging in or filling in forms. You can set your browser to block\nor alert you about these cookies, but some parts of the site will not then\nwork. These cookies do not store any personally identifiable information.\n\n#### Performance Cookies\n\nThese cookies allow us to count visits and traffic sources so we can measure\nand improve the performance of our site. They help us to know which pages are\nthe most and least popular and see how visitors move around the site. All\ninformation these cookies collect is aggregated and therefore anonymous. If\nyou do not allow these cookies we will not know when you have visited our\nsite, and will not be able to monitor its performance.\n\n#### Functional Cookies\n\nThese cookies enable the website to provide enhanced functionality and\npersonalisation. They may be set by us or by third party providers whose\nservices we have added to our pages. If you do not allow these cookies then\nsome or all of these services may not function properly.\n\n#### Targeting Cookies\n\nThese cookies may be set through our site by our advertising partners. They\nmay be used by those companies to build a profile of your interests and show\nyou relevant adverts on other sites. They do not store directly personal\ninformation, but are based on uniquely identifying your browser and internet\ndevice. If you do not allow these cookies, you will experience less targeted\nadvertising.\n\n### Performance Cookies\n\nlabel\n\nConsent Leg.Interest\n\nlabel\n\nlabel\n\nlabel\n\nBy clicking \u201cAccept All Cookies\u201d, you agree to the storing of cookies on your\ndevice to enhance site navigation, analyze site usage, and assist in our\nmarketing efforts.\n\n", "frontpage": false}
